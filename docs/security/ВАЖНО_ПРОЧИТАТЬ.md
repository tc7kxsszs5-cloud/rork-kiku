# ⚠️ ВАЖНО: Решение ошибки про политики

## Проблема
```
ERROR: 42710: policy "Users can view their own chats" for table "chats" already exists
```

## ✅ Решение

### Шаг 1: Используйте файл `МИНИМАЛЬНЫЙ_SQL.sql`

Этот файл содержит **ТОЛЬКО** создание таблиц, **БЕЗ** политик.

### Шаг 2: Применение

1. Откройте файл **`МИНИМАЛЬНЫЙ_SQL.sql`**
2. Скопируйте **ВЕСЬ** код (Ctrl+A, Ctrl+C)
3. В Supabase SQL Editor:
   - Удалите весь старый код (если есть)
   - Вставьте новый код
   - Нажмите **Run**

### Шаг 3: Если ошибка все еще есть

Возможно, вы применяете несколько SQL файлов подряд. 

**Сделайте так:**
1. Откройте Supabase SQL Editor
2. **Очистите** редактор (удалите весь код)
3. Скопируйте **ТОЛЬКО** код из `МИНИМАЛЬНЫЙ_SQL.sql`
4. Вставьте и выполните

## ❌ НЕ используйте эти файлы (они содержат политики):

- ❌ `SQL_РОДИТЕЛЬ_РЕБЕНОК_БЕЗОПАСНЫЙ.sql`
- ❌ `backend/security-policies.sql`
- ❌ Любой файл с `CREATE POLICY` в названии

## ✅ Используйте:

- ✅ `МИНИМАЛЬНЫЙ_SQL.sql` - только таблицы, без политик

## Проверка

После применения проверьте:

```bash
cd backend
bun test-registration.ts
```

Если все еще ошибка - проверьте, что вы не применяете другие SQL файлы одновременно.
