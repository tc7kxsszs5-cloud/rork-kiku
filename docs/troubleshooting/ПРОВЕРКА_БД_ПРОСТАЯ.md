# ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

Vercel **–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env.local` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. `DATABASE_URL` –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ runtime –Ω–∞ Vercel.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API endpoint

–Ø —Å–æ–∑–¥–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Vercel.

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
curl "https://backend-three-mauve-67.vercel.app/api/trpc/test.dbCheck"
```

### –ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ:

```
https://backend-three-mauve-67.vercel.app/api/trpc/test.dbCheck
```

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç endpoint:

- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- ‚úÖ –í–µ—Ä—Å–∏—é PostgreSQL  
- ‚úÖ –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "result": {
    "data": {
      "json": {
        "success": true,
        "version": "PostgreSQL 15.x",
        "tables": [],
        "extensions": ["plpgsql"],
        "tableCount": 0,
        "extensionCount": 1
      }
    }
  }
}
```

## ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```json
{
  "result": {
    "data": {
      "json": {
        "success": false,
        "error": "password authentication failed for user postgres"
      }
    }
  }
}
```

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL` –≤ Vercel —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º.

## üîß –ï—Å–ª–∏ endpoint –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω—É–∂–µ–Ω –¥–µ–ø–ª–æ–π):

```bash
cd /Users/mac/Desktop/rork-kiku/backend
bunx vercel --prod
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
curl "https://backend-three-mauve-67.vercel.app/api/trpc/test.dbCheck"
```

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Vercel:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ DATABASE_URL
bunx vercel env ls

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# name               value               environments        created    
# DATABASE_URL       Encrypted           Production         1h ago
```

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ (–≤—Å–µ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ):

```bash
curl "https://backend-three-mauve-67.vercel.app/api/trpc/test.dbCheck" | jq .
```

–ò–ª–∏ –±–µ–∑ jq:
```bash
curl "https://backend-three-mauve-67.vercel.app/api/trpc/test.dbCheck"
```

---

**–í–∞–∂–Ω–æ:** –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `.env.local` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ Vercel –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π endpoint –Ω–∞ Vercel.
