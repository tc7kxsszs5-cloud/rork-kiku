# üöÄ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: –æ—Ç v1 –∫ v2 –±–µ–∑ –ø–æ—Ç–µ—Ä—å

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–†–∏—Å–∫:** v1 –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –¥–æ–ª–≥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–¥—ë—Ç—Å—è "–≤—ã–±—Ä–æ—Å–∏—Ç—å" –∏–∑-–∑–∞:
- –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

---

## üìã –ü—Ä–∏–Ω—Ü–∏–ø—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### 1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- v2 –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ v1
- v1 –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ v2 (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

### 2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö**
- –í–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö (Data Version)
- –í–µ—Ä—Å–∏—è API (API Version)
- –í–µ—Ä—Å–∏—è —Å—Ö–µ–º (Schema Version)
- –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (App Version)

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–∫–∞—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### 4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Ä–æ–≤–µ–Ω—å 1: –í–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö (Data Version)

```typescript
// constants/dataVersion.ts
export const CURRENT_DATA_VERSION = 2;
export const SUPPORTED_VERSIONS = [1, 2];

export interface VersionedData {
  version: number;
  data: any;
  migratedAt?: number;
  migratedFrom?: number;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
const versionedData: VersionedData = {
  version: CURRENT_DATA_VERSION,
  data: actualData,
  migratedAt: Date.now(),
};

// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö
const { version, data } = await loadVersionedData();
if (version < CURRENT_DATA_VERSION) {
  data = await migrateData(data, version, CURRENT_DATA_VERSION);
}
```

---

### –£—Ä–æ–≤–µ–Ω—å 2: –í–µ—Ä—Å–∏—è —Å—Ö–µ–º (Schema Version)

```typescript
// constants/schemas/v1.ts
export interface MessageV1 {
  id: string;
  text: string;
  timestamp: number;
  riskLevel: RiskLevel;
}

// constants/schemas/v2.ts
export interface MessageV2 {
  id: string;
  text: string;
  timestamp: number;
  riskLevel: RiskLevel;
  // –ù–æ–≤—ã–µ –ø–æ–ª—è
  metadata?: {
    source: 'sms' | 'whatsapp' | 'telegram';
    editedAt?: number;
    reactions?: string[];
  };
  version: 2; // –í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã
}
```

---

### –£—Ä–æ–≤–µ–Ω—å 3: –í–µ—Ä—Å–∏—è API (API Version)

```typescript
// backend/trpc/routers/v1/messages.ts
export const messagesRouterV1 = router({
  getMessages: publicProcedure
    .input(z.object({ chatId: z.string() }))
    .query(async ({ input }) => {
      // v1 –ª–æ–≥–∏–∫–∞
    }),
});

// backend/trpc/routers/v2/messages.ts
export const messagesRouterV2 = router({
  getMessages: publicProcedure
    .input(z.object({ 
      chatId: z.string(),
      includeMetadata: z.boolean().optional(), // –ù–æ–≤–æ–µ –ø–æ–ª–µ
    }))
    .query(async ({ input }) => {
      // v2 –ª–æ–≥–∏–∫–∞
    }),
});

// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π
export const appRouter = router({
  v1: messagesRouterV1,
  v2: messagesRouterV2,
});
```

---

## üîÑ –°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–π

```typescript
// utils/migrations/types.ts
export interface Migration {
  fromVersion: number;
  toVersion: number;
  name: string;
  migrate: (data: any) => Promise<any>;
  rollback?: (data: any) => Promise<any>;
}
```

### –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

```typescript
// utils/migrations/v1-to-v2.ts
export const migrationV1ToV2: Migration = {
  fromVersion: 1,
  toVersion: 2,
  name: 'Add metadata to messages',
  
  async migrate(data: any) {
    // –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    if (data.messages) {
      data.messages = data.messages.map((msg: MessageV1) => ({
        ...msg,
        metadata: {
          source: 'sms', // –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        },
        version: 2,
      }));
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
    data.version = 2;
    data.migratedAt = Date.now();
    data.migratedFrom = 1;
    
    return data;
  },
  
  async rollback(data: any) {
    // –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
    if (data.messages) {
      data.messages = data.messages.map((msg: MessageV2) => {
        const { metadata, version, ...rest } = msg;
        return rest;
      });
    }
    
    data.version = 1;
    return data;
  },
};
```

### –ú–µ–Ω–µ–¥–∂–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–π

```typescript
// utils/migrations/migrationManager.ts
export class MigrationManager {
  private migrations: Migration[] = [];
  
  register(migration: Migration) {
    this.migrations.push(migration);
  }
  
  async migrate(data: any, fromVersion: number, toVersion: number) {
    let currentData = data;
    let currentVersion = fromVersion;
    
    while (currentVersion < toVersion) {
      const migration = this.migrations.find(
        m => m.fromVersion === currentVersion && m.toVersion === currentVersion + 1
      );
      
      if (!migration) {
        throw new Error(`No migration found from ${currentVersion} to ${currentVersion + 1}`);
      }
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
      await this.saveBackup(currentData, currentVersion);
      
      // –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é
      currentData = await migration.migrate(currentData);
      currentVersion = migration.toVersion;
      
      console.log(`Migrated from ${migration.fromVersion} to ${migration.toVersion}`);
    }
    
    return currentData;
  }
  
  private async saveBackup(data: any, version: number) {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞
    await AsyncStorage.setItem(
      `@backup_v${version}_${Date.now()}`,
      JSON.stringify(data)
    );
  }
}
```

---

## üìä –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö

### AnalyticsContext —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```typescript
// constants/AnalyticsContext.tsx
const ANALYTICS_STORAGE_KEY = '@kiku_analytics';
const ANALYTICS_VERSION_KEY = '@kiku_analytics_version';
const CURRENT_ANALYTICS_VERSION = 2;

export const [AnalyticsProvider, useAnalytics] = createContextHook(() => {
  const [events, setEvents] = useState<AnalyticsEventData[]>([]);
  const migrationManager = useMemo(() => new MigrationManager(), []);
  
  useEffect(() => {
    const loadData = async () => {
      try {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
        const data = await AsyncStorage.getItem(ANALYTICS_STORAGE_KEY);
        const version = await AsyncStorage.getItem(ANALYTICS_VERSION_KEY);
        
        if (!data) return;
        
        let parsedData = JSON.parse(data);
        const currentVersion = version ? parseInt(version, 10) : 1;
        
        // –ú–∏–≥—Ä–∏—Ä—É–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (currentVersion < CURRENT_ANALYTICS_VERSION) {
          parsedData = await migrationManager.migrate(
            parsedData,
            currentVersion,
            CURRENT_ANALYTICS_VERSION
          );
          
          // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          await AsyncStorage.setItem(ANALYTICS_STORAGE_KEY, JSON.stringify(parsedData));
          await AsyncStorage.setItem(ANALYTICS_VERSION_KEY, String(CURRENT_ANALYTICS_VERSION));
        }
        
        setEvents(parsedData.events || []);
      } catch (error) {
        console.error('[AnalyticsContext] Migration error:', error);
      }
    };
    
    loadData();
  }, []);
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
});
```

---

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
// utils/versioning.ts
export const APP_DATA_VERSION = 2;
export const API_VERSION = 2;

export interface VersionInfo {
  appVersion: string; // "1.0.0"
  dataVersion: number; // 2
  apiVersion: number; // 2
  schemaVersion: number; // 2
}

export function getVersionInfo(): VersionInfo {
  return {
    appVersion: require('../package.json').version,
    dataVersion: APP_DATA_VERSION,
    apiVersion: API_VERSION,
    schemaVersion: APP_DATA_VERSION,
  };
}
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```typescript
// utils/migrations/analytics/v1-to-v2.ts
export const analyticsV1ToV2: Migration = {
  fromVersion: 1,
  toVersion: 2,
  name: 'Add session tracking to analytics',
  
  async migrate(data: any) {
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –ø–æ–ª—è –∫ —Å–æ–±—ã—Ç–∏—è–º
    if (data.events) {
      data.events = data.events.map((event: any) => ({
        ...event,
        sessionId: event.sessionId || generateSessionId(),
        deviceId: event.deviceId || getDeviceId(),
      }));
    }
    
    data.version = 2;
    return data;
  },
};
```

### –®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

```typescript
// constants/MonitoringContext.tsx
const MESSAGES_STORAGE_KEY = '@kiku_messages';
const MESSAGES_VERSION_KEY = '@kiku_messages_version';
const CURRENT_MESSAGES_VERSION = 2;

export const [MonitoringProvider, useMonitoring] = createContextHook(() => {
  const [chats, setChats] = useState<Chat[]>([]);
  const migrationManager = useMemo(() => new MigrationManager(), []);
  
  useEffect(() => {
    const loadData = async () => {
      try {
        const data = await AsyncStorage.getItem(MESSAGES_STORAGE_KEY);
        const version = await AsyncStorage.getItem(MESSAGES_VERSION_KEY);
        
        if (!data) return;
        
        let parsedData = JSON.parse(data);
        const currentVersion = version ? parseInt(version, 10) : 1;
        
        // –ú–∏–≥—Ä–∞—Ü–∏—è
        if (currentVersion < CURRENT_MESSAGES_VERSION) {
          parsedData = await migrationManager.migrate(
            parsedData,
            currentVersion,
            CURRENT_MESSAGES_VERSION
          );
          
          await AsyncStorage.setItem(MESSAGES_STORAGE_KEY, JSON.stringify(parsedData));
          await AsyncStorage.setItem(MESSAGES_VERSION_KEY, String(CURRENT_MESSAGES_VERSION));
        }
        
        setChats(parsedData.chats || []);
      } catch (error) {
        console.error('[MonitoringContext] Migration error:', error);
      }
    };
    
    loadData();
  }, []);
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
});
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–Ω–µ–¥–µ–ª—è 1)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã v1 –∏ v2

### –§–∞–∑–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–µ–¥–µ–ª—è 2)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è AnalyticsContext
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è MonitoringContext
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è UserContext
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è ParentalControlsContext

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–Ω–µ–¥–µ–ª—è 3)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

### –§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–¥–µ–ª—è 4)
- [ ] –¢–µ—Å—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –¢–µ—Å—Ç—ã –æ—Ç–∫–∞—Ç–∞
- [ ] –¢–µ—Å—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- [ ] Production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### 1. **–ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ v1 –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –≤ v2
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –¥–ª—è –æ—Ç–∫–∞—Ç–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### 2. **–ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞

### 3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å v3, v4, v5
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞

### 4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
// –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const versionInfo = getVersionInfo();
console.log('Current version:', versionInfo);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
const migrationManager = new MigrationManager();
migrationManager.register(analyticsV1ToV2);
migrationManager.register(messagesV1ToV2);

// –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
const migratedData = await migrationManager.migrate(
  oldData,
  1, // from version
  2  // to version
);
```

---

## üìù –ò—Ç–æ–≥

**–° —ç—Ç–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π:**
- ‚úÖ v1 –Ω–µ —Å—Ç–∞–Ω–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –¥–æ–ª–≥–æ–º
- ‚úÖ –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ v2
- ‚úÖ –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –Ω–∞ –±—É–¥—É—â–µ–µ

**v1 –Ω–µ –Ω—É–∂–Ω–æ "–≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å" - –æ–Ω –ø–ª–∞–≤–Ω–æ –º–∏–≥—Ä–∏—Ä—É–µ—Ç –≤ v2!** üöÄ
