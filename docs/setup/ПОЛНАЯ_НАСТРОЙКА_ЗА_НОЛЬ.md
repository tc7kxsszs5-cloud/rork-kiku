# Полная настройка проекта KIKU с нуля (один чеклист)

Всё, что нужно сделать по порядку, чтобы запустить проект на iOS (симулятор или Xcode). Выполняйте по шагам — если шаг уже сделан, переходите к следующему.

---

## 1. Xcode

- [ ] **Xcode** установлен в `/Applications/Xcode.app` (если был в Загрузках — перенесите в Программы).
- [ ] Версия **15.2 или новее** (для старых macOS см. `docs/troubleshooting/XCODE_СТАРЫЙ_МАК.md`).
- [ ] В терминале выполнить:
  ```bash
  sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
  sudo xcodebuild -license accept
  ```
- [ ] **Проверить, что шаг пройден:** в терминале `xcodebuild -version` — должна быть 15.2 или выше. Если версия выводится — шаг 1 готов.

---

## 2. Зависимости проекта (Node/Bun)

В **корне проекта** (`/Users/mac/Desktop/rork-kiku`):

```bash
cd /Users/mac/Desktop/rork-kiku
bun install
```

Дождаться окончания без ошибок.

**Проверить, что шаг пройден:** есть папка `node_modules` в корне проекта и нет ошибок при запуске `bun run start` (можно сразу прервать Ctrl+C). Если `bun install` уже делали и папка есть — шаг 2 готов.

---

## 3. CocoaPods (для iOS-сборки)

- [ ] **CocoaPods** установлен. **Проверка:** в терминале `pod --version` — выводится версия (например 1.15.2) и **нет** ошибки про Ruby 2.6. Если версия есть и ошибок нет — CocoaPods готов.
- [ ] Если команды `pod` нет или при запуске ошибка Ruby 2.6:
  - Установить Ruby 3: `brew install ruby`, затем добавить в PATH и `gem install cocoapods` (см. `docs/troubleshooting/COCOAPODS_УСТАНОВКА.md`).
- [ ] Установить поды в проекте:
  ```bash
  cd /Users/mac/Desktop/rork-kiku/ios
  pod install
  cd ..
  ```
  Дождаться сообщения «Pod installation complete».

**Проверить, что поды установлены:** есть папка `ios/Pods` и файл `ios/Podfile.lock`. Если оба есть — шаг 3 готов.

---

## 4. Запуск приложения

**Вариант А — через Xcode (нативная сборка)**

1. Запустить Metro в отдельном терминале:
   ```bash
   cd /Users/mac/Desktop/rork-kiku
   bun run start
   ```
   Дождаться «Metro waiting on...» или QR-код.
2. Открыть проект в Xcode:
   ```bash
   open /Users/mac/Desktop/rork-kiku/ios/KIKU.xcworkspace
   ```
   Не открывайте `.xcodeproj` — только **KIKU.xcworkspace**.
3. В Xcode выбрать схему **KIKU**, устройство — симулятор (например iPhone 15), нажать **Run** (⌘R).

**Вариант Б — из терминала (одной командой)**

Если раньше была ошибка «Unable to install CocoaPods via Homebrew», запускать так (PATH с pod):

```bash
cd /Users/mac/Desktop/rork-kiku
export PATH="$(dirname $(which pod)):$PATH"
bun run ios
```

Или просто (если `pod` уже в PATH):

```bash
cd /Users/mac/Desktop/rork-kiku
bun run ios
```

**Вариант В — без нативной сборки (только Metro + симулятор)**

```bash
cd /Users/mac/Desktop/rork-kiku
bun run start
```

Когда появится меню — нажать **`i`** для iOS. Симулятор должен быть установлен (Xcode). CocoaPods для этого варианта не нужен.

---

## 5. Если что-то не работает

| Проблема | Куда смотреть |
|----------|----------------|
| Xcode не найден / старая версия | `docs/troubleshooting/XCODE_NOT_FOUND.md`, `XCODE_СТАРЫЙ_МАК.md` |
| CocoaPods / Homebrew ошибка | `docs/troubleshooting/COCOAPODS_УСТАНОВКА.md` |
| Симулятор открылся, приложение не грузится | Сначала запустить Metro (`bun run start`), потом Run в Xcode |
| Другие ошибки Xcode/iOS | `docs/troubleshooting/XCODE_КРИТИЧЕСКИЕ_ОШИБКИ.md` |

---

## Краткий порядок команд (копировать по шагам)

```bash
# 1. Xcode (один раз после установки)
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
sudo xcodebuild -license accept

# 2. Корень проекта и зависимости
cd /Users/mac/Desktop/rork-kiku
bun install

# 3. CocoaPods (если ещё не ставили: sudo gem install cocoapods или gem install cocoapods после brew install ruby)
cd ios
pod install
cd ..

# 4. Запуск (с PATH для pod, если была ошибка Homebrew)
export PATH="$(dirname $(which pod)):$PATH"
bun run ios
```

Если шаги 1–3 уже сделаны — достаточно шага 4 из корня проекта.

---

## Как понять, какой шаг прошёл, какой нет

Выполняйте в терминале по одной команде. Если в столбце «Результат» так и есть — шаг уже сделан, переходите к следующему.

| Шаг | Команда проверки | Результат = шаг пройден |
|-----|------------------|-------------------------|
| 1. Xcode | `xcodebuild -version` | Выводится строка с Xcode 15.2 (или новее), без ошибки |
| 2. Зависимости (bun) | `ls /Users/mac/Desktop/rork-kiku/node_modules 2>/dev/null | head -1` | Выводится первое имя папки (значит node_modules есть) |
| 3a. CocoaPods установлен | `pod --version` | Выводится номер версии (например 1.15.2), **без** ошибки про Ruby |
| 3b. Поды в проекте | `ls /Users/mac/Desktop/rork-kiku/ios/Pods /Users/mac/Desktop/rork-kiku/ios/Podfile.lock 2>/dev/null` | Выводятся пути к папке Pods и файлу Podfile.lock |
| 4. Запуск | — | После `bun run ios` открывается симулятор и приложение |

**Кратко:**
- Шаг 1 готов → есть `xcodebuild -version` с 15.2+
- Шаг 2 готов → есть папка `rork-kiku/node_modules`
- Шаг 3 готов → `pod --version` работает и есть `ios/Pods` и `ios/Podfile.lock`
- Дальше только шаг 4 — запуск.

---

## Одна команда для запуска

Когда Xcode настроен, `bun install` и `pod install` уже делали — можно запускать **одной строкой**:

```bash
cd /Users/mac/Desktop/rork-kiku && export PATH="$(dirname $(which pod)):$PATH" && bun run ios
```

Если нужно перед запуском ещё раз выполнить `pod install` (например, после обновления зависимостей):

```bash
cd /Users/mac/Desktop/rork-kiku && export PATH="$(dirname $(which pod)):$PATH" && (cd ios && pod install) && bun run ios
```
