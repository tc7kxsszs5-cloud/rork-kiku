# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ø–ª–æ—è - –®–∞–≥ –∑–∞ —à–∞–≥–æ–º

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

- ‚úÖ `backend/index.ts` - entry point
- ‚úÖ `backend/vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
- ‚úÖ `backend/package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `backend/hono.ts` - Hono app
- ‚úÖ –í—Å–µ tRPC routes –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üìã –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å Connection String –∏–∑ Supabase

### –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ Supabase:

1. **–ò–¥–∏—Ç–µ –≤ Settings ‚Üí Database**
2. **–ù–∞–π–¥–∏—Ç–µ "Connection string"**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "URI"** (–Ω–µ Pooling)
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ connection string**

–í—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```
postgresql://postgres:[YOUR-PASSWORD]@db.xxxxx.supabase.co:5432/postgres
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `[YOUR-PASSWORD]` –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞!

5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ connection string** - –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Vercel

---

## üìã –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ Vercel

### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
npm install -g vercel
```

### 2.2. –í–æ–π–¥–∏—Ç–µ –≤ Vercel

```bash
vercel login
```

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### 2.3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend

```bash
cd backend
```

### 2.4. –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

```bash
vercel
```

**–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:**
- Set up and deploy? ‚Üí **Y**
- Which scope? ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç
- Link to existing project? ‚Üí **N**
- Project name? ‚Üí **kiku-backend** (–∏–ª–∏ –ª—é–±–æ–µ –∏–º—è)
- Directory? ‚Üí **./**
- Override settings? ‚Üí **N**

### 2.5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Environment Variables

1. **–ò–¥–∏—Ç–µ –Ω–∞ [vercel.com/dashboard](https://vercel.com/dashboard)**
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `kiku-backend`**
3. **Settings ‚Üí Environment Variables**
4. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

   ```
   Key: DATABASE_URL
   Value: –≤–∞—à_connection_string_–∏–∑_supabase
   ```

   ```
   Key: NODE_ENV
   Value: production
   ```

5. **–ù–∞–∂–º–∏—Ç–µ "Save"**

### 2.6. Production –¥–µ–ø–ª–æ–π

```bash
vercel --prod
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ URL —Ç–∏–ø–∞:
```
https://kiku-backend.vercel.app
```

---

## üìã –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å Frontend

### 3.1. –û–±–Ω–æ–≤–∏—Ç–µ API URL

–û—Ç–∫—Ä–æ–π—Ç–µ `lib/trpc.ts` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:

```typescript
// –ë—ã–ª–æ:
const PROJECT_BASE_URL = 'https://d8v7u672uumlfpscvnbps.rork.live';

// –°—Ç–∞–ª–æ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à Vercel URL):
const PROJECT_BASE_URL = 'https://kiku-backend.vercel.app';
```

### 3.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
bun run start:simple
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Backend API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-backend.vercel.app/
```

**–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è:**
```json
{
  "status": "ok",
  "message": "API is running"
}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ tRPC endpoint

–û—Ç–∫—Ä–æ–π—Ç–µ:
```
https://your-backend.vercel.app/api/trpc/example.hi
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—Ç–≤–µ—Ç –æ—Ç tRPC.**

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞: "Cannot find module"

```bash
cd backend
bun install
vercel --prod
```

### –û—à–∏–±–∫–∞: "Database connection failed"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ Vercel
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Supabase –ø—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω

### –û—à–∏–±–∫–∞: "CORS error"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ `backend/hono.ts`
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ allowed origins

---

## üìù –ß–µ–∫–ª–∏—Å—Ç

- [ ] –ü–æ–ª—É—á–µ–Ω Connection String –∏–∑ Supabase
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Vercel CLI
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω `vercel login`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω `vercel` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ backend
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Environment Variables –≤ Vercel
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω `vercel --prod`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω API URL –≤ `lib/trpc.ts`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ API

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à backend –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Vercel, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Supabase!

**URL –≤–∞—à–µ–≥–æ API:** `https://kiku-backend.vercel.app`

---

**–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –®–∞–≥–∞ 1 - –ø–æ–ª—É—á–∏—Ç–µ Connection String –∏–∑ Supabase! üöÄ**
