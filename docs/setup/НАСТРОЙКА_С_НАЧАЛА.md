# üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üìã –®–ê–ì 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase (–°–ù–ê–ß–ê–õ–ê!)

### 1.1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Supabase

1. –ò–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
2. –í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name:** `kiku-backend` (–∏–ª–∏ –ª—é–±–æ–µ –∏–º—è)
   - **Database Password:** –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (–°–û–•–†–ê–ù–ò–¢–ï –ï–ì–û!)
   - **Region:** –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `West US` –∏–ª–∏ `Europe West`)
5. –ù–∞–∂–º–∏—Ç–µ **"Create new project"**
6. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è

### 1.2. –ü–æ–ª—É—á–∏—Ç–µ Connection String

1. –í –ø—Ä–æ–µ–∫—Ç–µ Supabase –∏–¥–∏—Ç–µ –≤ **Settings** (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ —Å–ª–µ–≤–∞)
2. –í—ã–±–µ—Ä–∏—Ç–µ **Database**
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Å–µ–∫—Ü–∏–∏ **"Connection string"**
4. **–í–ê–ñ–ù–û:** –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Session mode"** (–ù–ï "URI"!)
   - –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Session Pooler, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ IPv4
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "Use Session Pooler if on a IPv4 network" - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Session mode
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ connection string

–í—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```
postgresql://postgres.xxxxx:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:6543/postgres
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `[YOUR-PASSWORD]` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑ —à–∞–≥–∞ 1.1!

**–ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ connection string (Session mode):**
```
postgresql://postgres.abcdefgh:mySecurePassword123@aws-0-us-west-1.pooler.supabase.com:6543/postgres
```

**–û—Ç–ª–∏—á–∏—è Session mode:**
- –ü–æ—Ä—Ç: **6543** (–Ω–µ 5432)
- –•–æ—Å—Ç: **pooler.supabase.com** (–Ω–µ db.xxxxx.supabase.co)
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ IPv6, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç IPv4

6. **–°–û–•–†–ê–ù–ò–¢–ï —ç—Ç–æ—Ç connection string** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Vercel!

---

## üìã –®–ê–ì 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Vercel CLI

```bash
npm install -g vercel
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
vercel --version
```

---

## üìã –®–ê–ì 3: –í—Ö–æ–¥ –≤ Vercel

```bash
vercel login
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä - –≤–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Vercel (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π).

---

## üìã –®–ê–ì 4: –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
cd backend
vercel
```

**–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:**
- Set up and deploy "~/Desktop/rork-kiku/backend"? ‚Üí **Y**
- Which scope? ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç
- Link to existing project? ‚Üí **N**
- What's your project's name? ‚Üí **kiku-backend**
- In which directory is your code located? ‚Üí **./**

–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è.

---

## üìã –®–ê–ì 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Environment Variables –≤ Vercel

1. –ò–¥–∏—Ç–µ –Ω–∞ [vercel.com/dashboard](https://vercel.com/dashboard)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **kiku-backend** –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** (—Å–ª–µ–≤–∞ –≤ –º–µ–Ω—é)
4. –í—ã–±–µ—Ä–∏—Ç–µ **Environment Variables**
5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1:**
   - **Key:** `DATABASE_URL`
   - **Value:** –≤–∞—à connection string –∏–∑ –®–∞–≥–∞ 1.2
   - **Environment:** –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ (Production, Preview, Development)
   - –ù–∞–∂–º–∏—Ç–µ **Save**

   **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2:**
   - **Key:** `NODE_ENV`
   - **Value:** `production`
   - **Environment:** –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ
   - –ù–∞–∂–º–∏—Ç–µ **Save**

6. **–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å!

---

## üìã –®–ê–ì 6: Production –¥–µ–ø–ª–æ–π

```bash
cd backend
vercel --prod
```

–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

---

## üìã –®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Vercel –ø–æ–∫–∞–∂–µ—Ç URL —Ç–∏–ø–∞:
   ```
   https://kiku-backend.vercel.app
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

3. –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è:
   ```json
   {
     "status": "ok",
     "message": "API is running"
   }
   ```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ tRPC endpoint:
   ```
   https://kiku-backend.vercel.app/api/trpc/example.hi
   ```

---

## üìã –®–ê–ì 8: –û–±–Ω–æ–≤–∏—Ç—å Frontend

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `lib/trpc.ts` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:

```typescript
// –ë—ã–ª–æ:
const PROJECT_BASE_URL = 'https://d8v7u672uumlfpscvnbps.rork.live';

// –°—Ç–∞–ª–æ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à URL –∏–∑ Vercel):
const PROJECT_BASE_URL = 'https://kiku-backend.vercel.app';
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ Supabase
- [ ] –ü–æ–ª—É—á–µ–Ω Connection String (—Å –∑–∞–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è!)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Vercel CLI
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ –≤ Vercel (`vercel login`)
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω –ø–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π (`vercel`)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Environment Variables –≤ Vercel Dashboard
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω production –¥–µ–ø–ª–æ–π (`vercel --prod`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ API
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω URL –≤ `lib/trpc.ts`

---

## üéØ –ù–∞—á–Ω–∏—Ç–µ —Å –®–∞–≥–∞ 1 - —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Supabase!
