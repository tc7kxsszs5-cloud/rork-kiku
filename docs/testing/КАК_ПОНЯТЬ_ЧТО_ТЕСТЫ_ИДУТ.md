# 🎯 Как понять, что тесты идут (визуальные признаки)

## 📊 В Playwright UI режиме

### ✅ Тесты ИДУТ, если вы видите:

#### 1. **Список тестов с индикаторами**

```
┌─────────────────────────────────────────┐
│  Playwright Test UI                      │
├─────────────────────────────────────────┤
│  📋 Tests                                │
│  ├─ example.spec.ts                      │
│  │  ├─ ✓ должна загрузиться... [2.3s]   │ ← ЗЕЛЕНАЯ галочка = прошел
│  │  ├─ → должна отображаться... [1.2s]  │ ← СТРЕЛКА = выполняется СЕЙЧАС
│  │  └─ ⏳ должна работать тема...       │ ← ЧАСЫ = ждет очереди
│  └─ ...                                  │
└─────────────────────────────────────────┘
```

**Признаки:**
- ✅ **→** (стрелка) = тест выполняется **прямо сейчас**
- ✅ **⏳** (часы) = тест **ждет** своей очереди
- ✅ **✓** (галочка) = тест **прошел**
- ✅ **✗** (крестик) = тест **упал**

---

#### 2. **Прогресс-бар вверху**

```
┌─────────────────────────────────────────┐
│  [████████░░░░░░░░] 40% (2/5 tests)    │ ← Прогресс выполнения
└─────────────────────────────────────────┘
```

**Признаки:**
- ✅ Полоса заполняется
- ✅ Число меняется: `(2/5 tests)` → `(3/5 tests)`
- ✅ Процент растет: `40%` → `60%`

---

#### 3. **Время выполнения**

```
✓ должна загрузиться... [2.3s]  ← Время увеличивается: 0.5s → 1.2s → 2.3s
```

**Признаки:**
- ✅ Время в квадратных скобках **увеличивается**
- ✅ `[0.5s]` → `[1.2s]` → `[2.3s]` = тест выполняется

---

#### 4. **Окно браузера (если включен headed режим)**

Если тест выполняется, вы увидите:
- ✅ Окно браузера открывается
- ✅ Страница загружается
- ✅ Элементы кликаются
- ✅ Текст вводится

---

#### 5. **Логи в консоли**

Внизу UI вы увидите:
```
[chromium] › example.spec.ts:14:5 › должна загрузиться...
  → page.goto('http://localhost:8082/')
  → page.waitForLoadState('networkidle')
  ✓ passed (2.3s)
```

**Признаки:**
- ✅ Видны действия: `page.goto()`, `page.click()`
- ✅ Видны шаги выполнения
- ✅ Время обновляется

---

## ❌ Тесты НЕ идут, если вы видите:

### 1. **"UI Mode disconnected"**

```
┌─────────────────────────────────────────┐
│  ⚠️ UI Mode disconnected                │
│  Waiting for connection...              │
└─────────────────────────────────────────┘
```

**Что делать:**
- Запустите приложение: `bun run start:web`
- Освободите порт: `bun run test:playwright:fix`

---

### 2. **Все тесты серые/неактивные**

```
┌─────────────────────────────────────────┐
│  📋 Tests                               │
│  ├─ example.spec.ts                     │
│  │  ├─ должна загрузиться...           │ ← СЕРЫЙ, нет индикатора
│  │  ├─ должна отображаться...          │ ← СЕРЫЙ, нет индикатора
│  │  └─ должна работать тема...        │ ← СЕРЫЙ, нет индикатора
└─────────────────────────────────────────┘
```

**Что делать:**
- Нажмите кнопку **"Run all tests"** или **▶️**
- Проверьте, что приложение запущено

---

### 3. **Ошибка "Web server is not ready"**

```
Error: Timed out waiting for http://localhost:8082
Web server is not ready
```

**Что делать:**
- Запустите приложение: `bun run start:web`
- Подождите, пока оно запустится
- Проверьте порт: `lsof -i:8082`

---

### 4. **Тесты застряли на одном месте**

```
→ должна загрузиться... [45.2s]  ← Время большое, но не меняется
```

**Что делать:**
- Тест завис, возможно таймаут
- Проверьте, что приложение отвечает
- Попробуйте остановить и перезапустить

---

## 🎯 Быстрая проверка: Тесты идут?

### Чеклист:

- [ ] В списке тестов есть **→** (стрелка) или **⏳** (часы)?
- [ ] Прогресс-бар **движется**?
- [ ] Время выполнения **увеличивается**?
- [ ] В логах видны **действия** (page.goto, page.click)?
- [ ] Нет сообщения **"disconnected"**?

**Если хотя бы один пункт ✅ - тесты идут!**

---

## 📊 Примеры состояний

### ✅ Тесты ИДУТ:

```
Status: Running
[████████░░░░░░] 66% (4/6 tests)

📋 Tests
├─ example.spec.ts
│  ├─ ✓ должна загрузиться... [2.3s]      ← Прошел
│  ├─ → должна отображаться... [1.2s]   ← Выполняется СЕЙЧАС
│  └─ ⏳ должна работать тема...        ← Ждет очереди
```

---

### ❌ Тесты НЕ идут:

```
Status: Disconnected
[░░░░░░░░░░░░░░] 0% (0/6 tests)

📋 Tests
├─ example.spec.ts
│  ├─ должна загрузиться...              ← Нет индикатора
│  ├─ должна отображаться...             ← Нет индикатора
│  └─ должна работать тема...           ← Нет индикатора
```

---

## 🔍 Как проверить в терминале

Если вы запустили тесты через терминал (не UI):

```bash
bun run test:playwright
```

**Тесты ИДУТ, если вы видите:**

```
Running 5 tests using 5 workers

  → [chromium] › example.spec.ts:14:5 › должна загрузиться... (выполняется)
  ✓ [firefox] › example.spec.ts:14:5 › должна загрузиться... (2.5s)
  ⏳ [webkit] › example.spec.ts:14:5 › должна загрузиться... (ждет)
```

**Признаки:**
- ✅ Видны названия тестов
- ✅ Видны браузеры: `[chromium]`, `[firefox]`
- ✅ Видны галочки ✓ или стрелки →
- ✅ Время обновляется

---

## 💡 Самый простой способ проверить

### В UI режиме:

1. **Откройте Playwright UI:**
   ```bash
   bun run test:playwright:ui
   ```

2. **Посмотрите на список тестов:**
   - Если видите **→** (стрелку) = тест выполняется **сейчас**
   - Если видите **⏳** (часы) = тест **ждет**
   - Если видите **✓** (галочку) = тест **прошел**

3. **Посмотрите на прогресс-бар:**
   - Если полоса **движется** = тесты идут
   - Если полоса **стоит** = тесты не идут

---

## 🚨 Что делать, если тесты не идут?

### Шаг 1: Проверить подключение

В UI должно быть написано:
- ✅ `Connected` или `Running` = хорошо
- ❌ `Disconnected` = проблема

### Шаг 2: Запустить приложение

```bash
# В отдельном терминале
bun run start:web
```

Дождитесь сообщения:
```
Web is waiting on http://localhost:8082
```

### Шаг 3: Перезапустить тесты

В UI нажмите кнопку **"Run all tests"** или **▶️**

---

## ✅ Итоговая таблица

| Признак | Тесты идут? |
|---------|-------------|
| → (стрелка) в списке | ✅ **ДА** |
| ⏳ (часы) в списке | ✅ **ДА** (ждет очереди) |
| ✓ (галочка) | ✅ **ДА** (уже прошел) |
| Прогресс-бар движется | ✅ **ДА** |
| Время увеличивается | ✅ **ДА** |
| Видны действия в логах | ✅ **ДА** |
| "Disconnected" | ❌ **НЕТ** |
| Все серое, нет индикаторов | ❌ **НЕТ** |
| Время не меняется долго | ❌ **НЕТ** (завис) |

---

## 🎯 Главное правило

**Если видите → (стрелку) или ⏳ (часы) - тесты идут!**

**Если все серое и нет индикаторов - нажмите "Run all tests" ▶️**
