# üîí –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** $(date)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã:

### 1. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–°—Ç—Ä–æ–≥–∏–µ Zod —Å—Ö–µ–º—ã** –¥–ª—è –≤—Å–µ—Ö endpoints
- **Sanitization** –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–õ–∏–º–∏—Ç—ã –Ω–∞ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤** (email, phone, deviceId)

**–§–∞–π–ª—ã:**
- `backend/utils/validationSchemas.ts` ‚úÖ
- `backend/utils/security.ts` ‚úÖ

### 2. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL Injection
- **Supabase SDK** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è sanitization**

### 3. ‚úÖ Rate Limiting
- **Middleware** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–æ** –∫–æ –≤—Å–µ–º sync routes
- **–õ–∏–º–∏—Ç—ã:** 10-100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–§–∞–π–ª—ã:**
- `backend/trpc/middleware/rateLimit.ts` ‚úÖ
- –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤: `sync/chats.ts`, `sync/alerts.ts`, `sync/settings.ts` ‚úÖ

### 4. ‚úÖ CORS –∑–∞—â–∏—Ç–∞
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ origins**
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ headers**
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ credentials**

**–§–∞–π–ª—ã:**
- `backend/index.ts` ‚úÖ

### 5. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
- **Sanitization —Å—Ç—Ä–æ–∫**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**
- **–£–¥–∞–ª–µ–Ω–∏–µ HTML/JavaScript**

**–§–∞–π–ª—ã:**
- `backend/utils/security.ts` ‚úÖ

### 6. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é**
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

**–§–∞–π–ª—ã:**
- `backend/index.ts` ‚úÖ
- `backend/trpc/create-context.ts` ‚úÖ

### 7. ‚úÖ Row Level Security
- **SQL –ø–æ–ª–∏—Ç–∏–∫–∏** —Å–æ–∑–¥–∞–Ω—ã
- **–ì–æ—Ç–æ–≤—ã –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é** –≤ Supabase

**–§–∞–π–ª—ã:**
- `backend/security-policies.sql` ‚úÖ

### 8. ‚úÖ –õ–∏–º–∏—Ç—ã –Ω–∞ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- **1000 —á–∞—Ç–æ–≤/–∞–ª–µ—Ä—Ç–æ–≤** –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- **10KB** –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **10 email/phone** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. ‚ö†Ô∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å Row Level Security

**–ö–†–ò–¢–ò–ß–ù–û:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –ø–æ–ª–∏—Ç–∏–∫–∏!

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard
2. SQL Editor
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `backend/security-policies.sql`
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL (Run)

### 2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π backend

```bash
cd backend
bunx vercel --prod
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```bash
cd backend
bun test-settings.ts
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫:

| –ê—Ç–∞–∫–∞ | –ó–∞—â–∏—Ç–∞ | –°—Ç–∞—Ç—É—Å |
|-------|--------|--------|
| SQL Injection | Supabase SDK + Sanitization | ‚úÖ |
| XSS | Sanitization + –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ | ‚úÖ |
| CSRF | CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | ‚úÖ |
| DDoS | Rate Limiting | ‚úÖ |
| Data Injection | –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è Zod | ‚úÖ |
| Unauthorized Access | Row Level Security | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è |

---

## üìä –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã:

- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** ‚úÖ –í—ã—Å–æ–∫–∏–π
- **Rate Limiting:** ‚úÖ –°—Ä–µ–¥–Ω–∏–π-–í—ã—Å–æ–∫–∏–π
- **CORS:** ‚úÖ –°—Ä–µ–¥–Ω–∏–π
- **XSS:** ‚úÖ –°—Ä–µ–¥–Ω–∏–π-–í—ã—Å–æ–∫–∏–π
- **–û—à–∏–±–∫–∏:** ‚úÖ –í—ã—Å–æ–∫–∏–π
- **RLS:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL

---

## üöÄ –ü—Ä–æ–µ–∫—Ç –∑–∞—â–∏—â–µ–Ω!

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è RLS –ø–æ–ª–∏—Ç–∏–∫ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∑–∞—â–∏—â–µ–Ω.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å `security-policies.sql` –≤ Supabase!
