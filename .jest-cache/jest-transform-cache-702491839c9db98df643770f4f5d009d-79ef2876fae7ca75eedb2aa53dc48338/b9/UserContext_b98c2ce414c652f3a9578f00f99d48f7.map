{"version":3,"names":["createContextHook","useState","useEffect","useCallback","useMemo","AsyncStorage","Platform","i18n","logger","handleErrorSilently","showUserFriendlyError","USER_STORAGE_KEY","cov_2jgr3sge26","s","_ref","f","_ref3","_ref4","_slicedToArray","user","setUser","_ref5","_ref6","isLoading","setIsLoading","isMounted","timer","loadUser","_ref7","_asyncToGenerator","stored","getItem","b","userData","JSON","parse","migratedUser","Object","assign","role","children","language","changeLanguage","_ref8","detectDeviceLanguage","detectedLang","info","context","error","action","apply","arguments","OS","setTimeout","clearTimeout","identifyUser","_ref9","newUser","id","Date","now","Math","random","toString","substr","createdAt","setItem","stringify","userId","userName","name","childrenCount","length","Error","String","_x","updateUser","_ref10","updates","updatedUser","_x2","addChild","_ref11","childData","newChild","addedAt","parentId","permissions","canChangeChatBackgrounds","canChangeNotificationSounds","canAddContacts","concat","_toConsumableArray","console","log","_x3","removeChild","_ref12","childId","updatedChildren","filter","child","activeChildId","undefined","_x4","setActiveChild","_ref13","_x5","logoutUser","removeItem","activeChild","find","isAuthenticated","_ref2","UserProvider","useUser"],"sources":["UserContext.tsx"],"sourcesContent":["import createContextHook from '@nkzw/create-context-hook';\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Platform } from 'react-native';\nimport i18n from './i18n';\nimport { logger } from '@/utils/logger';\n\nimport { UserRole, ParentGender } from './types';\nimport { handleErrorSilently, showUserFriendlyError } from '@/utils/errorHandler';\n\nexport interface ChildProfile {\n  id: string;\n  name: string;\n  age?: number;\n  avatar?: string;\n  deviceId?: string;\n  addedAt: number;\n  parentId?: string; // ID родителя-владельца\n  pin?: string; // PIN для входа ребенка (опционально)\n  permissions?: {\n    canChangeChatBackgrounds?: boolean;\n    canChangeNotificationSounds?: boolean;\n    canAddContacts?: boolean;\n  };\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  email?: string;\n  avatar?: string;\n  createdAt: number;\n  deviceId?: string;\n  language?: string;\n  role?: UserRole; // 'parent' | 'child' (опционально для обратной совместимости)\n  parentId?: string; // Если role='child', указывает на родителя\n  parentPin?: string; // PIN родителя для аутентификации\n  parentGender?: ParentGender; // Пол родителя (для локализации)\n  country?: string; // Страна (для локализации)\n  children: ChildProfile[]; // Массив детей родителя\n  activeChildId?: string; // ID активного (выбранного) ребенка для просмотра\n}\n\nconst USER_STORAGE_KEY = '@user_data';\n\nexport const [UserProvider, useUser] = createContextHook(() => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    let isMounted = true;\n    let timer: ReturnType<typeof setTimeout> | undefined;\n\n    const loadUser = async () => {\n      try {\n        const stored = await AsyncStorage.getItem(USER_STORAGE_KEY);\n        if (!isMounted) {\n          return;\n        }\n        if (stored) {\n          const userData = JSON.parse(stored);\n          // Миграция: если нет role, устанавливаем 'parent' по умолчанию\n          const migratedUser: User = {\n            ...userData,\n            role: userData.role || 'parent', // По умолчанию родитель\n            children: userData.children || [], // Обеспечиваем наличие children\n          };\n          setUser(migratedUser);\n          if (migratedUser.language) {\n            i18n.changeLanguage(migratedUser.language);\n          }\n        } else {\n          // Первый запуск - определяем язык устройства автоматически\n          const { detectDeviceLanguage } = await import('@/constants/i18n');\n          const detectedLang = await detectDeviceLanguage();\n          if (detectedLang && detectedLang !== i18n.language) {\n            i18n.changeLanguage(detectedLang);\n            logger.info('Auto-detected language', { context: 'UserContext', language: detectedLang });\n          }\n        }\n      } catch (error) {\n        handleErrorSilently(error, 'UserContext', { action: 'loadUser' });\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    if (Platform.OS !== 'web') {\n      loadUser();\n    } else {\n      timer = setTimeout(loadUser, 0);\n    }\n\n    return () => {\n      isMounted = false;\n      if (timer) {\n        clearTimeout(timer);\n      }\n    };\n  }, []);\n\n  const identifyUser = useCallback(async (userData: Omit<User, 'id' | 'createdAt' | 'children'> & { children?: ChildProfile[] }) => {\n    try {\n      const newUser: User = {\n        id: `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        createdAt: Date.now(),\n        children: userData.children || [],\n        ...userData,\n      };\n\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(newUser));\n      setUser(newUser);\n\n      logger.info('User identified', { context: 'UserContext', userId: newUser.id, userName: newUser.name, childrenCount: newUser.children.length });\n\n      return newUser;\n    } catch (error) {\n      logger.error('Error identifying user', error instanceof Error ? error : new Error(String(error)), { context: 'UserContext', action: 'identifyUser' });\n      throw error;\n    }\n  }, []);\n\n  const updateUser = useCallback(async (updates: Partial<Omit<User, 'id' | 'createdAt'>>) => {\n    if (!user) {\n      throw new Error('No user to update');\n    }\n\n    try {\n      const updatedUser = { ...user, ...updates };\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser));\n      setUser(updatedUser);\n\n      if (updates.language) {\n        i18n.changeLanguage(updates.language);\n      }\n\n      logger.info('User updated', { context: 'UserContext', userId: updatedUser.id, action: 'updateUser' });\n      return updatedUser;\n    } catch (error) {\n      handleErrorSilently(error, 'UserContext', { action: 'updateUser' });\n      await showUserFriendlyError(error, 'UserContext', { action: 'updateUser' });\n      throw error;\n    }\n  }, [user]);\n\n  const addChild = useCallback(async (childData: Omit<ChildProfile, 'id' | 'addedAt' | 'parentId'>) => {\n    if (!user) {\n      throw new Error('No user to add child to');\n    }\n\n    // Проверка: только родитель может добавлять детей\n    if (user.role === 'child') {\n      throw new Error('Only parent can add children');\n    }\n\n    try {\n      const newChild: ChildProfile = {\n        id: `child_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        addedAt: Date.now(),\n        parentId: user.id,\n        permissions: {\n          canChangeChatBackgrounds: true,\n          canChangeNotificationSounds: true,\n          canAddContacts: false, // По умолчанию только родитель\n          ...childData.permissions,\n        },\n        ...childData,\n      };\n\n      const updatedUser = {\n        ...user,\n        children: [...user.children, newChild],\n      };\n\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser));\n      setUser(updatedUser);\n\n      console.log('Child added:', newChild.id);\n      return newChild;\n    } catch (error) {\n      console.error('Error adding child:', error);\n      throw error;\n    }\n  }, [user]);\n\n  const removeChild = useCallback(async (childId: string) => {\n    if (!user) {\n      throw new Error('No user to remove child from');\n    }\n\n    try {\n      const updatedChildren = user.children.filter(child => child.id !== childId);\n      const updatedUser = {\n        ...user,\n        children: updatedChildren,\n        activeChildId: user.activeChildId === childId ? undefined : user.activeChildId,\n      };\n\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser));\n      setUser(updatedUser);\n\n      logger.info('Child removed', { context: 'UserContext', childId, action: 'removeChild' });\n    } catch (error) {\n      logger.error('Error removing child', error instanceof Error ? error : new Error(String(error)), { context: 'UserContext', action: 'removeChild' });\n      throw error;\n    }\n  }, [user]);\n\n  const setActiveChild = useCallback(async (childId: string | undefined) => {\n    if (!user) {\n      throw new Error('No user to update');\n    }\n\n    try {\n      const updatedUser = { ...user, activeChildId: childId };\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser));\n      setUser(updatedUser);\n\n      logger.info('Active child set', { context: 'UserContext', childId, action: 'setActiveChild' });\n    } catch (error) {\n      handleErrorSilently(error, 'UserContext', { action: 'setActiveChild' });\n      await showUserFriendlyError(error, 'UserContext', { action: 'setActiveChild' });\n      throw error;\n    }\n  }, [user]);\n\n  const logoutUser = useCallback(async () => {\n    try {\n      await AsyncStorage.removeItem(USER_STORAGE_KEY);\n      setUser(null);\n      logger.info('User logged out', { context: 'UserContext', action: 'logoutUser' });\n    } catch (error) {\n      handleErrorSilently(error, 'UserContext', { action: 'logoutUser' });\n      await showUserFriendlyError(error, 'UserContext', { action: 'logoutUser' });\n      throw error;\n    }\n  }, []);\n\n  const activeChild = useMemo(() => {\n    if (!user || !user.activeChildId) return null;\n    return user.children.find(child => child.id === user.activeChildId) || null;\n  }, [user]);\n\n  return useMemo(() => ({\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n    activeChild,\n    children: user?.children || [],\n    identifyUser,\n    updateUser,\n    addChild,\n    removeChild,\n    setActiveChild,\n    logoutUser,\n  }), [user, isLoading, activeChild, identifyUser, updateUser, addChild, removeChild, setActiveChild, logoutUser]);\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,iBAAiB,M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","ignoreList":[]}