{"version":3,"names":["React","View","Text","StyleSheet","ActivityIndicator","useMonitoring","useParentalControls","useThemeMode","CloudUpload","CheckCircle","AlertCircle","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SyncStatusIndicator","_ref","_ref$variant","variant","cov_ei7dbay54","b","f","_ref2","s","monitoringSyncing","isSyncing","monitoringSyncTime","lastSyncTimestamp","_ref3","settingsSyncing","settingsSyncTime","_ref4","theme","styles","createStyles","lastSync","formatTimeAgo","timestamp","now","Date","diff","seconds","Math","floor","minutes","hours","style","compactContainer","children","size","color","primary","success","warning","container","text","create","flexDirection","alignItems","gap","padding","fontSize","textSecondary"],"sources":["SyncStatusIndicator.tsx"],"sourcesContent":["/**\n * Sync Status Indicator Component\n * Shows synchronization status to the user\n */\n\nimport React from 'react';\nimport { View, Text, StyleSheet, ActivityIndicator } from 'react-native';\nimport { useMonitoring } from '@/constants/MonitoringContext';\nimport { useParentalControls } from '@/constants/ParentalControlsContext';\nimport { useThemeMode } from '@/constants/ThemeContext';\nimport { CloudUpload, CheckCircle, AlertCircle } from 'lucide-react-native';\n\ninterface SyncStatusIndicatorProps {\n  variant?: 'default' | 'compact';\n}\n\nexport function SyncStatusIndicator({ variant = 'default' }: SyncStatusIndicatorProps) {\n  const { isSyncing: monitoringSyncing, lastSyncTimestamp: monitoringSyncTime } = useMonitoring();\n  const { isSyncing: settingsSyncing, lastSyncTimestamp: settingsSyncTime } = useParentalControls();\n  const { theme } = useThemeMode();\n  const styles = createStyles(theme);\n\n  const isSyncing = monitoringSyncing || settingsSyncing;\n  const lastSync = monitoringSyncTime || settingsSyncTime;\n\n  const formatTimeAgo = (timestamp: number | null): string => {\n    if (!timestamp) return 'Никогда';\n    const now = Date.now();\n    const diff = now - timestamp;\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n\n    if (seconds < 60) return 'Только что';\n    if (minutes < 60) return `${minutes} мин назад`;\n    if (hours < 24) return `${hours} ч назад`;\n    return `${Math.floor(hours / 24)} дн назад`;\n  };\n\n  if (variant === 'compact') {\n    return (\n      <View style={styles.compactContainer}>\n        {isSyncing ? (\n          <ActivityIndicator size=\"small\" color={theme.primary} />\n        ) : lastSync ? (\n          <CheckCircle size={16} color={theme.success} />\n        ) : (\n          <AlertCircle size={16} color={theme.warning} />\n        )}\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {isSyncing ? (\n        <>\n          <ActivityIndicator size=\"small\" color={theme.primary} />\n          <Text style={styles.text}>Синхронизация...</Text>\n        </>\n      ) : lastSync ? (\n        <>\n          <CheckCircle size={16} color={theme.success} />\n          <Text style={styles.text}>Обновлено {formatTimeAgo(lastSync)}</Text>\n        </>\n      ) : (\n        <>\n          <CloudUpload size={16} color={theme.warning} />\n          <Text style={styles.text}>Не синхронизировано</Text>\n        </>\n      )}\n    </View>\n  );\n}\n\nconst createStyles = (theme: any) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    padding: 8,\n  },\n  compactContainer: {\n    padding: 4,\n  },\n  text: {\n    fontSize: 12,\n    color: theme.textSecondary,\n  },\n});\n"],"mappings":"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","ignoreList":[]}