4c288206f7284a2ee2343797488fa4fb
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';
import { useThemeMode } from '@/constants/ThemeContext';
import { useAuth } from '@/constants/AuthContext';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
export function OnlineStatus(_ref) {
  var userId = _ref.userId,
    _ref$size = _ref.size,
    size = _ref$size === void 0 ? 'medium' : _ref$size,
    _ref$showText = _ref.showText,
    showText = _ref$showText === void 0 ? false : _ref$showText,
    style = _ref.style;
  var _useThemeMode = useThemeMode(),
    theme = _useThemeMode.theme;
  var _useAuth = useAuth(),
    isAuthenticated = _useAuth.isAuthenticated;
  var _useState = useState(true),
    _useState2 = _slicedToArray(_useState, 2),
    isOnline = _useState2[0],
    setIsOnline = _useState2[1];
  useEffect(function () {
    setIsOnline(isAuthenticated);
    var interval = setInterval(function () {
      setIsOnline(isAuthenticated);
    }, 30000);
    return function () {
      return clearInterval(interval);
    };
  }, [isAuthenticated, userId]);
  var sizeMap = {
    small: 8,
    medium: 12,
    large: 16
  };
  var dotSize = sizeMap[size];
  var styles = StyleSheet.create({
    container: {
      flexDirection: 'row',
      alignItems: 'center',
      gap: 6
    },
    dot: {
      width: dotSize,
      height: dotSize,
      borderRadius: dotSize / 2,
      backgroundColor: isOnline ? '#22c55e' : '#9ca3af',
      borderWidth: 2,
      borderColor: theme.backgroundPrimary || '#fff'
    },
    text: {
      fontSize: 12,
      color: theme.textSecondary,
      fontWeight: '500'
    }
  });
  return _jsxs(View, {
    style: [styles.container, style],
    children: [_jsx(View, {
      style: styles.dot
    }), showText && _jsx(Text, {
      style: styles.text,
      children: isOnline ? 'В сети' : 'Не в сети'
    })]
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiVmlldyIsIlRleHQiLCJTdHlsZVNoZWV0IiwidXNlVGhlbWVNb2RlIiwidXNlQXV0aCIsImpzeCIsIl9qc3giLCJqc3hzIiwiX2pzeHMiLCJPbmxpbmVTdGF0dXMiLCJfcmVmIiwidXNlcklkIiwiX3JlZiRzaXplIiwic2l6ZSIsIl9yZWYkc2hvd1RleHQiLCJzaG93VGV4dCIsInN0eWxlIiwiX3VzZVRoZW1lTW9kZSIsInRoZW1lIiwiX3VzZUF1dGgiLCJpc0F1dGhlbnRpY2F0ZWQiLCJfdXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkiLCJpc09ubGluZSIsInNldElzT25saW5lIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzaXplTWFwIiwic21hbGwiLCJtZWRpdW0iLCJsYXJnZSIsImRvdFNpemUiLCJzdHlsZXMiLCJjcmVhdGUiLCJjb250YWluZXIiLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsImdhcCIsImRvdCIsIndpZHRoIiwiaGVpZ2h0IiwiYm9yZGVyUmFkaXVzIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJDb2xvciIsImJhY2tncm91bmRQcmltYXJ5IiwidGV4dCIsImZvbnRTaXplIiwiY29sb3IiLCJ0ZXh0U2Vjb25kYXJ5IiwiZm9udFdlaWdodCIsImNoaWxkcmVuIl0sInNvdXJjZXMiOlsiT25saW5lU3RhdHVzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFZpZXcsIFRleHQsIFN0eWxlU2hlZXQsIFZpZXdTdHlsZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgeyB1c2VUaGVtZU1vZGUgfSBmcm9tICdAL2NvbnN0YW50cy9UaGVtZUNvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29uc3RhbnRzL0F1dGhDb250ZXh0JztcblxuaW50ZXJmYWNlIE9ubGluZVN0YXR1c1Byb3BzIHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICBzaXplPzogJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJztcbiAgc2hvd1RleHQ/OiBib29sZWFuO1xuICBzdHlsZT86IFZpZXdTdHlsZTtcbn1cblxuLyoqXG4gKiDQmtC+0LzQv9C+0L3QtdC90YIg0YHRgtCw0YLRg9GB0LAg0L7QvdC70LDQudC9L9C+0YTQu9Cw0LnQvVxuICog0J/QvtC60LDQt9GL0LLQsNC10YIg0LfQtdC70LXQvdGL0Lkg0LrRgNGD0LbQvtC6INC10YHQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvtC90LvQsNC50L1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIE9ubGluZVN0YXR1cyh7IHVzZXJJZCwgc2l6ZSA9ICdtZWRpdW0nLCBzaG93VGV4dCA9IGZhbHNlLCBzdHlsZSB9OiBPbmxpbmVTdGF0dXNQcm9wcykge1xuICBjb25zdCB7IHRoZW1lIH0gPSB1c2VUaGVtZU1vZGUoKTtcbiAgY29uc3QgeyBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgW2lzT25saW5lLCBzZXRJc09ubGluZV0gPSB1c2VTdGF0ZSh0cnVlKTsgLy8g0J/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0L7QvdC70LDQudC9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyDQkiDRgNC10LDQu9GM0L3QvtC8INC/0YDQuNC70L7QttC10L3QuNC4INC30LTQtdGB0Ywg0LHRg9C00LXRgiDQv9GA0L7QstC10YDQutCwINGB0YLQsNGC0YPRgdCwINGH0LXRgNC10LcgQVBJXG4gICAgLy8g0J/QvtC60LAg0YHRh9C40YLQsNC10Lwg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC+0L3Qu9Cw0LnQvSwg0LXRgdC70Lgg0L7QvSDQsNGD0YLQtdC90YLQuNGE0LjRhtC40YDQvtCy0LDQvVxuICAgIHNldElzT25saW5lKGlzQXV0aGVudGljYXRlZCk7XG4gICAgXG4gICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGB0YLQsNGC0YPRgSDQutCw0LbQtNGL0LUgMzAg0YHQtdC60YPQvdC0XG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRJc09ubGluZShpc0F1dGhlbnRpY2F0ZWQpO1xuICAgIH0sIDMwMDAwKTtcblxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlcklkXSk7XG5cbiAgY29uc3Qgc2l6ZU1hcCA9IHtcbiAgICBzbWFsbDogOCxcbiAgICBtZWRpdW06IDEyLFxuICAgIGxhcmdlOiAxNixcbiAgfTtcblxuICBjb25zdCBkb3RTaXplID0gc2l6ZU1hcFtzaXplXTtcblxuICBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAgY29udGFpbmVyOiB7XG4gICAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgZ2FwOiA2LFxuICAgIH0sXG4gICAgZG90OiB7XG4gICAgICB3aWR0aDogZG90U2l6ZSxcbiAgICAgIGhlaWdodDogZG90U2l6ZSxcbiAgICAgIGJvcmRlclJhZGl1czogZG90U2l6ZSAvIDIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzT25saW5lID8gJyMyMmM1NWUnIDogJyM5Y2EzYWYnLFxuICAgICAgYm9yZGVyV2lkdGg6IDIsXG4gICAgICBib3JkZXJDb2xvcjogdGhlbWUuYmFja2dyb3VuZFByaW1hcnkgfHwgJyNmZmYnLFxuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgZm9udFNpemU6IDEyLFxuICAgICAgY29sb3I6IHRoZW1lLnRleHRTZWNvbmRhcnksXG4gICAgICBmb250V2VpZ2h0OiAnNTAwJyBhcyBjb25zdCxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gKFxuICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmNvbnRhaW5lciwgc3R5bGVdfT5cbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuZG90fSAvPlxuICAgICAge3Nob3dUZXh0ICYmIChcbiAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50ZXh0fT5cbiAgICAgICAgICB7aXNPbmxpbmUgPyAn0JIg0YHQtdGC0LgnIDogJ9Cd0LUg0LIg0YHQtdGC0LgnfVxuICAgICAgICA8L1RleHQ+XG4gICAgICApfVxuICAgIDwvVmlldz5cbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU9BLEtBQUssSUFBSUMsUUFBUSxFQUFFQyxTQUFTLFFBQVEsT0FBTztBQUNsRCxTQUFTQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsVUFBVSxRQUFtQixjQUFjO0FBQ2hFLFNBQVNDLFlBQVksUUFBUSwwQkFBMEI7QUFDdkQsU0FBU0MsT0FBTyxRQUFRLHlCQUF5QjtBQUFDLFNBQUFDLEdBQUEsSUFBQUMsSUFBQSxFQUFBQyxJQUFBLElBQUFDLEtBQUE7QUFhbEQsT0FBTyxTQUFTQyxZQUFZQSxDQUFBQyxJQUFBLEVBQTBFO0VBQUEsSUFBdkVDLE1BQU0sR0FBQUQsSUFBQSxDQUFOQyxNQUFNO0lBQUFDLFNBQUEsR0FBQUYsSUFBQSxDQUFFRyxJQUFJO0lBQUpBLElBQUksR0FBQUQsU0FBQSxjQUFHLFFBQVEsR0FBQUEsU0FBQTtJQUFBRSxhQUFBLEdBQUFKLElBQUEsQ0FBRUssUUFBUTtJQUFSQSxRQUFRLEdBQUFELGFBQUEsY0FBRyxLQUFLLEdBQUFBLGFBQUE7SUFBRUUsS0FBSyxHQUFBTixJQUFBLENBQUxNLEtBQUs7RUFDN0UsSUFBQUMsYUFBQSxHQUFrQmQsWUFBWSxDQUFDLENBQUM7SUFBeEJlLEtBQUssR0FBQUQsYUFBQSxDQUFMQyxLQUFLO0VBQ2IsSUFBQUMsUUFBQSxHQUE0QmYsT0FBTyxDQUFDLENBQUM7SUFBN0JnQixlQUFlLEdBQUFELFFBQUEsQ0FBZkMsZUFBZTtFQUN2QixJQUFBQyxTQUFBLEdBQWdDdkIsUUFBUSxDQUFDLElBQUksQ0FBQztJQUFBd0IsVUFBQSxHQUFBQyxjQUFBLENBQUFGLFNBQUE7SUFBdkNHLFFBQVEsR0FBQUYsVUFBQTtJQUFFRyxXQUFXLEdBQUFILFVBQUE7RUFFNUJ2QixTQUFTLENBQUMsWUFBTTtJQUdkMEIsV0FBVyxDQUFDTCxlQUFlLENBQUM7SUFHNUIsSUFBTU0sUUFBUSxHQUFHQyxXQUFXLENBQUMsWUFBTTtNQUNqQ0YsV0FBVyxDQUFDTCxlQUFlLENBQUM7SUFDOUIsQ0FBQyxFQUFFLEtBQUssQ0FBQztJQUVULE9BQU87TUFBQSxPQUFNUSxhQUFhLENBQUNGLFFBQVEsQ0FBQztJQUFBO0VBQ3RDLENBQUMsRUFBRSxDQUFDTixlQUFlLEVBQUVULE1BQU0sQ0FBQyxDQUFDO0VBRTdCLElBQU1rQixPQUFPLEdBQUc7SUFDZEMsS0FBSyxFQUFFLENBQUM7SUFDUkMsTUFBTSxFQUFFLEVBQUU7SUFDVkMsS0FBSyxFQUFFO0VBQ1QsQ0FBQztFQUVELElBQU1DLE9BQU8sR0FBR0osT0FBTyxDQUFDaEIsSUFBSSxDQUFDO0VBRTdCLElBQU1xQixNQUFNLEdBQUdoQyxVQUFVLENBQUNpQyxNQUFNLENBQUM7SUFDL0JDLFNBQVMsRUFBRTtNQUNUQyxhQUFhLEVBQUUsS0FBSztNQUNwQkMsVUFBVSxFQUFFLFFBQVE7TUFDcEJDLEdBQUcsRUFBRTtJQUNQLENBQUM7SUFDREMsR0FBRyxFQUFFO01BQ0hDLEtBQUssRUFBRVIsT0FBTztNQUNkUyxNQUFNLEVBQUVULE9BQU87TUFDZlUsWUFBWSxFQUFFVixPQUFPLEdBQUcsQ0FBQztNQUN6QlcsZUFBZSxFQUFFcEIsUUFBUSxHQUFHLFNBQVMsR0FBRyxTQUFTO01BQ2pEcUIsV0FBVyxFQUFFLENBQUM7TUFDZEMsV0FBVyxFQUFFNUIsS0FBSyxDQUFDNkIsaUJBQWlCLElBQUk7SUFDMUMsQ0FBQztJQUNEQyxJQUFJLEVBQUU7TUFDSkMsUUFBUSxFQUFFLEVBQUU7TUFDWkMsS0FBSyxFQUFFaEMsS0FBSyxDQUFDaUMsYUFBYTtNQUMxQkMsVUFBVSxFQUFFO0lBQ2Q7RUFDRixDQUFDLENBQUM7RUFFRixPQUNFNUMsS0FBQSxDQUFDUixJQUFJO0lBQUNnQixLQUFLLEVBQUUsQ0FBQ2tCLE1BQU0sQ0FBQ0UsU0FBUyxFQUFFcEIsS0FBSyxDQUFFO0lBQUFxQyxRQUFBLEdBQ3JDL0MsSUFBQSxDQUFDTixJQUFJO01BQUNnQixLQUFLLEVBQUVrQixNQUFNLENBQUNNO0lBQUksQ0FBRSxDQUFDLEVBQzFCekIsUUFBUSxJQUNQVCxJQUFBLENBQUNMLElBQUk7TUFBQ2UsS0FBSyxFQUFFa0IsTUFBTSxDQUFDYyxJQUFLO01BQUFLLFFBQUEsRUFDdEI3QixRQUFRLEdBQUcsUUFBUSxHQUFHO0lBQVcsQ0FDOUIsQ0FDUDtFQUFBLENBQ0csQ0FBQztBQUVYIiwiaWdub3JlTGlzdCI6W119