79d2ffdb93fb8525280cc9ee7e747edf
_getJestObj().mock('@react-native-async-storage/async-storage', function () {
  return Object.assign({
    __esModule: true,
    default: mockAsyncStorage
  }, mockAsyncStorage);
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _versioning = require("@/utils/versioning");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockAsyncStorage = {
  getItem: jest.fn(function () {
    return Promise.resolve(null);
  }),
  setItem: jest.fn(function () {
    return Promise.resolve();
  }),
  removeItem: jest.fn(function () {
    return Promise.resolve();
  }),
  clear: jest.fn(function () {
    return Promise.resolve();
  }),
  getAllKeys: jest.fn(function () {
    return Promise.resolve([]);
  }),
  multiGet: jest.fn(function () {
    return Promise.resolve([]);
  }),
  multiSet: jest.fn(function () {
    return Promise.resolve();
  }),
  multiRemove: jest.fn(function () {
    return Promise.resolve();
  })
};
describe('versioning', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    mockAsyncStorage.getItem.mockClear();
    mockAsyncStorage.setItem.mockClear();
  });
  describe('getVersionInfo', function () {
    it('должен вернуть информацию о версиях', function () {
      var versionInfo = (0, _versioning.getVersionInfo)();
      expect(versionInfo).toHaveProperty('appVersion');
      expect(versionInfo).toHaveProperty('dataVersion');
      expect(versionInfo).toHaveProperty('apiVersion');
      expect(versionInfo).toHaveProperty('schemaVersion');
      expect(typeof versionInfo.appVersion).toBe('string');
      expect(typeof versionInfo.dataVersion).toBe('number');
      expect(typeof versionInfo.apiVersion).toBe('number');
      expect(typeof versionInfo.schemaVersion).toBe('number');
    });
  });
  describe('createVersionedData', function () {
    it('должен создать версионированные данные', function () {
      var data = {
        test: 'data'
      };
      var versioned = (0, _versioning.createVersionedData)(data, 2);
      expect(versioned.version).toBe(2);
      expect(versioned.data).toBe(data);
      expect(versioned.migratedAt).toBeDefined();
    });
    it('должен использовать дефолтную версию если не указана', function () {
      var data = {
        test: 'data'
      };
      var versioned = (0, _versioning.createVersionedData)(data);
      expect(versioned.version).toBeDefined();
      expect(typeof versioned.version).toBe('number');
    });
  });
  describe('needsMigration', function () {
    it('должен вернуть true если версия меньше целевой', function () {
      expect((0, _versioning.needsMigration)(1, 2)).toBe(true);
      expect((0, _versioning.needsMigration)(1, 3)).toBe(true);
    });
    it('должен вернуть false если версия равна целевой', function () {
      expect((0, _versioning.needsMigration)(2, 2)).toBe(false);
    });
    it('должен вернуть false если версия больше целевой', function () {
      expect((0, _versioning.needsMigration)(3, 2)).toBe(false);
    });
    it('должен использовать дефолтную целевую версию', function () {
      var result = (0, _versioning.needsMigration)(1);
      expect(typeof result).toBe('boolean');
    });
  });
  describe('getStoredVersion', function () {
    it('должен получить версию из хранилища', (0, _asyncToGenerator2.default)(function* () {
      mockAsyncStorage.getItem.mockResolvedValue('2');
      var version = yield (0, _versioning.getStoredVersion)('@test_key');
      expect(version).toBe(2);
      expect(mockAsyncStorage.getItem).toHaveBeenCalledWith('@test_key_version');
    }));
    it('должен вернуть 1 если версия не найдена', (0, _asyncToGenerator2.default)(function* () {
      mockAsyncStorage.getItem.mockResolvedValue(null);
      var version = yield (0, _versioning.getStoredVersion)('@test_key');
      expect(version).toBe(1);
      expect(mockAsyncStorage.getItem).toHaveBeenCalledWith('@test_key_version');
    }));
    it('должен вернуть 1 при ошибке', (0, _asyncToGenerator2.default)(function* () {
      mockAsyncStorage.getItem.mockRejectedValue(new Error('Storage error'));
      var version = yield (0, _versioning.getStoredVersion)('@test_key');
      expect(version).toBe(1);
    }));
  });
  describe('saveStoredVersion', function () {
    it('должен сохранить версию в хранилище', (0, _asyncToGenerator2.default)(function* () {
      mockAsyncStorage.setItem.mockResolvedValue(undefined);
      yield (0, _versioning.saveStoredVersion)('@test_key', 2);
      expect(mockAsyncStorage.setItem).toHaveBeenCalledWith('@test_key_version', '2');
    }));
    it('должен обработать ошибку при сохранении', (0, _asyncToGenerator2.default)(function* () {
      var originalError = console.error;
      var errorSpy = jest.fn();
      console.error = errorSpy;
      try {
        mockAsyncStorage.setItem.mockRejectedValue(new Error('Storage error'));
        var errorThrown = false;
        try {
          yield (0, _versioning.saveStoredVersion)('@test_key', 2);
        } catch (error) {
          errorThrown = true;
        }
        expect(errorThrown).toBe(false);
        expect(mockAsyncStorage.setItem).toHaveBeenCalledWith('@test_key_version', '2');
        expect(errorSpy).toHaveBeenCalled();
      } finally {
        console.error = originalError;
      }
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJPYmplY3QiLCJhc3NpZ24iLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vY2tBc3luY1N0b3JhZ2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl92ZXJzaW9uaW5nIiwiX3JlcXVpcmUiLCJqZXN0IiwiZ2V0SXRlbSIsImZuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiZ2V0QWxsS2V5cyIsIm11bHRpR2V0IiwibXVsdGlTZXQiLCJtdWx0aVJlbW92ZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrQ2xlYXIiLCJpdCIsInZlcnNpb25JbmZvIiwiZ2V0VmVyc2lvbkluZm8iLCJleHBlY3QiLCJ0b0hhdmVQcm9wZXJ0eSIsImFwcFZlcnNpb24iLCJ0b0JlIiwiZGF0YVZlcnNpb24iLCJhcGlWZXJzaW9uIiwic2NoZW1hVmVyc2lvbiIsImRhdGEiLCJ0ZXN0IiwidmVyc2lvbmVkIiwiY3JlYXRlVmVyc2lvbmVkRGF0YSIsInZlcnNpb24iLCJtaWdyYXRlZEF0IiwidG9CZURlZmluZWQiLCJuZWVkc01pZ3JhdGlvbiIsInJlc3VsdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZ2V0U3RvcmVkVmVyc2lvbiIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInVuZGVmaW5lZCIsInNhdmVTdG9yZWRWZXJzaW9uIiwib3JpZ2luYWxFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsImVycm9yU3B5IiwiZXJyb3JUaHJvd24iLCJ0b0hhdmVCZWVuQ2FsbGVkIl0sInNvdXJjZXMiOlsidmVyc2lvbmluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog0KLQtdGB0YLRiyDQtNC70Y8g0YHQuNGB0YLQtdC80Ysg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGPXG4gKiBBc3luY1N0b3JhZ2Ug0LzQvtC60LDQtdGC0YHRjyDQsiBqZXN0LnNldHVwLmpzIChkZWZhdWx0ICsgbmFtZWQgZXhwb3J0cykuXG4gKi9cblxuaW1wb3J0IHtcbiAgZ2V0VmVyc2lvbkluZm8sXG4gIGNyZWF0ZVZlcnNpb25lZERhdGEsXG4gIG5lZWRzTWlncmF0aW9uLFxuICBnZXRTdG9yZWRWZXJzaW9uLFxuICBzYXZlU3RvcmVkVmVyc2lvbixcbn0gZnJvbSAnQC91dGlscy92ZXJzaW9uaW5nJztcblxuLy8g0JzQvtC60LDQtdC8INC80L7QtNGD0LvRjCDQtNC70Y8g0LTQuNC90LDQvNC40YfQtdGB0LrQvtCz0L4g0LjQvNC/0L7RgNGC0LBcbmNvbnN0IG1vY2tBc3luY1N0b3JhZ2UgPSB7XG4gIGdldEl0ZW06IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKSxcbiAgc2V0SXRlbTogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gIHJlbW92ZUl0ZW06IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpLFxuICBjbGVhcjogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gIGdldEFsbEtleXM6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSksXG4gIG11bHRpR2V0OiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZShbXSkpLFxuICBtdWx0aVNldDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gIG11bHRpUmVtb3ZlOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbn07XG5cbi8vINCc0L7QutCw0LXQvCDQvNC+0LTRg9C70Ywg0YLQsNC6LCDRh9GC0L7QsdGLINC+0L0g0YDQsNCx0L7RgtCw0Lsg0Lgg0LTQu9GPINGB0YLQsNGC0LjRh9C10YHQutC+0LPQviwg0Lgg0LTQu9GPINC00LjQvdCw0LzQuNGH0LXRgdC60L7Qs9C+INC40LzQv9C+0YDRgtCwXG5qZXN0Lm1vY2soJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogbW9ja0FzeW5jU3RvcmFnZSxcbiAgLi4ubW9ja0FzeW5jU3RvcmFnZSxcbn0pKTtcblxuZGVzY3JpYmUoJ3ZlcnNpb25pbmcnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vINCh0LHRgNCw0YHRi9Cy0LDQtdC8INC80L7QutC4INC/0LXRgNC10LQg0LrQsNC20LTRi9C8INGC0LXRgdGC0L7QvFxuICAgIG1vY2tBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrQ2xlYXIoKTtcbiAgICBtb2NrQXN5bmNTdG9yYWdlLnNldEl0ZW0ubW9ja0NsZWFyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRWZXJzaW9uSW5mbycsICgpID0+IHtcbiAgICBpdCgn0LTQvtC70LbQtdC9INCy0LXRgNC90YPRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INCy0LXRgNGB0LjRj9GFJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmVyc2lvbkluZm8gPSBnZXRWZXJzaW9uSW5mbygpO1xuXG4gICAgICBleHBlY3QodmVyc2lvbkluZm8pLnRvSGF2ZVByb3BlcnR5KCdhcHBWZXJzaW9uJyk7XG4gICAgICBleHBlY3QodmVyc2lvbkluZm8pLnRvSGF2ZVByb3BlcnR5KCdkYXRhVmVyc2lvbicpO1xuICAgICAgZXhwZWN0KHZlcnNpb25JbmZvKS50b0hhdmVQcm9wZXJ0eSgnYXBpVmVyc2lvbicpO1xuICAgICAgZXhwZWN0KHZlcnNpb25JbmZvKS50b0hhdmVQcm9wZXJ0eSgnc2NoZW1hVmVyc2lvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiB2ZXJzaW9uSW5mby5hcHBWZXJzaW9uKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdmVyc2lvbkluZm8uZGF0YVZlcnNpb24pLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiB2ZXJzaW9uSW5mby5hcGlWZXJzaW9uKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdmVyc2lvbkluZm8uc2NoZW1hVmVyc2lvbikudG9CZSgnbnVtYmVyJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVWZXJzaW9uZWREYXRhJywgKCkgPT4ge1xuICAgIGl0KCfQtNC+0LvQttC10L0g0YHQvtC30LTQsNGC0Ywg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QvdGL0LUg0LTQsNC90L3Ri9C1JywgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHsgdGVzdDogJ2RhdGEnIH07XG4gICAgICBjb25zdCB2ZXJzaW9uZWQgPSBjcmVhdGVWZXJzaW9uZWREYXRhKGRhdGEsIDIpO1xuXG4gICAgICBleHBlY3QodmVyc2lvbmVkLnZlcnNpb24pLnRvQmUoMik7XG4gICAgICBleHBlY3QodmVyc2lvbmVkLmRhdGEpLnRvQmUoZGF0YSk7XG4gICAgICBleHBlY3QodmVyc2lvbmVkLm1pZ3JhdGVkQXQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgn0LTQvtC70LbQtdC9INC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQtNC10YTQvtC70YLQvdGD0Y4g0LLQtdGA0YHQuNGOINC10YHQu9C4INC90LUg0YPQutCw0LfQsNC90LAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyB0ZXN0OiAnZGF0YScgfTtcbiAgICAgIGNvbnN0IHZlcnNpb25lZCA9IGNyZWF0ZVZlcnNpb25lZERhdGEoZGF0YSk7XG5cbiAgICAgIGV4cGVjdCh2ZXJzaW9uZWQudmVyc2lvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdmVyc2lvbmVkLnZlcnNpb24pLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbmVlZHNNaWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ9C00L7Qu9C20LXQvSDQstC10YDQvdGD0YLRjCB0cnVlINC10YHQu9C4INCy0LXRgNGB0LjRjyDQvNC10L3RjNGI0LUg0YbQtdC70LXQstC+0LknLCAoKSA9PiB7XG4gICAgICBleHBlY3QobmVlZHNNaWdyYXRpb24oMSwgMikpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobmVlZHNNaWdyYXRpb24oMSwgMykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn0LTQvtC70LbQtdC9INCy0LXRgNC90YPRgtGMIGZhbHNlINC10YHQu9C4INCy0LXRgNGB0LjRjyDRgNCw0LLQvdCwINGG0LXQu9C10LLQvtC5JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KG5lZWRzTWlncmF0aW9uKDIsIDIpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCfQtNC+0LvQttC10L0g0LLQtdGA0L3Rg9GC0YwgZmFsc2Ug0LXRgdC70Lgg0LLQtdGA0YHQuNGPINCx0L7Qu9GM0YjQtSDRhtC10LvQtdCy0L7QuScsICgpID0+IHtcbiAgICAgIGV4cGVjdChuZWVkc01pZ3JhdGlvbigzLCAyKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn0LTQvtC70LbQtdC9INC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQtNC10YTQvtC70YLQvdGD0Y4g0YbQtdC70LXQstGD0Y4g0LLQtdGA0YHQuNGOJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmVlZHNNaWdyYXRpb24oMSk7XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdCkudG9CZSgnYm9vbGVhbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0U3RvcmVkVmVyc2lvbicsICgpID0+IHtcbiAgICBpdCgn0LTQvtC70LbQtdC9INC/0L7Qu9GD0YfQuNGC0Ywg0LLQtdGA0YHQuNGOINC40Lcg0YXRgNCw0L3QuNC70LjRidCwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FzeW5jU3RvcmFnZS5nZXRJdGVtLm1vY2tSZXNvbHZlZFZhbHVlKCcyJyk7XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBnZXRTdG9yZWRWZXJzaW9uKCdAdGVzdF9rZXknKTtcblxuICAgICAgZXhwZWN0KHZlcnNpb24pLnRvQmUoMik7XG4gICAgICBleHBlY3QobW9ja0FzeW5jU3RvcmFnZS5nZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnQHRlc3Rfa2V5X3ZlcnNpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCfQtNC+0LvQttC10L0g0LLQtdGA0L3Rg9GC0YwgMSDQtdGB0LvQuCDQstC10YDRgdC40Y8g0L3QtSDQvdCw0LnQtNC10L3QsCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IGdldFN0b3JlZFZlcnNpb24oJ0B0ZXN0X2tleScpO1xuXG4gICAgICBleHBlY3QodmVyc2lvbikudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtb2NrQXN5bmNTdG9yYWdlLmdldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdAdGVzdF9rZXlfdmVyc2lvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ9C00L7Qu9C20LXQvSDQstC10YDQvdGD0YLRjCAxINC/0YDQuCDQvtGI0LjQsdC60LUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXN5bmNTdG9yYWdlLmdldEl0ZW0ubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdTdG9yYWdlIGVycm9yJykpO1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgZ2V0U3RvcmVkVmVyc2lvbignQHRlc3Rfa2V5Jyk7XG5cbiAgICAgIGV4cGVjdCh2ZXJzaW9uKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2F2ZVN0b3JlZFZlcnNpb24nLCAoKSA9PiB7XG4gICAgaXQoJ9C00L7Qu9C20LXQvSDRgdC+0YXRgNCw0L3QuNGC0Ywg0LLQtdGA0YHQuNGOINCyINGF0YDQsNC90LjQu9C40YnQtScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3luY1N0b3JhZ2Uuc2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBhd2FpdCBzYXZlU3RvcmVkVmVyc2lvbignQHRlc3Rfa2V5JywgMik7XG5cbiAgICAgIGV4cGVjdChtb2NrQXN5bmNTdG9yYWdlLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdAdGVzdF9rZXlfdmVyc2lvbicsICcyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgn0LTQvtC70LbQtdC9INC+0LHRgNCw0LHQvtGC0LDRgtGMINC+0YjQuNCx0LrRgyDQv9GA0Lgg0YHQvtGF0YDQsNC90LXQvdC40LgnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDQn9C+0LTQsNCy0LvRj9C10Lwg0LLRi9Cy0L7QtCDQvtGI0LjQsdC60Lgg0LIg0LrQvtC90YHQvtC70Ywg0LTQu9GPINGN0YLQvtCz0L4g0YLQtdGB0YLQsFxuICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICBjb25zdCBlcnJvclNweSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IgPSBlcnJvclNweTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbW9ja0FzeW5jU3RvcmFnZS5zZXRJdGVtLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU3RvcmFnZSBlcnJvcicpKTtcblxuICAgICAgICAvLyDQpNGD0L3QutGG0LjRjyDQvdC1INC00L7Qu9C20L3QsCDQstGL0LHRgNC+0YHQuNGC0Ywg0L7RiNC40LHQutGDLCDQtNC+0LvQttC90LAg0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0LXRkSDQstC90YPRgtGA0LhcbiAgICAgICAgbGV0IGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgc2F2ZVN0b3JlZFZlcnNpb24oJ0B0ZXN0X2tleScsIDIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cGVjdChlcnJvclRocm93bikudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChtb2NrQXN5bmNTdG9yYWdlLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdAdGVzdF9rZXlfdmVyc2lvbicsICcyJyk7XG4gICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INC+0YjQuNCx0LrQsCDQsdGL0LvQsCDQt9Cw0LvQvtCz0LjRgNC+0LLQsNC90LBcbiAgICAgICAgZXhwZWN0KGVycm9yU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10LwgY29uc29sZS5lcnJvclxuICAgICAgICBjb25zb2xlLmVycm9yID0gb3JpZ2luYWxFcnJvcjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBMEJBQSxXQUFBLEdBQUtDLElBQUksQ0FBQywyQ0FBMkMsRUFBRTtFQUFBLE9BQUFDLE1BQUEsQ0FBQUMsTUFBQTtJQUNyREMsVUFBVSxFQUFFLElBQUk7SUFDaEJDLE9BQU8sRUFBRUM7RUFBZ0IsR0FDdEJBLGdCQUFnQjtBQUFBLENBQ25CLENBQUM7QUFBQyxJQUFBQyxzQkFBQSxHQUFBQyxPQUFBLGlEQUFBSCxPQUFBO0FBQUEsSUFBQUksa0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQXpCSixJQUFBRSxXQUFBLEdBQUFGLE9BQUE7QUFNNEIsU0FBQVIsWUFBQTtFQUFBLElBQUFXLFFBQUEsR0FBQUgsT0FBQTtJQUFBSSxJQUFBLEdBQUFELFFBQUEsQ0FBQUMsSUFBQTtFQUFBWixXQUFBLFlBQUFBLFlBQUE7SUFBQSxPQUFBWSxJ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