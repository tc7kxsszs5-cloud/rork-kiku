94072dfec6317a25fcacc50f78ed390a
import _asyncToGenerator from "@babel/runtime/helpers/asyncToGenerator";
export var APP_DATA_VERSION = 1;
export var API_VERSION = 1;
export var SCHEMA_VERSION = 1;
export function getVersionInfo() {
  try {
    var packageJson = require('../../package.json');
    return {
      appVersion: packageJson.version || '1.0.0',
      dataVersion: APP_DATA_VERSION,
      apiVersion: API_VERSION,
      schemaVersion: SCHEMA_VERSION
    };
  } catch (_unused) {
    return {
      appVersion: '1.0.0',
      dataVersion: APP_DATA_VERSION,
      apiVersion: API_VERSION,
      schemaVersion: SCHEMA_VERSION
    };
  }
}
export function createVersionedData(data) {
  var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : APP_DATA_VERSION;
  return {
    version: version,
    data: data,
    migratedAt: Date.now()
  };
}
export function needsMigration(currentVersion) {
  var targetVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : APP_DATA_VERSION;
  return currentVersion < targetVersion;
}
export function getStoredVersion(_x) {
  return _getStoredVersion.apply(this, arguments);
}
function _getStoredVersion() {
  _getStoredVersion = _asyncToGenerator(function* (storageKey) {
    try {
      var AsyncStorage = (yield import('@react-native-async-storage/async-storage')).default;
      var version = yield AsyncStorage.getItem(`${storageKey}_version`);
      return version ? parseInt(version, 10) : 1;
    } catch (_unused2) {
      return 1;
    }
  });
  return _getStoredVersion.apply(this, arguments);
}
export function saveStoredVersion(_x2, _x3) {
  return _saveStoredVersion.apply(this, arguments);
}
function _saveStoredVersion() {
  _saveStoredVersion = _asyncToGenerator(function* (storageKey, version) {
    try {
      var AsyncStorage = (yield import('@react-native-async-storage/async-storage')).default;
      yield AsyncStorage.setItem(`${storageKey}_version`, String(version));
    } catch (error) {
      console.error(`[versioning] Failed to save version for ${storageKey}:`, error);
    }
  });
  return _saveStoredVersion.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUFBfREFUQV9WRVJTSU9OIiwiQVBJX1ZFUlNJT04iLCJTQ0hFTUFfVkVSU0lPTiIsImdldFZlcnNpb25JbmZvIiwicGFja2FnZUpzb24iLCJyZXF1aXJlIiwiYXBwVmVyc2lvbiIsInZlcnNpb24iLCJkYXRhVmVyc2lvbiIsImFwaVZlcnNpb24iLCJzY2hlbWFWZXJzaW9uIiwiX3VudXNlZCIsImNyZWF0ZVZlcnNpb25lZERhdGEiLCJkYXRhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibWlncmF0ZWRBdCIsIkRhdGUiLCJub3ciLCJuZWVkc01pZ3JhdGlvbiIsImN1cnJlbnRWZXJzaW9uIiwidGFyZ2V0VmVyc2lvbiIsImdldFN0b3JlZFZlcnNpb24iLCJfeCIsIl9nZXRTdG9yZWRWZXJzaW9uIiwiYXBwbHkiLCJfYXN5bmNUb0dlbmVyYXRvciIsInN0b3JhZ2VLZXkiLCJBc3luY1N0b3JhZ2UiLCJkZWZhdWx0IiwiZ2V0SXRlbSIsInBhcnNlSW50IiwiX3VudXNlZDIiLCJzYXZlU3RvcmVkVmVyc2lvbiIsIl94MiIsIl94MyIsIl9zYXZlU3RvcmVkVmVyc2lvbiIsInNldEl0ZW0iLCJTdHJpbmciLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlcyI6WyJ2ZXJzaW9uaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog0KHQuNGB0YLQtdC80LAg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QuNGPINC00LvRjyDQv9GA0L7QtdC60YLQsCBLSUtVXG4gKiBcbiAqINCe0LHQtdGB0L/QtdGH0LjQstCw0LXRgiDQv9C70LDQstC90YvQuSDQv9C10YDQtdGF0L7QtCDQvNC10LbQtNGDINCy0LXRgNGB0LjRj9C80Lgg0LTQsNC90L3Ri9GFINCx0LXQtyDQv9C+0YLQtdGA0Lgg0LjQvdGE0L7RgNC80LDRhtC40LhcbiAqL1xuXG5leHBvcnQgY29uc3QgQVBQX0RBVEFfVkVSU0lPTiA9IDE7IC8vINCi0LXQutGD0YnQsNGPINCy0LXRgNGB0LjRjyDQtNCw0L3QvdGL0YVcbmV4cG9ydCBjb25zdCBBUElfVkVSU0lPTiA9IDE7IC8vINCi0LXQutGD0YnQsNGPINCy0LXRgNGB0LjRjyBBUElcbmV4cG9ydCBjb25zdCBTQ0hFTUFfVkVSU0lPTiA9IDE7IC8vINCi0LXQutGD0YnQsNGPINCy0LXRgNGB0LjRjyDRgdGF0LXQvFxuXG5leHBvcnQgaW50ZXJmYWNlIFZlcnNpb25JbmZvIHtcbiAgYXBwVmVyc2lvbjogc3RyaW5nOyAvLyDQktC10YDRgdC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y8g0LjQtyBwYWNrYWdlLmpzb25cbiAgZGF0YVZlcnNpb246IG51bWJlcjsgLy8g0JLQtdGA0YHQuNGPINC00LDQvdC90YvRhVxuICBhcGlWZXJzaW9uOiBudW1iZXI7IC8vINCS0LXRgNGB0LjRjyBBUElcbiAgc2NoZW1hVmVyc2lvbjogbnVtYmVyOyAvLyDQktC10YDRgdC40Y8g0YHRhdC10Lxcbn1cblxuLyoqXG4gKiDQn9C+0LvRg9GH0LjRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INCy0LXRgNGB0LjRj9GFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZXJzaW9uSW5mbygpOiBWZXJzaW9uSW5mbyB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFja2FnZUpzb24gPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKTtcbiAgICByZXR1cm4ge1xuICAgICAgYXBwVmVyc2lvbjogcGFja2FnZUpzb24udmVyc2lvbiB8fCAnMS4wLjAnLFxuICAgICAgZGF0YVZlcnNpb246IEFQUF9EQVRBX1ZFUlNJT04sXG4gICAgICBhcGlWZXJzaW9uOiBBUElfVkVSU0lPTixcbiAgICAgIHNjaGVtYVZlcnNpb246IFNDSEVNQV9WRVJTSU9OLFxuICAgIH07XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB7XG4gICAgICBhcHBWZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZGF0YVZlcnNpb246IEFQUF9EQVRBX1ZFUlNJT04sXG4gICAgICBhcGlWZXJzaW9uOiBBUElfVkVSU0lPTixcbiAgICAgIHNjaGVtYVZlcnNpb246IFNDSEVNQV9WRVJTSU9OLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiDQktC10YDRgdC40L7QvdC40YDQvtCy0LDQvdC90YvQtSDQtNCw0L3QvdGL0LVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWZXJzaW9uZWREYXRhPFQgPSBhbnk+IHtcbiAgdmVyc2lvbjogbnVtYmVyO1xuICBkYXRhOiBUO1xuICBtaWdyYXRlZEF0PzogbnVtYmVyO1xuICBtaWdyYXRlZEZyb20/OiBudW1iZXI7XG59XG5cbi8qKlxuICog0KHQvtC30LTQsNGC0Ywg0LLQtdGA0YHQuNC+0L3QuNGA0L7QstCw0L3QvdGL0LUg0LTQsNC90L3Ri9C1XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWZXJzaW9uZWREYXRhPFQ+KGRhdGE6IFQsIHZlcnNpb246IG51bWJlciA9IEFQUF9EQVRBX1ZFUlNJT04pOiBWZXJzaW9uZWREYXRhPFQ+IHtcbiAgcmV0dXJuIHtcbiAgICB2ZXJzaW9uLFxuICAgIGRhdGEsXG4gICAgbWlncmF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgfTtcbn1cblxuLyoqXG4gKiDQn9GA0L7QstC10YDQuNGC0Ywg0L3Rg9C20L3QviDQu9C4INC80LjQs9GA0LjRgNC+0LLQsNGC0Ywg0LTQsNC90L3Ri9C1XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuZWVkc01pZ3JhdGlvbihjdXJyZW50VmVyc2lvbjogbnVtYmVyLCB0YXJnZXRWZXJzaW9uOiBudW1iZXIgPSBBUFBfREFUQV9WRVJTSU9OKTogYm9vbGVhbiB7XG4gIHJldHVybiBjdXJyZW50VmVyc2lvbiA8IHRhcmdldFZlcnNpb247XG59XG5cbi8qKlxuICog0J/QvtC70YPRh9C40YLRjCDQstC10YDRgdC40Y4g0LjQtyDRhdGA0LDQvdC40LvQuNGJ0LBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b3JlZFZlcnNpb24oc3RvcmFnZUtleTogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBBc3luY1N0b3JhZ2UgPSAoYXdhaXQgaW1wb3J0KCdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZScpKS5kZWZhdWx0O1xuICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShgJHtzdG9yYWdlS2V5fV92ZXJzaW9uYCk7XG4gICAgcmV0dXJuIHZlcnNpb24gPyBwYXJzZUludCh2ZXJzaW9uLCAxMCkgOiAxOyAvLyDQn9C+INGD0LzQvtC70YfQsNC90LjRjiDQstC10YDRgdC40Y8gMVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gMTtcbiAgfVxufVxuXG4vKipcbiAqINCh0L7RhdGA0LDQvdC40YLRjCDQstC10YDRgdC40Y4g0LIg0YXRgNCw0L3QuNC70LjRidC1XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RvcmVkVmVyc2lvbihzdG9yYWdlS2V5OiBzdHJpbmcsIHZlcnNpb246IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IEFzeW5jU3RvcmFnZSA9IChhd2FpdCBpbXBvcnQoJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJykpLmRlZmF1bHQ7XG4gICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oYCR7c3RvcmFnZUtleX1fdmVyc2lvbmAsIFN0cmluZyh2ZXJzaW9uKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgW3ZlcnNpb25pbmddIEZhaWxlZCB0byBzYXZlIHZlcnNpb24gZm9yICR7c3RvcmFnZUtleX06YCwgZXJyb3IpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7QUFNQSxPQUFPLElBQU1BLGdCQUFnQixHQUFHLENBQUM7QUFDakMsT0FBTyxJQUFNQyxXQUFXLEdBQUcsQ0FBQztBQUM1QixPQUFPLElBQU1DLGNBQWMsR0FBRyxDQUFDO0FBWS9CLE9BQU8sU0FBU0Ms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