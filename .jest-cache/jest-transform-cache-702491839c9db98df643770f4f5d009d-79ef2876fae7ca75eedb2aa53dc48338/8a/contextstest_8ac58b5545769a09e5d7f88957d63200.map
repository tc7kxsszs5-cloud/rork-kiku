{"version":3,"names":["React","render","waitFor","QueryClient","QueryClientProvider","jsxs","_jsxs","jsx","_jsx","describe","queryClient","beforeEach","defaultOptions","queries","retry","mutations","testContext","contextName","hookName","test","_asyncToGenerator","module","Provider","useHook","Array","isArray","default","_module$default","_slicedToArray","_module$default2","_module$default3","providerName","replace","console","warn","Object","keys","TestComponent","hook","children","hookError","error","_render","client","container","expect","toBeTruthy","timeout","errorMessage","Error","message","String","errorStack","stack","undefined"],"sources":["contexts.test.tsx"],"sourcesContent":["/**\n * Тесты всех контекстов\n * Использует динамические импорты для работы с ESM модулями\n */\n\nimport React from 'react';\nimport { render, waitFor } from '@testing-library/react-native';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\ndescribe('Контексты', () => {\n  let queryClient: QueryClient;\n\n  beforeEach(() => {\n    queryClient = new QueryClient({\n      defaultOptions: {\n        queries: { retry: false },\n        mutations: { retry: false },\n      },\n    });\n  });\n\n  const testContext = (contextName: string, hookName: string) => {\n    test(`${contextName} инициализируется без ошибок`, async () => {\n      try {\n        // Используем динамический import для ESM модулей\n        const module = await import(`@/constants/${contextName}`);\n        \n        // Определяем Provider и hook\n        let Provider: React.ComponentType<{ children: React.ReactNode }> | undefined;\n        let useHook: () => any | undefined;\n\n        // Пробуем разные варианты экспорта\n        if (Array.isArray(module.default)) {\n          // Для createContextHook: [Provider, useHook]\n          [Provider, useHook] = module.default;\n        } else {\n          // Для обычных экспортов\n          const providerName = `${contextName.replace('Context', '')}Provider`;\n          Provider = module[providerName] || module.Provider || module.default?.Provider;\n          useHook = module[hookName] || module.useHook || module.default?.[hookName];\n        }\n\n        if (!Provider || !useHook) {\n          console.warn(`⚠️  ${contextName} не экспортирует Provider или hook`);\n          console.warn(`   Доступные ключи:`, Object.keys(module));\n          return;\n        }\n\n        const TestComponent = () => {\n          try {\n            const hook = useHook();\n            return <div>Test - {hook ? 'Hook loaded' : 'Hook empty'}</div>;\n          } catch (hookError) {\n            console.error(`Hook error in ${contextName}:`, hookError);\n            return <div>Hook Error</div>;\n          }\n        };\n\n        const { container } = render(\n          <QueryClientProvider client={queryClient}>\n            <Provider>\n              <TestComponent />\n            </Provider>\n          </QueryClientProvider>\n        );\n\n        await waitFor(() => {\n          expect(container).toBeTruthy();\n        }, { timeout: 5000 });\n      } catch (error) {\n        // Более детальная информация об ошибке\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        const errorStack = error instanceof Error ? error.stack : undefined;\n        console.error(`Error testing ${contextName}:`, errorMessage, errorStack);\n        throw new Error(`${contextName} не работает: ${errorMessage}`);\n      }\n    });\n  };\n\n  // Тестируем основные контексты\n  testContext('ThemeContext', 'useThemeMode');\n  testContext('UserContext', 'useUser');\n  // Остальные контексты требуют больше зависимостей, тестируем основные\n});\n"],"mappings":"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","ignoreList":[]}