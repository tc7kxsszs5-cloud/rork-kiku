{"version":3,"names":["createContextHook","useState","useEffect","useCallback","useMemo","useRef","AsyncStorage","Location","Platform","HapticFeedback","isTimeRestricted","checkTimeRestricted","settingsSyncService","logger","handleErrorSilently","SETTINGS_STORAGE_KEY","SOS_ALERTS_STORAGE_KEY","CONTACTS_STORAGE_KEY","TIME_RESTRICTIONS_STORAGE_KEY","COMPLIANCE_LOG_STORAGE_KEY","DEFAULT_SETTINGS","timeRestrictionsEnabled","dailyUsageLimit","requireApprovalForNewContacts","blockUnknownContacts","imageFilteringEnabled","locationSharingEnabled","sosNotificationsEnabled","guardianEmails","guardianPhones","_createContextHook","_useState","_useState2","_slicedToArray","settings","setSettings","_useState3","_useState4","sosAlerts","setSosAlerts","_useState5","_useState6","contacts","setContacts","_useState7","_useState8","timeRestrictions","setTimeRestrictions","_useState9","_useState10","complianceLog","setComplianceLog","_useState11","_useState12","isLoading","setIsLoading","_useState13","_useState14","isSyncing","setIsSyncing","_useState15","_useState16","lastSyncTimestamp","setLastSyncTimestamp","_useState17","_useState18","syncError","setSyncError","isMountedRef","syncTimeoutRef","syncSettings","_asyncToGenerator","silent","arguments","length","undefined","current","initialize","syncResult","success","data","prev","Object","assign","getResult","getSettings","Date","now","info","context","action","error","Error","String","syncErr","isMounted","timer","loadData","_ref2","_yield$Promise$all","Promise","all","getItem","_yield$Promise$all2","settingsData","sosData","contactsData","restrictionsData","complianceData","JSON","parse","apply","OS","setTimeout","syncInterval","setInterval","clearTimeout","clearInterval","logCompliance","_ref3","userId","details","parentalConsent","log","id","Math","random","timestamp","updatedLog","concat","_toConsumableArray","slice","setItem","stringify","console","_x","_x2","_x3","updateSettings","_ref4","updates","updatedSettings","_x4","_x5","triggerSOS","_ref5","userName","chatId","message","location","_yield$Location$reque","requestForegroundPermissionsAsync","status","loc","getCurrentPositionAsync","lat","coords","latitude","lng","longitude","sosAlert","resolved","updatedAlerts","_x6","_x7","_x8","_x9","resolveSOS","_ref6","sosId","respondedBy","map","alert","respondedAt","_x10","_x11","addContact","_ref7","name","phone","email","isWhitelisted","contact","addedBy","addedAt","updatedContacts","contactId","_x12","_x13","_x14","_x15","removeContact","_ref8","filter","c","_x16","_x17","toggleContactWhitelist","_ref9","find","_x18","_x19","addTimeRestriction","_ref10","dayOfWeek","startHour","startMinute","endHour","endMinute","restriction","enabled","updatedRestrictions","_x20","_x21","_x22","_x23","_x24","_x25","removeTimeRestriction","_ref11","restrictionId","r","_x26","_x27","toggleTimeRestriction","_ref12","_x28","_x29","whitelistedContacts","unresolvedSOSAlerts","_createContextHook2","ParentalControlsProvider","useParentalControls"],"sources":["ParentalControlsContext.tsx"],"sourcesContent":["import createContextHook from '@nkzw/create-context-hook';\nimport { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as Location from 'expo-location';\nimport { Platform } from 'react-native';\nimport {\n  ParentalSettings,\n  SOSAlert,\n  Contact,\n  TimeRestriction,\n  ComplianceLog,\n} from './types';\nimport { HapticFeedback } from './haptics';\nimport { isTimeRestricted as checkTimeRestricted } from '@/utils/timeRestrictions';\nimport { settingsSyncService } from '@/utils/syncService';\nimport { logger } from '@/utils/logger';\nimport { handleErrorSilently, showUserFriendlyError } from '@/utils/errorHandler';\n\nconst SETTINGS_STORAGE_KEY = '@parental_settings';\nconst SOS_ALERTS_STORAGE_KEY = '@sos_alerts';\nconst CONTACTS_STORAGE_KEY = '@contacts';\nconst TIME_RESTRICTIONS_STORAGE_KEY = '@time_restrictions';\nconst COMPLIANCE_LOG_STORAGE_KEY = '@compliance_log';\n\nconst DEFAULT_SETTINGS: ParentalSettings = {\n  timeRestrictionsEnabled: false,\n  dailyUsageLimit: 180,\n  requireApprovalForNewContacts: true,\n  blockUnknownContacts: false,\n  imageFilteringEnabled: true,\n  locationSharingEnabled: true,\n  sosNotificationsEnabled: true,\n  guardianEmails: [],\n  guardianPhones: [],\n};\n\nexport const [ParentalControlsProvider, useParentalControls] = createContextHook(() => {\n  const [settings, setSettings] = useState<ParentalSettings>(DEFAULT_SETTINGS);\n  const [sosAlerts, setSosAlerts] = useState<SOSAlert[]>([]);\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [timeRestrictions, setTimeRestrictions] = useState<TimeRestriction[]>([]);\n  const [complianceLog, setComplianceLog] = useState<ComplianceLog[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [lastSyncTimestamp, setLastSyncTimestamp] = useState<number | null>(null);\n  const [syncError, setSyncError] = useState<Error | null>(null);\n  const isMountedRef = useRef(true);\n  const syncTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Функция синхронизации настроек\n  const syncSettings = useCallback(async (silent = false) => {\n    if (!isMountedRef.current || isSyncing) {\n      return;\n    }\n\n    if (!silent) {\n      setIsSyncing(true);\n    }\n    setSyncError(null);\n\n    try {\n      // Инициализируем сервис синхронизации\n      await settingsSyncService.initialize();\n\n      // 1. Синхронизация настроек - отправляем локальные данные\n      const syncResult = await settingsSyncService.syncSettings(settings);\n      if (syncResult.success && syncResult.data) {\n        // Обновляем настройки с сервера (merge: серверные перезаписывают локальные)\n        setSettings((prev) => ({\n          ...prev,\n          ...syncResult.data,\n        }));\n      }\n\n      // 2. Получение настроек с сервера\n      const getResult = await settingsSyncService.getSettings();\n      if (getResult.success && getResult.data) {\n        // Обновляем настройки с сервера (приоритет серверных для разрешения конфликтов)\n        setSettings((prev) => ({\n          ...prev,\n          ...getResult.data,\n        }));\n      }\n\n      setLastSyncTimestamp(Date.now());\n      logger.info('Settings sync completed successfully', { context: 'ParentalControlsContext', action: 'syncSettings' });\n    } catch (error) {\n      logger.error('Settings sync error occurred', error instanceof Error ? error : new Error(String(error)), { context: 'ParentalControlsContext', action: 'syncSettings' });\n      const syncErr = error instanceof Error ? error : new Error('Sync failed');\n      setSyncError(syncErr);\n    } finally {\n      if (!silent) {\n        setIsSyncing(false);\n      }\n    }\n  }, [settings, isSyncing]);\n\n  useEffect(() => {\n    let isMounted = true;\n    let timer: ReturnType<typeof setTimeout> | undefined;\n\n    const loadData = async () => {\n      try {\n        const [settingsData, sosData, contactsData, restrictionsData, complianceData] =\n          await Promise.all([\n            AsyncStorage.getItem(SETTINGS_STORAGE_KEY),\n            AsyncStorage.getItem(SOS_ALERTS_STORAGE_KEY),\n            AsyncStorage.getItem(CONTACTS_STORAGE_KEY),\n            AsyncStorage.getItem(TIME_RESTRICTIONS_STORAGE_KEY),\n            AsyncStorage.getItem(COMPLIANCE_LOG_STORAGE_KEY),\n          ]);\n\n        if (!isMounted) {\n          return;\n        }\n\n        if (settingsData) setSettings(JSON.parse(settingsData));\n        if (sosData) setSosAlerts(JSON.parse(sosData));\n        if (contactsData) setContacts(JSON.parse(contactsData));\n        if (restrictionsData) setTimeRestrictions(JSON.parse(restrictionsData));\n        if (complianceData) setComplianceLog(JSON.parse(complianceData));\n\n        // Первая синхронизация после загрузки данных\n        if (isMountedRef.current) {\n          await syncSettings(true); // Silent sync при загрузке\n        }\n      } catch (error) {\n        handleErrorSilently(error, 'ParentalControlsContext', { action: 'loadData' });\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    if (Platform.OS !== 'web') {\n      loadData();\n    } else {\n      timer = setTimeout(loadData, 0);\n    }\n\n    // Периодическая синхронизация каждые 60 секунд (настройки реже меняются)\n    const syncInterval = setInterval(() => {\n      if (isMountedRef.current && !isSyncing) {\n        syncSettings(true); // Silent периодическая синхронизация\n      }\n    }, 60000);\n\n    return () => {\n      isMounted = false;\n      isMountedRef.current = false;\n      if (timer) {\n        clearTimeout(timer);\n      }\n      clearInterval(syncInterval);\n      if (syncTimeoutRef.current) {\n        clearTimeout(syncTimeoutRef.current);\n      }\n    };\n  }, [syncSettings, isSyncing]);\n\n  const logCompliance = useCallback(\n    async (action: string, userId: string, details: Record<string, any>, parentalConsent = false) => {\n      const log: ComplianceLog = {\n        id: `log_${Date.now()}_${Math.random()}`,\n        action,\n        userId,\n        timestamp: Date.now(),\n        details,\n        parentalConsent,\n      };\n\n      const updatedLog = [log, ...complianceLog].slice(0, 1000);\n      setComplianceLog(updatedLog);\n      await AsyncStorage.setItem(COMPLIANCE_LOG_STORAGE_KEY, JSON.stringify(updatedLog));\n      console.log('Compliance logged:', action, userId);\n    },\n    [complianceLog]\n  );\n\n  const updateSettings = useCallback(\n    async (updates: Partial<ParentalSettings>, userId: string) => {\n      const updatedSettings = { ...settings, ...updates };\n      setSettings(updatedSettings);\n      await AsyncStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(updatedSettings));\n      await logCompliance('settings_update', userId, updates, true);\n      logger.info('Settings updated', { context: 'ParentalControlsContext', action: 'updateSettings', updates });\n\n      // Синхронизация после изменения настроек (debounce 2 секунды)\n      if (syncTimeoutRef.current) {\n        clearTimeout(syncTimeoutRef.current);\n      }\n      syncTimeoutRef.current = setTimeout(() => {\n        syncSettings(true); // Silent sync\n      }, 2000);\n    },\n    [settings, logCompliance, syncSettings]\n  );\n\n  const triggerSOS = useCallback(\n    async (userId: string, userName: string, chatId?: string, message?: string) => {\n      try {\n        HapticFeedback.error();\n        \n        let location: { lat: number; lng: number } | undefined;\n        \n        if (settings.locationSharingEnabled && Platform.OS !== 'web') {\n          const { status } = await Location.requestForegroundPermissionsAsync();\n          if (status === 'granted') {\n            const loc = await Location.getCurrentPositionAsync({});\n            location = {\n              lat: loc.coords.latitude,\n              lng: loc.coords.longitude,\n            };\n          }\n        }\n\n        const sosAlert: SOSAlert = {\n          id: `sos_${Date.now()}_${Math.random()}`,\n          userId,\n          userName,\n          chatId,\n          timestamp: Date.now(),\n          location,\n          message,\n          resolved: false,\n        };\n\n        const updatedAlerts = [sosAlert, ...sosAlerts];\n        setSosAlerts(updatedAlerts);\n        await AsyncStorage.setItem(SOS_ALERTS_STORAGE_KEY, JSON.stringify(updatedAlerts));\n        await logCompliance('sos_triggered', userId, { chatId, location, message }, false);\n\n        console.log('SOS alert triggered:', sosAlert);\n        return sosAlert;\n      } catch (error) {\n        console.error('Error triggering SOS:', error);\n        throw error;\n      }\n    },\n    [settings, sosAlerts, logCompliance]\n  );\n\n  const resolveSOS = useCallback(\n    async (sosId: string, respondedBy: string) => {\n      const updatedAlerts = sosAlerts.map((alert) =>\n        alert.id === sosId\n          ? { ...alert, resolved: true, respondedBy, respondedAt: Date.now() }\n          : alert\n      );\n      setSosAlerts(updatedAlerts);\n      await AsyncStorage.setItem(SOS_ALERTS_STORAGE_KEY, JSON.stringify(updatedAlerts));\n      HapticFeedback.success();\n      logger.info('SOS resolved', { context: 'ParentalControlsContext', action: 'resolveSOS', sosId });\n    },\n    [sosAlerts]\n  );\n\n  const addContact = useCallback(\n    async (\n      name: string,\n      userId: string,\n      phone?: string,\n      email?: string,\n      isWhitelisted = true\n    ) => {\n      const contact: Contact = {\n        id: `contact_${Date.now()}_${Math.random()}`,\n        name,\n        phone,\n        email,\n        isWhitelisted,\n        addedBy: userId,\n        addedAt: Date.now(),\n      };\n\n      const updatedContacts = [...contacts, contact];\n      setContacts(updatedContacts);\n      await AsyncStorage.setItem(CONTACTS_STORAGE_KEY, JSON.stringify(updatedContacts));\n      await logCompliance('contact_added', userId, { contactId: contact.id, name }, true);\n      console.log('Contact added:', contact);\n      return contact;\n    },\n    [contacts, logCompliance]\n  );\n\n  const removeContact = useCallback(\n    async (contactId: string, userId: string) => {\n      const updatedContacts = contacts.filter((c) => c.id !== contactId);\n      setContacts(updatedContacts);\n      await AsyncStorage.setItem(CONTACTS_STORAGE_KEY, JSON.stringify(updatedContacts));\n      await logCompliance('contact_removed', userId, { contactId }, true);\n      logger.info('Contact removed', { context: 'ParentalControlsContext', action: 'removeContact', contactId });\n    },\n    [contacts, logCompliance]\n  );\n\n  const toggleContactWhitelist = useCallback(\n    async (contactId: string, userId: string) => {\n      const updatedContacts = contacts.map((c) =>\n        c.id === contactId ? { ...c, isWhitelisted: !c.isWhitelisted } : c\n      );\n      setContacts(updatedContacts);\n      await AsyncStorage.setItem(CONTACTS_STORAGE_KEY, JSON.stringify(updatedContacts));\n      const contact = updatedContacts.find((c) => c.id === contactId);\n      await logCompliance(\n        'contact_whitelist_toggle',\n        userId,\n        { contactId, isWhitelisted: contact?.isWhitelisted },\n        true\n      );\n    },\n    [contacts, logCompliance]\n  );\n\n  const addTimeRestriction = useCallback(\n    async (\n      userId: string,\n      dayOfWeek: number,\n      startHour: number,\n      startMinute: number,\n      endHour: number,\n      endMinute: number\n    ) => {\n      const restriction: TimeRestriction = {\n        id: `restriction_${Date.now()}_${Math.random()}`,\n        userId,\n        dayOfWeek,\n        startHour,\n        startMinute,\n        endHour,\n        endMinute,\n        enabled: true,\n      };\n\n      const updatedRestrictions = [...timeRestrictions, restriction];\n      setTimeRestrictions(updatedRestrictions);\n      await AsyncStorage.setItem(\n        TIME_RESTRICTIONS_STORAGE_KEY,\n        JSON.stringify(updatedRestrictions)\n      );\n      await logCompliance('time_restriction_added', userId, restriction, true);\n      return restriction;\n    },\n    [timeRestrictions, logCompliance]\n  );\n\n  const removeTimeRestriction = useCallback(\n    async (restrictionId: string, userId: string) => {\n      const updatedRestrictions = timeRestrictions.filter((r) => r.id !== restrictionId);\n      setTimeRestrictions(updatedRestrictions);\n      await AsyncStorage.setItem(\n        TIME_RESTRICTIONS_STORAGE_KEY,\n        JSON.stringify(updatedRestrictions)\n      );\n      await logCompliance('time_restriction_removed', userId, { restrictionId }, true);\n    },\n    [timeRestrictions, logCompliance]\n  );\n\n  const toggleTimeRestriction = useCallback(\n    async (restrictionId: string, userId: string) => {\n      const updatedRestrictions = timeRestrictions.map((r) =>\n        r.id === restrictionId ? { ...r, enabled: !r.enabled } : r\n      );\n      setTimeRestrictions(updatedRestrictions);\n      await AsyncStorage.setItem(\n        TIME_RESTRICTIONS_STORAGE_KEY,\n        JSON.stringify(updatedRestrictions)\n      );\n    },\n    [timeRestrictions]\n  );\n\n  const isTimeRestricted = useCallback(() => {\n    if (!settings.timeRestrictionsEnabled) return false;\n\n    // Используем чистую функцию для тестируемости\n    return checkTimeRestricted(timeRestrictions, new Date());\n  }, [settings, timeRestrictions]);\n\n  const whitelistedContacts = useMemo(\n    () => contacts.filter((c) => c.isWhitelisted),\n    [contacts]\n  );\n\n  const unresolvedSOSAlerts = useMemo(\n    () => sosAlerts.filter((alert) => !alert.resolved),\n    [sosAlerts]\n  );\n\n  return useMemo(\n    () => ({\n      settings,\n      sosAlerts,\n      unresolvedSOSAlerts,\n      contacts,\n      whitelistedContacts,\n      timeRestrictions,\n      complianceLog,\n      isLoading,\n      isSyncing,\n      lastSyncTimestamp,\n      syncError,\n      updateSettings,\n      triggerSOS,\n      resolveSOS,\n      addContact,\n      removeContact,\n      toggleContactWhitelist,\n      addTimeRestriction,\n      removeTimeRestriction,\n      toggleTimeRestriction,\n      isTimeRestricted,\n      logCompliance,\n      syncSettings, // Функция для ручной синхронизации\n    }),\n    [\n      settings,\n      sosAlerts,\n      unresolvedSOSAlerts,\n      contacts,\n      whitelistedContacts,\n      timeRestrictions,\n      complianceLog,\n      isLoading,\n      isSyncing,\n      lastSyncTimestamp,\n      syncError,\n      updateSettings,\n      triggerSOS,\n      resolveSOS,\n      addContact,\n      removeContact,\n      toggleContactWhitelist,\n      addTimeRestriction,\n      removeTimeRestriction,\n      toggleTimeRestriction,\n      isTimeRestricted,\n      logCompliance,\n      syncSettings,\n    ]\n  );\n});\n"],"mappings":"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","ignoreList":[]}