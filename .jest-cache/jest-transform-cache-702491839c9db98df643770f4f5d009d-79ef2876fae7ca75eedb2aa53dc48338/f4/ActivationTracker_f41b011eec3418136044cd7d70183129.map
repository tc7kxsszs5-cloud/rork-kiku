{"version":3,"names":["useEffect","Platform","useAnalytics","trackInstall","trackFirstLaunch","trackSession","isFirstLaunch","isActivated","ActivationTracker","cov_pr160okvr","f","_ref","s","trackEvent","OS","b","trackAppLaunch","_ref2","_asyncToGenerator","installDate","firstLaunch","timestamp","isFirst","Date","now","activated","error","console","apply","arguments"],"sources":["ActivationTracker.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { Platform } from 'react-native';\nimport { useAnalytics } from '@/constants/AnalyticsContext';\nimport { trackInstall, trackFirstLaunch, trackSession, isFirstLaunch, isActivated } from '@/utils/activationTracking';\n\n/**\n * Компонент для отслеживания активации и сессий\n * Должен быть внутри AnalyticsProvider\n */\nexport function ActivationTracker() {\n  const { trackEvent } = useAnalytics();\n\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      return;\n    }\n\n    const trackAppLaunch = async () => {\n      try {\n        const installDate = await trackInstall();\n        const firstLaunch = await trackFirstLaunch();\n        await trackSession();\n        \n        // Трекинг событий\n        if (installDate) {\n          trackEvent('app_installed', { timestamp: installDate });\n        }\n        \n        const isFirst = await isFirstLaunch();\n        if (isFirst && firstLaunch) {\n          trackEvent('app_first_launch', { timestamp: firstLaunch });\n        }\n        \n        trackEvent('session_started', { timestamp: Date.now() });\n        \n        // Проверка активации (если пользователь уже активирован, но событие не отправлено)\n        const activated = await isActivated();\n        if (activated) {\n          trackEvent('user_activated', { timestamp: Date.now() });\n        }\n      } catch (error) {\n        console.error('[ActivationTracker] Failed to track app launch:', error);\n      }\n    };\n\n    trackAppLaunch();\n  }, [trackEvent]);\n\n  return null;\n}\n"],"mappings":"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","ignoreList":[]}