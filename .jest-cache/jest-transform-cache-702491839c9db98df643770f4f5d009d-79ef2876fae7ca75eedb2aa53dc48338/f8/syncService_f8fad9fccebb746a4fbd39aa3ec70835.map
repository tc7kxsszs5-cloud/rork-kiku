{"version":3,"names":["AsyncStorage","trpcVanillaClient","logger","getDeviceId","_getDeviceId","apply","arguments","_asyncToGenerator","cov_202wj1zud2","f","stored","s","getItem","b","deviceId","Date","now","Math","random","toString","substr","setItem","getLastSyncTimestamp","_x","_getLastSyncTimestamp","key","parseInt","setLastSyncTimestamp","_x2","_x3","_setLastSyncTimestamp","timestamp","isTimeoutError","error","Error","name","message","includes","isRetryableError","withRetry","_x4","_withRetry","fn","maxRetries","length","undefined","initialDelay","context","lastError","_loop","v","attempt","delay","pow","warn","Object","assign","component","action","String","Promise","resolve","setTimeout","_ret","ChatSyncService","_classCallCheck","lastSyncKey","initialized","_createClass","value","_initialize","initialize","_syncChats","chats","lastSync","result","sync","mutate","lastSyncTimestamp","chatsCount","success","info","data","errorMessage","isTimeout","syncChats","_x5","_getChats","get","query","getChats","AlertSyncService","_initialize2","_syncAlerts","alerts","alertsCount","syncAlerts","_x6","_getAlerts","getAlerts","SettingsSyncService","_initialize3","_syncSettings","settings","syncSettings","_x7","_getSettings","getSettings","chatSyncService","alertSyncService","settingsSyncService"],"sources":["syncService.ts"],"sourcesContent":["/**\n * Sync Service for chats, alerts, and settings\n * Handles synchronization between local storage and backend\n */\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Chat, Alert, ParentalSettings } from '@/constants/types';\nimport { trpcVanillaClient } from '@/lib/trpc';\nimport { logger } from '@/utils/logger';\n\nexport interface SyncResult<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\n/**\n * Get or create device ID\n */\nasync function getDeviceId(): Promise<string> {\n  const stored = await AsyncStorage.getItem('@device_id');\n  if (stored) {\n    return stored;\n  }\n  \n  const deviceId = `device_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  await AsyncStorage.setItem('@device_id', deviceId);\n  return deviceId;\n}\n\n/**\n * Get last sync timestamp\n */\nasync function getLastSyncTimestamp(key: string): Promise<number | null> {\n  const stored = await AsyncStorage.getItem(key);\n  return stored ? parseInt(stored, 10) : null;\n}\n\n/**\n * Set last sync timestamp\n */\nasync function setLastSyncTimestamp(key: string, timestamp: number): Promise<void> {\n  await AsyncStorage.setItem(key, timestamp.toString());\n}\n\n/**\n * Check if error is a timeout/network error\n */\nfunction isTimeoutError(error: unknown): boolean {\n  if (error instanceof Error) {\n    return (\n      error.name === 'AbortError' ||\n      error.message.includes('timeout') ||\n      error.message.includes('Timeout') ||\n      error.message.includes('network') ||\n      error.message.includes('Network') ||\n      error.message.includes('fetch failed') ||\n      error.message.includes('Failed to fetch')\n    );\n  }\n  return false;\n}\n\n/**\n * Check if error is retryable (network/timeout errors)\n */\nfunction isRetryableError(error: unknown): boolean {\n  if (error instanceof Error) {\n    // Retry on timeout, network errors, and 5xx server errors\n    return (\n      isTimeoutError(error) ||\n      error.message.includes('ECONNREFUSED') ||\n      error.message.includes('ENOTFOUND') ||\n      error.message.includes('ETIMEDOUT') ||\n      error.message.includes('500') ||\n      error.message.includes('502') ||\n      error.message.includes('503') ||\n      error.message.includes('504')\n    );\n  }\n  return false;\n}\n\n/**\n * Retry function with exponential backoff\n */\nasync function withRetry<T>(\n  fn: () => Promise<T>,\n  maxRetries: number = 3,\n  initialDelay: number = 1000,\n  context?: { component: string; action: string; [key: string]: unknown }\n): Promise<T> {\n  let lastError: Error | unknown;\n  \n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error;\n      \n      // Don't retry on last attempt or if error is not retryable\n      if (attempt === maxRetries - 1 || !isRetryableError(error)) {\n        throw error;\n      }\n      \n      // Calculate exponential backoff delay\n      const delay = initialDelay * Math.pow(2, attempt);\n      \n      logger.warn('Sync retry attempt', {\n        component: context?.component || 'SyncService',\n        action: context?.action || 'sync',\n        attempt: attempt + 1,\n        maxRetries,\n        delay,\n        error: error instanceof Error ? error.message : String(error),\n        ...context,\n      });\n      \n      // Wait before retry\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  \n  throw lastError || new Error('Max retries exceeded');\n}\n\n/**\n * Chat Sync Service\n */\nclass ChatSyncService {\n  private readonly lastSyncKey = '@chats_last_sync';\n  private initialized = false;\n\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n    this.initialized = true;\n  }\n\n  async syncChats(chats: Chat[]): Promise<SyncResult<Chat[]>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n      const lastSync = await getLastSyncTimestamp(this.lastSyncKey);\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.chats.sync.mutate({\n          deviceId,\n          chats: chats as any,\n          lastSyncTimestamp: lastSync || 0,\n        }),\n        3,\n        1000,\n        { component: 'ChatSyncService', action: 'syncChats', deviceId, chatsCount: chats.length }\n      );\n\n      if (result.success && result.chats) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Chats synced successfully', {\n          component: 'ChatSyncService',\n          action: 'syncChats',\n          deviceId,\n          chatsCount: result.chats.length,\n        });\n        return { success: true, data: result.chats as Chat[] };\n      }\n\n      return { success: false, error: 'Sync failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Chat sync failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'ChatSyncService',\n        action: 'syncChats',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Синхронизация прервана из-за таймаута. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n\n  async getChats(): Promise<SyncResult<Chat[]>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n      const lastSync = await getLastSyncTimestamp(this.lastSyncKey);\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.chats.get.query({\n          deviceId,\n          lastSyncTimestamp: lastSync || 0,\n        }),\n        3,\n        1000,\n        { component: 'ChatSyncService', action: 'getChats', deviceId }\n      );\n\n      if (result && result.chats) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Chats retrieved successfully', {\n          component: 'ChatSyncService',\n          action: 'getChats',\n          deviceId,\n          chatsCount: result.chats.length,\n        });\n        return { success: true, data: result.chats as Chat[] };\n      }\n\n      return { success: false, error: 'Get failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Get chats failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'ChatSyncService',\n        action: 'getChats',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Не удалось загрузить чаты. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n}\n\n/**\n * Alert Sync Service\n */\nclass AlertSyncService {\n  private readonly lastSyncKey = '@alerts_last_sync';\n  private initialized = false;\n\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n    this.initialized = true;\n  }\n\n  async syncAlerts(alerts: Alert[]): Promise<SyncResult<Alert[]>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n      const lastSync = await getLastSyncTimestamp(this.lastSyncKey);\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.alerts.sync.mutate({\n          deviceId,\n          alerts: alerts as any,\n          lastSyncTimestamp: lastSync || 0,\n        }),\n        3,\n        1000,\n        { component: 'AlertSyncService', action: 'syncAlerts', deviceId, alertsCount: alerts.length }\n      );\n\n      if (result.success && result.alerts) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Alerts synced successfully', {\n          component: 'AlertSyncService',\n          action: 'syncAlerts',\n          deviceId,\n          alertsCount: result.alerts.length,\n        });\n        return { success: true, data: result.alerts as Alert[] };\n      }\n\n      return { success: false, error: 'Sync failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Alert sync failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'AlertSyncService',\n        action: 'syncAlerts',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Синхронизация предупреждений прервана из-за таймаута. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n\n  async getAlerts(): Promise<SyncResult<Alert[]>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n      const lastSync = await getLastSyncTimestamp(this.lastSyncKey);\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.alerts.get.query({\n          deviceId,\n          lastSyncTimestamp: lastSync || 0,\n        }),\n        3,\n        1000,\n        { component: 'AlertSyncService', action: 'getAlerts', deviceId }\n      );\n\n      if (result && result.alerts) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Alerts retrieved successfully', {\n          component: 'AlertSyncService',\n          action: 'getAlerts',\n          deviceId,\n          alertsCount: result.alerts.length,\n        });\n        return { success: true, data: result.alerts };\n      }\n\n      return { success: false, error: 'Get failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Get alerts failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'AlertSyncService',\n        action: 'getAlerts',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Не удалось загрузить предупреждения. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n}\n\n/**\n * Settings Sync Service\n */\nclass SettingsSyncService {\n  private readonly lastSyncKey = '@settings_last_sync';\n  private initialized = false;\n\n  async initialize(): Promise<void> {\n    if (this.initialized) return;\n    this.initialized = true;\n  }\n\n  async syncSettings(settings: ParentalSettings): Promise<SyncResult<ParentalSettings>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n      const lastSync = await getLastSyncTimestamp(this.lastSyncKey);\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.settings.sync.mutate({\n          deviceId,\n          settings,\n          lastSyncTimestamp: lastSync || 0,\n        }),\n        3,\n        1000,\n        { component: 'SettingsSyncService', action: 'syncSettings', deviceId }\n      );\n\n      if (result.success && result.settings) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Settings synced successfully', {\n          component: 'SettingsSyncService',\n          action: 'syncSettings',\n          deviceId,\n        });\n        return { success: true, data: result.settings };\n      }\n\n      return { success: false, error: 'Sync failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Settings sync failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'SettingsSyncService',\n        action: 'syncSettings',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Синхронизация настроек прервана из-за таймаута. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n\n  async getSettings(): Promise<SyncResult<ParentalSettings>> {\n    try {\n      await this.initialize();\n      const deviceId = await getDeviceId();\n\n      const result = await withRetry(\n        () => trpcVanillaClient.sync.settings.get.query({\n          deviceId,\n        }),\n        3,\n        1000,\n        { component: 'SettingsSyncService', action: 'getSettings', deviceId }\n      );\n\n      if (result && result.settings) {\n        await setLastSyncTimestamp(this.lastSyncKey, Date.now());\n        logger.info('Settings retrieved successfully', {\n          component: 'SettingsSyncService',\n          action: 'getSettings',\n          deviceId,\n        });\n        return { success: true, data: result.settings };\n      }\n\n      return { success: false, error: 'Get failed' };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      const isTimeout = isTimeoutError(error);\n      \n      logger.error('Get settings failed', error instanceof Error ? error : new Error(errorMessage), {\n        component: 'SettingsSyncService',\n        action: 'getSettings',\n        isTimeout,\n        errorMessage,\n      });\n      \n      return {\n        success: false,\n        error: isTimeout \n          ? 'Не удалось загрузить настройки. Проверьте подключение к интернету.'\n          : errorMessage,\n      };\n    }\n  }\n}\n\n// Export singleton instances\nexport const chatSyncService = new ChatSyncService();\nexport const alertSyncService = new AlertSyncService();\nexport const settingsSyncService = new SettingsSyncService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}