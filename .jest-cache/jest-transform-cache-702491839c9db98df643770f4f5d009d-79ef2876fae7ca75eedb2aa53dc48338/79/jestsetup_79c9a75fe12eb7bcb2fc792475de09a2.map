{"version":3,"names":["_getJestObj","mock","virtual","requireNativeViewManager","jest","fn","NativeModulesProxy","EventEmitter","Platform","OS","React","require","mockIcon","forwardRef","props","ref","createElement","Object","assign","testID","Proxy","get","target","prop","mockReact","select","dict","ios","default","View","_ref","children","_objectWithoutProperties2","_excluded","Text","_ref2","_excluded2","TouchableOpacity","_ref3","onPress","_excluded3","StyleSheet","create","styles","expoConfig","extra","executionEnvironment","getItemAsync","Promise","resolve","setItemAsync","deleteItemAsync","getItem","setItem","removeItem","clear","getAllKeys","multiGet","multiSet","multiRemove","getPermissionsAsync","status","requestPermissionsAsync","scheduleNotificationAsync","cancelScheduledNotificationAsync","getAllScheduledNotificationsAsync","setNotificationHandler","setNotificationChannelAsync","AndroidNotificationPriority","MIN","LOW","DEFAULT","HIGH","MAX","AndroidImportance","getCurrentPositionAsync","coords","latitude","longitude","altitude","accuracy","altitudeAccuracy","heading","speed","timestamp","Date","now","requestForegroundPermissionsAsync","useRouter","push","replace","back","usePathname","useSegments","useGlobalSearchParams","useLocalSearchParams","Link","_ref4","Stack","Screen","Tabs","_interopRequireDefault","_require","global","fetch","ok","json","text","setTimeout"],"sources":["jest.setup.js"],"sourcesContent":["// Jest setup file for React Native / Expo\n// Этот файл выполняется перед каждым тестом\n\n// КРИТИЧЕСКИЙ МОК: Должен быть ДО всех других импортов\n// Мок для expo-modules-core/src/polyfill/dangerous-internal.ts (ESM проблема)\njest.mock('expo-modules-core/src/polyfill/dangerous-internal', () => ({}), { virtual: true });\njest.mock('expo-modules-core/src/polyfill/dangerous-internal.ts', () => ({}), { virtual: true });\n\n// Общий мок для expo-modules-core\njest.mock('expo-modules-core', () => ({\n  requireNativeViewManager: jest.fn(),\n  NativeModulesProxy: {},\n  EventEmitter: jest.fn(),\n  Platform: {\n    OS: 'ios',\n  },\n}));\n\n// Мок для lucide-react-native (ESM проблема)\njest.mock('lucide-react-native', () => {\n  const React = require('react');\n  const mockIcon = React.forwardRef((props, ref) => \n    React.createElement('View', { ...props, ref, testID: props.testID || 'mock-icon' })\n  );\n  \n  return new Proxy({}, {\n    get: (target, prop) => {\n      if (prop === '__esModule') return true;\n      if (prop === 'default') return mockIcon;\n      return mockIcon;\n    }\n  });\n});\n\n// Моки для React Native модулей (require внутри factory — Jest sandbox)\njest.mock('react-native', () => {\n  const mockReact = require('react');\n  return {\n    Platform: {\n      OS: 'ios',\n      select: (dict) => dict.ios || dict.default,\n    },\n    View: ({ children, testID, ...props }) =>\n      mockReact.createElement('View', { testID, ...props }, children),\n    Text: ({ children, testID, ...props }) =>\n      mockReact.createElement('Text', { testID, ...props }, children),\n    TouchableOpacity: ({ children, onPress, testID, ...props }) =>\n      mockReact.createElement('TouchableOpacity', { onPress, testID, ...props }, children),\n    StyleSheet: {\n      create: (styles) => styles,\n    },\n  };\n});\n\n// Мок для Expo модулей\njest.mock('expo-constants', () => ({\n  expoConfig: {\n    extra: {},\n  },\n  executionEnvironment: 'storeClient',\n}));\n\njest.mock('expo-secure-store', () => ({\n  getItemAsync: jest.fn(() => Promise.resolve(null)),\n  setItemAsync: jest.fn(() => Promise.resolve()),\n  deleteItemAsync: jest.fn(() => Promise.resolve()),\n}));\n\njest.mock('@react-native-async-storage/async-storage', () => {\n  const mock = {\n    getItem: jest.fn(() => Promise.resolve(null)),\n    setItem: jest.fn(() => Promise.resolve()),\n    removeItem: jest.fn(() => Promise.resolve()),\n    clear: jest.fn(() => Promise.resolve()),\n    getAllKeys: jest.fn(() => Promise.resolve([])),\n    multiGet: jest.fn(() => Promise.resolve([])),\n    multiSet: jest.fn(() => Promise.resolve()),\n    multiRemove: jest.fn(() => Promise.resolve()),\n  };\n  return { ...mock, default: mock };\n});\n\njest.mock('expo-notifications', () => ({\n  getPermissionsAsync: jest.fn(() => Promise.resolve({ status: 'granted' })),\n  requestPermissionsAsync: jest.fn(() => Promise.resolve({ status: 'granted' })),\n  scheduleNotificationAsync: jest.fn(() => Promise.resolve('notification-id')),\n  cancelScheduledNotificationAsync: jest.fn(() => Promise.resolve()),\n  getAllScheduledNotificationsAsync: jest.fn(() => Promise.resolve([])),\n  setNotificationHandler: jest.fn(),\n  setNotificationChannelAsync: jest.fn(() => Promise.resolve()),\n  AndroidNotificationPriority: {\n    MIN: 'min',\n    LOW: 'low',\n    DEFAULT: 'default',\n    HIGH: 'high',\n    MAX: 'max',\n  },\n  AndroidImportance: {\n    MIN: 'min',\n    LOW: 'low',\n    DEFAULT: 'default',\n    HIGH: 'high',\n    MAX: 'max',\n  },\n}));\n\njest.mock('expo-location', () => ({\n  getCurrentPositionAsync: jest.fn(() =>\n    Promise.resolve({\n      coords: {\n        latitude: 55.7558,\n        longitude: 37.6173,\n        altitude: null,\n        accuracy: 10,\n        altitudeAccuracy: null,\n        heading: null,\n        speed: null,\n      },\n      timestamp: Date.now(),\n    })\n  ),\n  requestForegroundPermissionsAsync: jest.fn(() =>\n    Promise.resolve({ status: 'granted' })\n  ),\n}));\n\n// Мок для expo-router\njest.mock('expo-router', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n  }),\n  usePathname: () => '/',\n  useSegments: () => [],\n  useGlobalSearchParams: () => ({}),\n  useLocalSearchParams: () => ({}),\n  Link: ({ children }) => children,\n  Stack: {\n    Screen: () => null,\n  },\n  Tabs: {\n    Screen: () => null,\n  },\n}));\n\n// Глобальные моки\nglobal.fetch = jest.fn(() =>\n  Promise.resolve({\n    ok: true,\n    status: 200,\n    json: () => Promise.resolve({}),\n    text: () => Promise.resolve(''),\n  })\n);\n\n// Увеличиваем timeout для async операций\nif (typeof jest !== 'undefined') {\n  jest.setTimeout(10000);\n}\n\n// Подавляем console.warn в тестах (можно включить для отладки)\n// global.console = {\n//   ...console,\n//   warn: jest.fn(),\n//   error: jest.fn(),\n// };\n"],"mappings":"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","ignoreList":[]}