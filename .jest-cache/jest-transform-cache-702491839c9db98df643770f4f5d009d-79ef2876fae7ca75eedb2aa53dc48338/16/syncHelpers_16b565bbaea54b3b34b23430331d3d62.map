{"version":3,"names":["getDeltaAlerts","allAlerts","lastSyncTimestamp","filter","alert","timestamp","getDeltaChats","allChats","chat","updatedAt"],"sources":["syncHelpers.ts"],"sourcesContent":["/**\n * Утилиты для синхронизации данных\n * \n * Чистые детерминированные функции для incremental sync.\n * Используются в backend tRPC routes для синхронизации алертов и чатов.\n */\n\n/**\n * Получает только измененные алерты после lastSyncTimestamp (incremental sync)\n * \n * @param allAlerts - Все алерты\n * @param lastSyncTimestamp - Timestamp последней синхронизации\n * @returns Массив алертов, измененных после lastSyncTimestamp\n */\nexport function getDeltaAlerts(allAlerts: Array<{ timestamp?: number }>, lastSyncTimestamp: number): Array<{ timestamp?: number }> {\n  return allAlerts.filter((alert) => (alert.timestamp || 0) > lastSyncTimestamp);\n}\n\n/**\n * Получает только измененные чаты после lastSyncTimestamp (incremental sync)\n * \n * @param allChats - Все чаты\n * @param lastSyncTimestamp - Timestamp последней синхронизации\n * @returns Массив чатов, измененных после lastSyncTimestamp\n */\nexport function getDeltaChats(\n  allChats: Array<{ updatedAt?: number; timestamp?: number }>,\n  lastSyncTimestamp: number\n): Array<{ updatedAt?: number; timestamp?: number }> {\n  return allChats.filter((chat) => {\n    // Возвращаем чат, если он был изменен после lastSyncTimestamp\n    return (chat.updatedAt || chat.timestamp || 0) > lastSyncTimestamp;\n  });\n}\n"],"mappings":";;;;;AAcO,SAASA,cAAcA,CAACC,SAAwC,EAAEC,iBAAyB,EAAiC;EACjI,OAAOD,SAAS,CAACE,MAAM,CAAC,UAACC,KAAK;IAAA,OAAK,CAACA,KAAK,CAACC,SAAS,IAAI,CAAC,IAAIH,iBAAiB;EAAA,EAAC;AAChF;AASO,SAASI,aAAaA,CAC3BC,QAA2D,EAC3DL,iBAAyB,EAC0B;EACnD,OAAOK,QAAQ,CAACJ,MAAM,CAAC,UAACK,IAAI,EAAK;IAE/B,OAAO,CAACA,IAAI,CAACC,SAAS,IAAID,IAAI,CAACH,SAAS,IAAI,CAAC,IAAIH,iBAAiB;EACpE,CAAC,CAAC;AACJ","ignoreList":[]}