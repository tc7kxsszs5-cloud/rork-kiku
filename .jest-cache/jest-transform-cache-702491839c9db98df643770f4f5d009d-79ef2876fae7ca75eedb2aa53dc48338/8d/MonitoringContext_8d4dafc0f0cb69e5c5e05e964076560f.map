{"version":3,"names":["createContextHook","useState","useCallback","useMemo","useEffect","useRef","MOCK_CHATS","INITIAL_MESSAGES","HapticFeedback","Notifications","Platform","useAnalytics","getSoundForRiskLevel","getAndroidPriorityForRiskLevel","getChannelIdForRiskLevel","setupNotificationChannels","analyzeMessageWithAI","analyzeImageWithAI","usePersonalizedAI","evaluateMessageRisk","evaluateImageRisk","chatSyncService","alertSyncService","trpcVanillaClient","useUser","logger","handleErrorSilently","LEVEL_ORDER","cov_2dbiypliv5","s","SIMULATED_DELAY_MS","simulateLatency","f","Promise","resolve","setTimeout","mergeChatsWithServer","localChats","serverChats","chatMap","Map","forEach","chat","set","id","localChat","serverChat","get","b","localLastActivity","lastActivity","serverLastActivity","mergedMessages","mergeMessages","messages","Object","assign","Array","from","values","serverMessages","localMessages","messageMap","msg","existing","timestamp","sort","a","mergeAlertsWithServer","localAlerts","serverAlerts","alertMap","alert","_ref","_ref3","_ref4","_slicedToArray","chats","setChats","_ref5","_ref6","alerts","setAlerts","_ref7","_ref8","isAnalyzing","setIsAnalyzing","_ref9","_ref10","isSyncing","setIsSyncing","_ref11","_ref12","lastSyncTimestamp","setLastSyncTimestamp","_ref13","_ref14","syncError","setSyncError","isMountedRef","syncTimeoutRef","_ref15","trackEvent","_ref16","personalizeAnalysis","_ref17","user","syncData","_asyncToGenerator","silent","arguments","length","undefined","current","initialize","chatsResult","syncChats","success","data","mergedChats","serverChatsResult","getChats","alertsResult","syncAlerts","mergedAlerts","serverAlertsResult","getAlerts","Date","now","info","context","error","Error","String","action","syncErr","message","OS","catch","initialSync","_ref19","apply","interval","setInterval","clearInterval","clearTimeout","analyzeMessage","_ref20","aiAnalysis","text","useAdvancedAI","confidenceThreshold","_x","analyzeImage","_ref21","imageUri","enableImageAnalysis","blocked","reasons","console","_x2","addMessage","_ref22","chatId","senderId","senderName","newMessage","Math","random","analyzed","imageAnalyzed","imageBlocked","prev","map","concat","_toConsumableArray","updatedAt","hasImage","analysis","personalizedAnalysis","imageAnalysis","riskLevel","warning","updatedMessages","riskReasons","imageRiskReasons","levels","highestRisk","reduce","max","msgLevel","indexOf","shouldAlert","imageRisk","newAlert","messageId","resolved","prevAlerts","alertId","riskLevelLabels","safe","low","medium","high","critical","title","chatName","isGroup","groupName","participantNames","join","body","sound","channelId","priority","scheduleNotificationAsync","content","type","trigger","notifications","sendRiskAlertPush","mutate","userId","backendError","warn","overallRisk","_x3","_x4","_x5","_x6","_x7","initializeChatMessages","resolveAlert","updated","resolvedAlert","find","unresolvedAlerts","filter","criticalAlerts","_ref2","MonitoringProvider","useMonitoring"],"sources":["MonitoringContext.tsx"],"sourcesContent":["import createContextHook from '@nkzw/create-context-hook';\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react';\nimport { Chat, Message, Alert, RiskLevel, RiskAnalysis } from '@/constants/types';\nimport { MOCK_CHATS, INITIAL_MESSAGES } from '@/constants/mockData';\nimport { HapticFeedback } from '@/constants/haptics';\nimport * as Notifications from 'expo-notifications';\nimport { Platform } from 'react-native';\nimport { useAnalytics } from './AnalyticsContext';\nimport {\n  getSoundForRiskLevel,\n  getAndroidPriorityForRiskLevel,\n  getChannelIdForRiskLevel,\n  setupNotificationChannels,\n} from '@/utils/soundNotifications';\nimport { analyzeMessageWithAI, analyzeImageWithAI } from './AIModerationService';\nimport { usePersonalizedAI } from './PersonalizedAIContext';\nimport { evaluateMessageRisk, evaluateImageRisk } from '@/utils/riskEvaluation';\nimport { chatSyncService, alertSyncService } from '@/utils/syncService';\nimport { trpcVanillaClient } from '@/lib/trpc';\nimport { useUser } from './UserContext';\nimport { logger } from '@/utils/logger';\nimport { handleErrorSilently, showUserFriendlyError } from '@/utils/errorHandler';\n\nconst LEVEL_ORDER: RiskLevel[] = ['safe', 'low', 'medium', 'high', 'critical'];\n\nconst SIMULATED_DELAY_MS = 120;\n\nconst simulateLatency = () => new Promise<void>((resolve) => setTimeout(resolve, SIMULATED_DELAY_MS));\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è merge —á–∞—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)\nconst mergeChatsWithServer = (localChats: Chat[], serverChats: Chat[]): Chat[] => {\n  const chatMap = new Map<string, Chat>();\n\n  // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —á–∞—Ç—ã\n  serverChats.forEach((chat) => {\n    chatMap.set(chat.id, chat);\n  });\n\n  // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ (last-write-wins –¥–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)\n  localChats.forEach((localChat) => {\n    const serverChat = chatMap.get(localChat.id);\n    if (!serverChat) {\n      // –ù–æ–≤—ã–π —á–∞—Ç —Å –∫–ª–∏–µ–Ω—Ç–∞\n      chatMap.set(localChat.id, localChat);\n    } else {\n      // –ß–∞—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –ø—Ä–æ–≤–µ—Ä—è–µ–º lastActivity\n      const localLastActivity = localChat.lastActivity || 0;\n      const serverLastActivity = serverChat.lastActivity || 0;\n\n      if (localLastActivity > serverLastActivity) {\n        // –õ–æ–∫–∞–ª—å–Ω—ã–π –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–π - –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è\n        const mergedMessages = mergeMessages(serverChat.messages, localChat.messages);\n        chatMap.set(localChat.id, {\n          ...localChat,\n          messages: mergedMessages,\n        });\n      } else {\n        // –°–µ—Ä–≤–µ—Ä–Ω—ã–π –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–π, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞\n        const mergedMessages = mergeMessages(serverChat.messages, localChat.messages);\n        chatMap.set(localChat.id, {\n          ...serverChat,\n          messages: mergedMessages,\n        });\n      }\n    }\n  });\n\n  return Array.from(chatMap.values());\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è merge —Å–æ–æ–±—â–µ–Ω–∏–π (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ ID)\nconst mergeMessages = (serverMessages: Message[], localMessages: Message[]): Message[] => {\n  const messageMap = new Map<string, Message>();\n\n  // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n  serverMessages.forEach((msg) => {\n    messageMap.set(msg.id, msg);\n  });\n\n  // –î–æ–±–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n  localMessages.forEach((msg) => {\n    const existing = messageMap.get(msg.id);\n    if (!existing || (msg.timestamp > existing.timestamp)) {\n      messageMap.set(msg.id, msg);\n    }\n  });\n\n  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ timestamp\n  return Array.from(messageMap.values()).sort((a, b) => a.timestamp - b.timestamp);\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è merge –∞–ª–µ—Ä—Ç–æ–≤\nconst mergeAlertsWithServer = (localAlerts: Alert[], serverAlerts: Alert[]): Alert[] => {\n  const alertMap = new Map<string, Alert>();\n\n  // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã\n  serverAlerts.forEach((alert) => {\n    alertMap.set(alert.id, alert);\n  });\n\n  // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ (last-write-wins)\n  localAlerts.forEach((alert) => {\n    const existing = alertMap.get(alert.id);\n    if (!existing || (alert.timestamp > existing.timestamp)) {\n      alertMap.set(alert.id, alert);\n    }\n  });\n\n  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ timestamp (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)\n  return Array.from(alertMap.values()).sort((a, b) => b.timestamp - a.timestamp);\n};\n\nexport const [MonitoringProvider, useMonitoring] = createContextHook(() => {\n  const [chats, setChats] = useState<Chat[]>(MOCK_CHATS);\n  const [alerts, setAlerts] = useState<Alert[]>([]);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [lastSyncTimestamp, setLastSyncTimestamp] = useState<number | null>(null);\n  const [syncError, setSyncError] = useState<Error | null>(null);\n  const isMountedRef = useRef(true);\n  const syncTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { trackEvent } = useAnalytics();\n  const { personalizeAnalysis } = usePersonalizedAI();\n  const { user } = useUser();\n\n  // –§—É–Ω–∫—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö\n  const syncData = useCallback(async (silent = false) => {\n    if (!isMountedRef.current || isSyncing) {\n      return;\n    }\n\n    if (!silent) {\n      setIsSyncing(true);\n    }\n    setSyncError(null);\n\n    try {\n      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏\n      await chatSyncService.initialize();\n      await alertSyncService.initialize();\n\n      // 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Ç–æ–≤ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n      const chatsResult = await chatSyncService.syncChats(chats);\n      if (chatsResult.success && chatsResult.data && chatsResult.data.length > 0) {\n        // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏\n        const mergedChats = mergeChatsWithServer(chats, chatsResult.data);\n        setChats(mergedChats);\n      }\n\n      // 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–∞—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞\n      const serverChatsResult = await chatSyncService.getChats();\n      if (serverChatsResult.success && serverChatsResult.data && serverChatsResult.data.length > 0) {\n        // Merge —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏\n        const mergedChats = mergeChatsWithServer(chats, serverChatsResult.data);\n        setChats(mergedChats);\n      }\n\n      // 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n      const alertsResult = await alertSyncService.syncAlerts(alerts);\n      if (alertsResult.success && alertsResult.data && alertsResult.data.length > 0) {\n        // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∞–ª–µ—Ä—Ç–∞–º–∏\n        const mergedAlerts = mergeAlertsWithServer(alerts, alertsResult.data);\n        setAlerts(mergedAlerts);\n      }\n\n      // 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞–ª–µ—Ä—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞\n      const serverAlertsResult = await alertSyncService.getAlerts();\n      if (serverAlertsResult.success && serverAlertsResult.data && serverAlertsResult.data.length > 0) {\n        // Merge —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∞–ª–µ—Ä—Ç–∞–º–∏\n        const mergedAlerts = mergeAlertsWithServer(alerts, serverAlertsResult.data);\n        setAlerts(mergedAlerts);\n      }\n\n      setLastSyncTimestamp(Date.now());\n      logger.info('Sync completed successfully', { context: 'MonitoringContext' });\n    } catch (error) {\n      logger.error('Sync error occurred', error instanceof Error ? error : new Error(String(error)), { context: 'MonitoringContext', action: 'syncData' });\n      const syncErr = error instanceof Error ? error : new Error('Sync failed');\n      setSyncError(syncErr);\n      if (!silent) {\n        trackEvent('sync_failed', { error: syncErr.message });\n      }\n    } finally {\n      if (!silent) {\n        setIsSyncing(false);\n      }\n    }\n  }, [chats, alerts, isSyncing, trackEvent]);\n\n  useEffect(() => {\n    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è Android –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏\n    if (Platform.OS === 'android') {\n      setupNotificationChannels().catch((error) => {\n        logger.error('Failed to setup notification channels', error instanceof Error ? error : new Error(String(error)), { context: 'MonitoringContext', action: 'setupNotificationChannels' });\n      });\n    }\n\n    // –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n    const initialSync = async () => {\n      await syncData(true); // Silent sync –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n    };\n\n    if (isMountedRef.current) {\n      initialSync();\n\n      // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥\n      const interval = setInterval(() => {\n        if (isMountedRef.current && !isSyncing) {\n          syncData(true); // Silent –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è\n        }\n      }, 30000);\n\n      return () => {\n        isMountedRef.current = false;\n        clearInterval(interval);\n        if (syncTimeoutRef.current) {\n          clearTimeout(syncTimeoutRef.current);\n        }\n      };\n    }\n  }, [syncData, isSyncing]);\n\n  const analyzeMessage = useCallback(async (message: Message): Promise<RiskAnalysis> => {\n    try {\n      await simulateLatency();\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π AI –∞–Ω–∞–ª–∏–∑\n      const aiAnalysis = await analyzeMessageWithAI(message.text, {\n        useAdvancedAI: true,\n        confidenceThreshold: 0.7,\n      });\n      return aiAnalysis;\n    } catch (error) {\n      handleErrorSilently(error, 'MonitoringContext', { action: 'analyzeMessage' });\n      // Fallback –Ω–∞ –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑\n      return evaluateMessageRisk(message);\n    }\n  }, []);\n\n  const analyzeImage = useCallback(async (imageUri: string): Promise<{ blocked: boolean; reasons: string[] }> => {\n    try {\n      await simulateLatency();\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π AI –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π\n      const aiAnalysis = await analyzeImageWithAI(imageUri, {\n        enableImageAnalysis: true,\n      });\n      return {\n        blocked: aiAnalysis.blocked,\n        reasons: aiAnalysis.reasons,\n      };\n    } catch (error) {\n      console.error('Error analyzing image:', error);\n      // Fallback –Ω–∞ –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑\n      return evaluateImageRisk(imageUri);\n    }\n  }, []);\n\n  const addMessage = useCallback(async (chatId: string, text: string, senderId: string, senderName: string, imageUri?: string) => {\n    if (!isMountedRef.current) {\n      return;\n    }\n\n    const newMessage: Message = {\n      id: `msg_${Date.now()}_${Math.random()}`,\n      text,\n      senderId,\n      senderName,\n      timestamp: Date.now(),\n      analyzed: false,\n      imageUri,\n      imageAnalyzed: false,\n      imageBlocked: false,\n    };\n\n    setChats((prev) =>\n      prev.map((chat) => {\n        if (chat.id === chatId) {\n          return {\n            ...chat,\n            messages: [...chat.messages, newMessage],\n            lastActivity: Date.now(),\n            updatedAt: Date.now(), // –î–æ–±–∞–≤–ª—è–µ–º updatedAt –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏\n          };\n        }\n        return chat;\n      })\n    );\n\n    // –¢—Ä–µ–∫–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è\n    trackEvent('message_sent', { chatId, senderId, hasImage: !!imageUri });\n\n    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è (debounce 2 —Å–µ–∫—É–Ω–¥—ã)\n    if (syncTimeoutRef.current) {\n      clearTimeout(syncTimeoutRef.current);\n    }\n    syncTimeoutRef.current = setTimeout(() => {\n      syncData(true); // Silent sync\n    }, 2000);\n\n    setIsAnalyzing(true);\n\n    try {\n      let analysis = await analyzeMessage(newMessage);\n\n      // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º senderId –∫–∞–∫ childId (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å)\n      // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π AI –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π\n      const personalizedAnalysis = personalizeAnalysis(senderId, analysis, newMessage.text);\n      analysis = personalizedAnalysis;\n\n      if (!isMountedRef.current) {\n        return;\n      }\n\n      let imageAnalysis = { blocked: false, reasons: [] as string[] };\n      if (imageUri) {\n        imageAnalysis = await analyzeImage(imageUri);\n        if (!isMountedRef.current) {\n          return;\n        }\n      }\n\n      if (!isMountedRef.current) {\n        return;\n      }\n\n      if (analysis.riskLevel === 'critical') {\n        HapticFeedback.error();\n      } else if (analysis.riskLevel === 'high' || analysis.riskLevel === 'medium') {\n        HapticFeedback.warning();\n      } else if (analysis.riskLevel === 'safe') {\n        HapticFeedback.success();\n      }\n\n      if (!isMountedRef.current) {\n        return;\n      }\n\n      setChats((prev) =>\n        prev.map((chat) => {\n          if (chat.id === chatId) {\n            const updatedMessages = chat.messages.map((msg) =>\n              msg.id === newMessage.id\n                ? {\n                    ...msg,\n                    riskLevel: analysis.riskLevel,\n                    riskReasons: analysis.reasons,\n                    analyzed: true,\n                    imageAnalyzed: true,\n                    imageBlocked: imageAnalysis.blocked,\n                    imageRiskReasons: imageAnalysis.reasons,\n                  }\n                : msg\n            );\n\n            const levels: RiskLevel[] = ['safe', 'low', 'medium', 'high', 'critical'];\n            const highestRisk = updatedMessages.reduce((max, msg) => {\n              const msgLevel = msg.riskLevel || 'safe';\n              return levels.indexOf(msgLevel) > levels.indexOf(max) ? msgLevel : max;\n            }, 'safe' as RiskLevel);\n\n            const shouldAlert = analysis.riskLevel !== 'safe' && analysis.riskLevel !== 'low';\n            const imageRisk = imageAnalysis.blocked;\n\n            if ((shouldAlert || imageRisk) && isMountedRef.current) {\n              const newAlert: Alert = {\n                id: `alert_${Date.now()}`,\n                chatId,\n                messageId: newMessage.id,\n                riskLevel: analysis.riskLevel,\n                timestamp: Date.now(),\n                reasons: analysis.reasons,\n                resolved: false,\n              };\n              setAlerts((prevAlerts) => [newAlert, ...prevAlerts]);\n\n              // –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–∑–¥–∞–Ω–∏—è –∞–ª–µ—Ä—Ç–∞\n              trackEvent('alert_created', {\n                alertId: newAlert.id,\n                chatId,\n                riskLevel: analysis.riskLevel,\n                reasons: analysis.reasons,\n              });\n\n              // –û—Ç–ø—Ä–∞–≤–∫–∞ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è–º\n              (async () => {\n                try {\n                  const riskLevelLabels: Record<RiskLevel, string> = {\n                    safe: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ',\n                    low: '–ù–∏–∑–∫–∏–π',\n                    medium: '–°—Ä–µ–¥–Ω–∏–π',\n                    high: '–í—ã—Å–æ–∫–∏–π',\n                    critical: '–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô',\n                  };\n\n                  const title = analysis.riskLevel === 'critical' \n                    ? 'üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –†–ò–°–ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω!'\n                    : `‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω ${riskLevelLabels[analysis.riskLevel]} —Ä–∏—Å–∫`;\n\n                  const chatName = chat.isGroup ? chat.groupName : chat.participantNames.join(' –∏ ');\n                  const body = `–í —á–∞—Ç–µ \"${chatName}\": ${analysis.reasons[0] || '–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É–≥—Ä–æ–∑–∞'}`;\n\n                  // –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n                  if (Platform.OS !== 'web') {\n                    const sound = getSoundForRiskLevel(analysis.riskLevel);\n                    const channelId = getChannelIdForRiskLevel(analysis.riskLevel);\n                    const priority = getAndroidPriorityForRiskLevel(analysis.riskLevel);\n\n                    await Notifications.scheduleNotificationAsync({\n                      content: {\n                        title,\n                        body,\n                        data: {\n                          type: 'risk_alert',\n                          alertId: newAlert.id,\n                          chatId,\n                          riskLevel: analysis.riskLevel,\n                        },\n                        sound,\n                        ...(Platform.OS === 'android' && channelId ? { channelId } : {}),\n                        priority,\n                      },\n                      trigger: null,\n                    });\n                  }\n\n                  // Backend –æ—Ç–ø—Ä–∞–≤–∫–∞ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π\n                  if (user?.id && analysis.riskLevel !== 'safe') {\n                    try {\n                      await trpcVanillaClient.notifications.sendRiskAlertPush.mutate({\n                        userId: user.id,\n                        chatId,\n                        messageId: newMessage.id,\n                        riskLevel: analysis.riskLevel as 'low' | 'medium' | 'high' | 'critical',\n                        reasons: analysis.reasons,\n                        chatName,\n                      });\n                      logger.info('Push notification sent to parents via backend', { context: 'MonitoringContext', action: 'sendRiskAlertPush' });\n                    } catch (backendError) {\n                      logger.error('Failed to send push via backend (non-critical)', backendError instanceof Error ? backendError : new Error(String(backendError)), { context: 'MonitoringContext', action: 'sendRiskAlertPush', critical: false });\n                      // –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ - –ª–æ–∫–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ\n                    }\n                  } else {\n                    logger.warn('Cannot send push via backend: user.id is missing', { context: 'MonitoringContext', action: 'sendRiskAlertPush' });\n                  }\n                } catch (error) {\n                  logger.error('Failed to send push notification', error instanceof Error ? error : new Error(String(error)), { context: 'MonitoringContext', action: 'sendRiskAlertPush' });\n                }\n              })();\n            }\n\n            // –¢—Ä–µ–∫–∏–Ω–≥ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\n            trackEvent('message_analyzed', {\n              messageId: newMessage.id,\n              chatId,\n              riskLevel: analysis.riskLevel,\n              hasImage: !!imageUri,\n              imageBlocked: imageAnalysis.blocked,\n            });\n\n            return {\n              ...chat,\n              messages: updatedMessages,\n              overallRisk: highestRisk,\n            };\n          }\n          return chat;\n        })\n      );\n    } finally {\n      if (isMountedRef.current) {\n        setIsAnalyzing(false);\n      }\n    }\n  }, [analyzeMessage, analyzeImage, trackEvent, personalizeAnalysis]);\n\n  const initializeChatMessages = useCallback(() => {\n    if (!isMountedRef.current) {\n      return;\n    }\n    setChats((prev) =>\n      prev.map((chat) => ({\n        ...chat,\n        messages: INITIAL_MESSAGES[chat.id] || [],\n      }))\n    );\n  }, []);\n\n  useEffect(() => {\n    if (isMountedRef.current) {\n      initializeChatMessages();\n    }\n  }, [initializeChatMessages]);\n\n  const resolveAlert = useCallback((alertId: string) => {\n    setAlerts((prev) => {\n      const updated = prev.map((alert) =>\n        alert.id === alertId ? { ...alert, resolved: true } : alert\n      );\n      const resolvedAlert = prev.find((a) => a.id === alertId);\n      if (resolvedAlert) {\n        trackEvent('alert_resolved', {\n          alertId,\n          chatId: resolvedAlert.chatId,\n          riskLevel: resolvedAlert.riskLevel,\n        });\n      }\n      return updated;\n    });\n\n    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–ª–µ—Ä—Ç–∞ (debounce 2 —Å–µ–∫—É–Ω–¥—ã)\n    if (syncTimeoutRef.current) {\n      clearTimeout(syncTimeoutRef.current);\n    }\n    syncTimeoutRef.current = setTimeout(() => {\n      syncData(true); // Silent sync\n    }, 2000);\n  }, [trackEvent, syncData]);\n\n  const unresolvedAlerts = useMemo(\n    () => alerts.filter((alert) => !alert.resolved),\n    [alerts]\n  );\n\n  const criticalAlerts = useMemo(\n    () => unresolvedAlerts.filter((alert) => alert.riskLevel === 'critical'),\n    [unresolvedAlerts]\n  );\n\n  return useMemo(\n    () => ({\n      chats,\n      alerts,\n      unresolvedAlerts,\n      criticalAlerts,\n      isAnalyzing,\n      isSyncing,\n      lastSyncTimestamp,\n      syncError,\n      addMessage,\n      initializeChatMessages,\n      resolveAlert,\n      syncData, // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏\n    }),\n    [\n      chats,\n      alerts,\n      unresolvedAlerts,\n      criticalAlerts,\n      isAnalyzing,\n      isSyncing,\n      lastSyncTimestamp,\n      syncError,\n      addMessage,\n      initializeChatMessages,\n      resolveAlert,\n      syncData,\n    ]\n  );\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}