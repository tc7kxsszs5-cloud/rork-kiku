{"version":3,"names":["DEFAULT_METRICS","totalMessages","totalAlerts","totalSOS","messagesAnalyzed","alertsResolved","averageRiskLevel","mostActiveChat","riskDistribution","safe","low","medium","high","critical","eventsByType","dailyActivity","totalInstalls","totalActivations","activationRate","totalSessions","averageSessionDuration","retention","d1","d7","d30","featureUsage","premiumSubscribers","premiumTrialUsers","premiumConversionRate","dau","mau","threatDetectionRate","falsePositiveRate","falseNegativeRate","averageAlertResponseTime","averageSOSResponseTime","aiAnalysisAccuracy","aiAnalysisSpeed","imageAnalysisAccuracy","sessionsPerUserWeekly","messagesAnalyzedPerDay","featureAdoptionRate","parentChildPairCompletionRate","geographicExpansion","appStoreRating","nps","arr","cac","ltv","ltvCacRatio","userGrowthRate","calculateMetrics","events","_userSessionsByDate$t","baseMetrics","Object","assign","riskCounts","chatActivity","totalRiskScore","riskCount","installDates","Set","activationDates","sessionStarts","sessionEnds","featureUsageCounts","userSessionsByDate","userFirstSeen","userLastSeen","forEach","eventData","_eventData$properties","_eventData$properties2","_eventData$properties3","_eventData$properties4","_eventData$properties5","_eventData$properties6","_eventData$properties7","_eventData$properties8","_eventData$properties9","_eventData$properties10","event","userId","properties","eventDate","Date","timestamp","toISOString","split","riskLevel","risk","riskScores","chatId","add","push","startEvent","find","s","duration","featureName","feature","alertCreatedTime","responseTime","_responseTime","sosTriggeredTime","analysisTime","_analysisTime","screenName","screen","mostActiveChatId","entries","reduce","max","_ref","_ref2","_slicedToArray","id","count","size","length","sessionDurations","filter","undefined","map","sum","d","today","thirtyDaysAgoDate","now","mauUsers","_ref3","_ref4","date","users","oneDayAgo","sevenDaysAgo","thirtyDaysAgoTimestamp","usersWithFirstSeen","usersWithLastSeen","d1Users","_ref5","_ref6","firstSeen","lastSeen","d7Users","_ref7","_ref8","d30Users","_ref9","_ref10","alertsCreated","e","falsePositives","threatsConfirmed","alertNotifications","sosNotifications","aiAnalyses","imageAnalyses","estimatedMissedThreats","Math","alertResponseTimes","_e$properties","t","sosResponseTimes","_e$properties2","aiAnalysisTimes","_e$properties3","totalAnalyses","correctAnalyses","uniqueUsers","keys","sevenDaysAgoTimestamp","sessionsLastWeek","messagesAnalyzedEvents","daysWithMessages","usersUsingFeatures","_e$properties4","pairsStarted","pairsCompleted","countries","_e$properties5","country","c","premiumPrice","averageLifetimeMonths","currentMAU","previousMAU","dailyMap","_ref11","_ref12","sort","a","b","localeCompare","slice"],"sources":["analyticsMetrics.ts"],"sourcesContent":["/**\n * Чистые детерминированные функции для вычисления аналитических метрик\n * Вынесено из AnalyticsContext для модульного тестирования\n */\n\nimport { AnalyticsEvent, AnalyticsEventData, AnalyticsMetrics } from '@/constants/AnalyticsContext';\n\nconst DEFAULT_METRICS: AnalyticsMetrics = {\n  totalMessages: 0,\n  totalAlerts: 0,\n  totalSOS: 0,\n  messagesAnalyzed: 0,\n  alertsResolved: 0,\n  averageRiskLevel: 0,\n  mostActiveChat: null,\n  riskDistribution: {\n    safe: 0,\n    low: 0,\n    medium: 0,\n    high: 0,\n    critical: 0,\n  },\n  eventsByType: {} as Record<AnalyticsEvent, number>,\n  dailyActivity: [],\n  // KPI Metrics\n  totalInstalls: 0,\n  totalActivations: 0,\n  activationRate: 0,\n  totalSessions: 0,\n  averageSessionDuration: 0,\n  retention: {\n    d1: 0,\n    d7: 0,\n    d30: 0,\n  },\n  featureUsage: {},\n  premiumSubscribers: 0,\n  premiumTrialUsers: 0,\n  premiumConversionRate: 0,\n  dau: 0,\n  mau: 0,\n  // Security KPIs\n  threatDetectionRate: 0,\n  falsePositiveRate: 0,\n  falseNegativeRate: 0,\n  averageAlertResponseTime: 0,\n  averageSOSResponseTime: 0,\n  aiAnalysisAccuracy: 0,\n  aiAnalysisSpeed: 0,\n  imageAnalysisAccuracy: 0,\n  // Engagement KPIs\n  sessionsPerUserWeekly: 0,\n  messagesAnalyzedPerDay: 0,\n  featureAdoptionRate: 0,\n  parentChildPairCompletionRate: 0,\n  // Market KPIs\n  geographicExpansion: 0,\n  appStoreRating: 0,\n  nps: 0,\n  // Revenue KPIs\n  arr: 0,\n  cac: 0,\n  ltv: 0,\n  ltvCacRatio: 0,\n  userGrowthRate: 0,\n};\n\n/**\n * Вычисляет метрики на основе массива событий\n * Чистая детерминированная функция - идеальна для модульного тестирования\n */\nexport function calculateMetrics(events: AnalyticsEventData[]): AnalyticsMetrics {\n  const baseMetrics = { ...DEFAULT_METRICS };\n  const eventsByType: Record<string, number> = {};\n  const riskCounts: Record<string, number> = {\n    safe: 0,\n    low: 0,\n    medium: 0,\n    high: 0,\n    critical: 0,\n  };\n  const chatActivity: Record<string, number> = {};\n  let totalRiskScore = 0;\n  let riskCount = 0;\n\n  // KPI tracking\n  const installDates = new Set<number>();\n  const activationDates = new Set<number>();\n  const sessionStarts: Array<{ timestamp: number; userId?: string; duration?: number }> = [];\n  const sessionEnds: Array<{ timestamp: number; userId?: string }> = [];\n  const featureUsageCounts: Record<string, number> = {};\n  const userSessionsByDate: Record<string, Set<string>> = {}; // date -> Set<userId>\n  const userFirstSeen: Record<string, number> = {}; // userId -> first seen timestamp\n  const userLastSeen: Record<string, number> = {}; // userId -> last seen timestamp\n\n  events.forEach((eventData) => {\n    // Подсчет событий по типам\n    eventsByType[eventData.event] = (eventsByType[eventData.event] || 0) + 1;\n\n    const userId = eventData.properties?.userId as string | undefined;\n    const eventDate = new Date(eventData.timestamp).toISOString().split('T')[0];\n\n    // Специфичная логика для разных событий\n    switch (eventData.event) {\n      case 'message_sent':\n        baseMetrics.totalMessages++;\n        break;\n      case 'message_analyzed':\n        baseMetrics.messagesAnalyzed++;\n        if (eventData.properties?.riskLevel) {\n          const risk = eventData.properties.riskLevel as string;\n          if (risk in riskCounts) {\n            riskCounts[risk]++;\n          }\n          // Вычисление среднего уровня риска (0=safe, 1=low, 2=medium, 3=high, 4=critical)\n          const riskScores: Record<string, number> = {\n            safe: 0,\n            low: 1,\n            medium: 2,\n            high: 3,\n            critical: 4,\n          };\n          totalRiskScore += riskScores[risk] || 0;\n          riskCount++;\n        }\n        if (eventData.properties?.chatId) {\n          const chatId = eventData.properties.chatId as string;\n          chatActivity[chatId] = (chatActivity[chatId] || 0) + 1;\n        }\n        break;\n      case 'alert_created':\n        baseMetrics.totalAlerts++;\n        break;\n      case 'alert_resolved':\n        baseMetrics.alertsResolved++;\n        break;\n      case 'sos_triggered':\n        baseMetrics.totalSOS++;\n        break;\n      case 'app_installed':\n        if (eventData.properties?.timestamp) {\n          installDates.add(eventData.properties.timestamp as number);\n        }\n        break;\n      case 'user_activated':\n        if (eventData.properties?.timestamp) {\n          activationDates.add(eventData.properties.timestamp as number);\n        }\n        break;\n      case 'session_started':\n        sessionStarts.push({\n          timestamp: eventData.timestamp,\n          userId: userId,\n        });\n        if (userId) {\n          if (!userFirstSeen[userId]) {\n            userFirstSeen[userId] = eventData.timestamp;\n          }\n          userLastSeen[userId] = eventData.timestamp;\n          if (!userSessionsByDate[eventDate]) {\n            userSessionsByDate[eventDate] = new Set();\n          }\n          userSessionsByDate[eventDate].add(userId);\n        }\n        break;\n      case 'session_ended':\n        sessionEnds.push({\n          timestamp: eventData.timestamp,\n          userId: userId,\n        });\n        // Вычисляем длительность сессии, если есть соответствующий session_started\n        if (userId) {\n          const startEvent = sessionStarts.find(\n            (s) => s.userId === userId && s.timestamp <= eventData.timestamp\n          );\n          if (startEvent) {\n            const duration = (eventData.timestamp - startEvent.timestamp) / 1000 / 60; // в минутах\n            if (!startEvent.duration) {\n              startEvent.duration = duration;\n            }\n          }\n        }\n        break;\n      case 'feature_used':\n        const featureName = eventData.properties?.feature as string;\n        if (featureName) {\n          featureUsageCounts[featureName] = (featureUsageCounts[featureName] || 0) + 1;\n        }\n        break;\n      case 'premium_subscribed':\n        baseMetrics.premiumSubscribers++;\n        break;\n      case 'premium_trial_started':\n        baseMetrics.premiumTrialUsers++;\n        break;\n      case 'alert_notification_sent':\n        // Для расчета времени отклика\n        if (eventData.properties?.alertCreatedTime) {\n          const responseTime = (eventData.timestamp - (eventData.properties.alertCreatedTime as number)) / 1000; // секунды\n          // Сохраняем для расчета среднего\n          if (!eventData.properties._responseTime) {\n            (eventData.properties as any)._responseTime = responseTime;\n          }\n        }\n        break;\n      case 'sos_notification_sent':\n        // Для расчета времени отклика SOS\n        if (eventData.properties?.sosTriggeredTime) {\n          const responseTime = (eventData.timestamp - (eventData.properties.sosTriggeredTime as number)) / 1000; // секунды\n          if (!eventData.properties._responseTime) {\n            (eventData.properties as any)._responseTime = responseTime;\n          }\n        }\n        break;\n      case 'ai_analysis_completed':\n        // Для расчета скорости и точности AI\n        if (eventData.properties?.analysisTime) {\n          const analysisTime = eventData.properties.analysisTime as number;\n          if (!eventData.properties._analysisTime) {\n            (eventData.properties as any)._analysisTime = analysisTime;\n          }\n        }\n        break;\n      case 'false_positive_reported':\n        // Для расчета false positive rate\n        break;\n      case 'threat_confirmed':\n        // Для расчета threat detection rate\n        break;\n      case 'parent_child_pair_completed':\n        // Для расчета completion rate\n        break;\n      case 'screen_viewed':\n        // Для отслеживания использования функций\n        const screenName = eventData.properties?.screen as string;\n        if (screenName) {\n          featureUsageCounts[`screen_${screenName}`] = (featureUsageCounts[`screen_${screenName}`] || 0) + 1;\n        }\n        break;\n    }\n  });\n\n  // Находим самый активный чат\n  const mostActiveChatId = Object.entries(chatActivity).reduce(\n    (max, [id, count]) => (count > (chatActivity[max] || 0) ? id : max),\n    ''\n  );\n\n  baseMetrics.averageRiskLevel = riskCount > 0 ? totalRiskScore / riskCount : 0;\n  baseMetrics.mostActiveChat = mostActiveChatId || null;\n  baseMetrics.riskDistribution = riskCounts as AnalyticsMetrics['riskDistribution'];\n  baseMetrics.eventsByType = eventsByType as Record<AnalyticsEvent, number>;\n\n  // KPI Calculations\n  baseMetrics.totalInstalls = installDates.size;\n  baseMetrics.totalActivations = activationDates.size;\n  baseMetrics.activationRate = baseMetrics.totalInstalls > 0 \n    ? baseMetrics.totalActivations / baseMetrics.totalInstalls \n    : 0;\n\n  baseMetrics.totalSessions = sessionStarts.length;\n  const sessionDurations = sessionStarts.filter(s => s.duration !== undefined).map(s => s.duration!);\n  baseMetrics.averageSessionDuration = sessionDurations.length > 0\n    ? sessionDurations.reduce((sum, d) => sum + d, 0) / sessionDurations.length\n    : 0;\n\n  baseMetrics.featureUsage = featureUsageCounts;\n\n  // Premium metrics\n  baseMetrics.premiumConversionRate = baseMetrics.totalActivations > 0\n    ? baseMetrics.premiumSubscribers / baseMetrics.totalActivations\n    : 0;\n\n  // DAU/MAU calculation\n  const today = new Date().toISOString().split('T')[0];\n  const thirtyDaysAgoDate = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n  \n  baseMetrics.dau = userSessionsByDate[today]?.size || 0;\n  \n  const mauUsers = new Set<string>();\n  Object.entries(userSessionsByDate).forEach(([date, users]) => {\n    if (date >= thirtyDaysAgoDate && date <= today) {\n      users.forEach(userId => mauUsers.add(userId));\n    }\n  });\n  baseMetrics.mau = mauUsers.size;\n\n  // Retention calculation (D1, D7, D30)\n  const now = Date.now();\n  const oneDayAgo = now - 24 * 60 * 60 * 1000;\n  const sevenDaysAgo = now - 7 * 24 * 60 * 60 * 1000;\n  const thirtyDaysAgoTimestamp = now - 30 * 24 * 60 * 60 * 1000;\n\n  const usersWithFirstSeen = Object.entries(userFirstSeen);\n  const usersWithLastSeen = Object.entries(userLastSeen);\n\n  // D1 retention: пользователи, которые вернулись через 1 день после первого визита\n  const d1Users = usersWithFirstSeen.filter(([userId, firstSeen]) => {\n    const lastSeen = userLastSeen[userId];\n    return lastSeen && lastSeen >= firstSeen + 24 * 60 * 60 * 1000 && lastSeen <= firstSeen + 2 * 24 * 60 * 60 * 1000;\n  }).length;\n  baseMetrics.retention.d1 = usersWithFirstSeen.length > 0 ? d1Users / usersWithFirstSeen.length : 0;\n\n  // D7 retention: пользователи, которые вернулись через 7 дней\n  const d7Users = usersWithFirstSeen.filter(([userId, firstSeen]) => {\n    const lastSeen = userLastSeen[userId];\n    return lastSeen && lastSeen >= firstSeen + 7 * 24 * 60 * 60 * 1000;\n  }).length;\n  baseMetrics.retention.d7 = usersWithFirstSeen.length > 0 ? d7Users / usersWithFirstSeen.length : 0;\n\n  // D30 retention: пользователи, которые вернулись через 30 дней\n  const d30Users = usersWithFirstSeen.filter(([userId, firstSeen]) => {\n    const lastSeen = userLastSeen[userId];\n    return lastSeen && lastSeen >= firstSeen + 30 * 24 * 60 * 60 * 1000;\n  }).length;\n  baseMetrics.retention.d30 = usersWithFirstSeen.length > 0 ? d30Users / usersWithFirstSeen.length : 0;\n\n  // Security KPIs Calculation\n  const alertsCreated = events.filter(e => e.event === 'alert_created');\n  const alertsResolved = events.filter(e => e.event === 'alert_resolved');\n  const falsePositives = events.filter(e => e.event === 'false_positive_reported').length;\n  const threatsConfirmed = events.filter(e => e.event === 'threat_confirmed').length;\n  const alertNotifications = events.filter(e => e.event === 'alert_notification_sent');\n  const sosNotifications = events.filter(e => e.event === 'sos_notification_sent');\n  const aiAnalyses = events.filter(e => e.event === 'ai_analysis_completed');\n  const imageAnalyses = events.filter(e => e.event === 'image_analysis_completed');\n\n  // Threat Detection Rate: threats confirmed / total threats (alerts created)\n  baseMetrics.threatDetectionRate = alertsCreated.length > 0\n    ? threatsConfirmed / alertsCreated.length\n    : 0;\n\n  // False Positive Rate: false positives / total alerts\n  baseMetrics.falsePositiveRate = alertsCreated.length > 0\n    ? falsePositives / alertsCreated.length\n    : 0;\n\n  // False Negative Rate: missed threats / total threats (estimated)\n  // Это сложнее вычислить без внешних данных, используем консервативную оценку\n  const estimatedMissedThreats = Math.max(0, alertsCreated.length - threatsConfirmed - falsePositives);\n  baseMetrics.falseNegativeRate = alertsCreated.length > 0\n    ? estimatedMissedThreats / alertsCreated.length\n    : 0;\n\n  // Average Alert Response Time\n  const alertResponseTimes = alertNotifications\n    .map(e => e.properties?._responseTime as number | undefined)\n    .filter((t): t is number => t !== undefined);\n  baseMetrics.averageAlertResponseTime = alertResponseTimes.length > 0\n    ? alertResponseTimes.reduce((sum, t) => sum + t, 0) / alertResponseTimes.length\n    : 0;\n\n  // Average SOS Response Time\n  const sosResponseTimes = sosNotifications\n    .map(e => e.properties?._responseTime as number | undefined)\n    .filter((t): t is number => t !== undefined);\n  baseMetrics.averageSOSResponseTime = sosResponseTimes.length > 0\n    ? sosResponseTimes.reduce((sum, t) => sum + t, 0) / sosResponseTimes.length\n    : 0;\n\n  // AI Analysis Speed\n  const aiAnalysisTimes = aiAnalyses\n    .map(e => e.properties?._analysisTime as number | undefined)\n    .filter((t): t is number => t !== undefined);\n  baseMetrics.aiAnalysisSpeed = aiAnalysisTimes.length > 0\n    ? aiAnalysisTimes.reduce((sum, t) => sum + t, 0) / aiAnalysisTimes.length\n    : 0;\n\n  // AI Analysis Accuracy (simplified: based on resolved alerts vs false positives)\n  const totalAnalyses = baseMetrics.messagesAnalyzed + imageAnalyses.length;\n  const correctAnalyses = alertsResolved.length; // Resolved alerts indicate correct detection\n  baseMetrics.aiAnalysisAccuracy = totalAnalyses > 0\n    ? correctAnalyses / totalAnalyses\n    : 0;\n\n  // Image Analysis Accuracy (simplified)\n  baseMetrics.imageAnalysisAccuracy = imageAnalyses.length > 0\n    ? correctAnalyses / imageAnalyses.length\n    : 0;\n\n  // Engagement KPIs\n  // Sessions per User Weekly\n  const uniqueUsers = new Set(Object.keys(userFirstSeen));\n  const sevenDaysAgoTimestamp = Date.now() - 7 * 24 * 60 * 60 * 1000;\n  const sessionsLastWeek = sessionStarts.filter(s => s.timestamp >= sevenDaysAgoTimestamp).length;\n  baseMetrics.sessionsPerUserWeekly = uniqueUsers.size > 0\n    ? sessionsLastWeek / uniqueUsers.size\n    : 0;\n\n  // Messages Analyzed per Day (average)\n  const messagesAnalyzedEvents = events.filter(e => e.event === 'message_analyzed');\n  const daysWithMessages = new Set(messagesAnalyzedEvents.map(e => \n    new Date(e.timestamp).toISOString().split('T')[0]\n  )).size;\n  baseMetrics.messagesAnalyzedPerDay = daysWithMessages > 0\n    ? messagesAnalyzedEvents.length / daysWithMessages\n    : 0;\n\n  // Feature Adoption Rate: users using features / total users\n  const usersUsingFeatures = new Set(\n    events\n      .filter(e => e.event === 'feature_used' || e.event === 'screen_viewed')\n      .map(e => e.properties?.userId as string)\n      .filter((id): id is string => id !== undefined)\n  ).size;\n  baseMetrics.featureAdoptionRate = uniqueUsers.size > 0\n    ? usersUsingFeatures / uniqueUsers.size\n    : 0;\n\n  // Parent-Child Pair Completion Rate\n  const pairsStarted = events.filter(e => e.event === 'user_activated').length;\n  const pairsCompleted = events.filter(e => e.event === 'parent_child_pair_completed').length;\n  baseMetrics.parentChildPairCompletionRate = pairsStarted > 0\n    ? pairsCompleted / pairsStarted\n    : 0;\n\n  // Market KPIs (these would typically come from external sources)\n  // Geographic Expansion: count unique countries from events (if tracked)\n  const countries = new Set(\n    events\n      .map(e => e.properties?.country as string)\n      .filter((c): c is string => c !== undefined)\n  );\n  baseMetrics.geographicExpansion = countries.size;\n\n  // App Store Rating: would come from external API, default to 0\n  baseMetrics.appStoreRating = 0;\n\n  // NPS: would come from surveys, default to 0\n  baseMetrics.nps = 0;\n\n  // Revenue KPIs (calculated from premium data and modeling)\n  // ARR: Annual Recurring Revenue (from premium subscriptions)\n  const premiumPrice = 9.99; // Monthly premium price\n  baseMetrics.arr = baseMetrics.premiumSubscribers * premiumPrice * 12;\n\n  // CAC: Customer Acquisition Cost (would come from marketing data)\n  // Default estimate: $4 per user\n  baseMetrics.cac = 4;\n\n  // LTV: Lifetime Value (premium price * average lifetime in months)\n  const averageLifetimeMonths = 12; // Estimated\n  baseMetrics.ltv = premiumPrice * averageLifetimeMonths * baseMetrics.premiumConversionRate;\n\n  // LTV/CAC Ratio\n  baseMetrics.ltvCacRatio = baseMetrics.cac > 0\n    ? baseMetrics.ltv / baseMetrics.cac\n    : 0;\n\n  // User Growth Rate (MoM): calculate from MAU growth\n  // This requires historical data, simplified calculation\n  const currentMAU = baseMetrics.mau;\n  const previousMAU = currentMAU * 0.75; // Simplified: assume 25% growth if we had previous data\n  baseMetrics.userGrowthRate = previousMAU > 0\n    ? ((currentMAU - previousMAU) / previousMAU) * 100\n    : 0;\n\n  // Группировка по дням\n  const dailyMap: Record<string, number> = {};\n  events.forEach((event) => {\n    const date = new Date(event.timestamp).toISOString().split('T')[0];\n    dailyMap[date] = (dailyMap[date] || 0) + 1;\n  });\n  baseMetrics.dailyActivity = Object.entries(dailyMap)\n    .map(([date, events]) => ({ date, events }))\n    .sort((a, b) => a.date.localeCompare(b.date))\n    .slice(-30); // Последние 30 дней\n\n  return baseMetrics;\n}\n"],"mappings":"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","ignoreList":[]}