{"version":3,"names":["getDeltaAlerts","allAlerts","lastSyncTimestamp","cov_bgcwj42ig","f","s","filter","alert","b","timestamp","getDeltaChats","allChats","chat","updatedAt"],"sources":["syncHelpers.ts"],"sourcesContent":["/**\n * Утилиты для синхронизации данных\n * \n * Чистые детерминированные функции для incremental sync.\n * Используются в backend tRPC routes для синхронизации алертов и чатов.\n */\n\n/**\n * Получает только измененные алерты после lastSyncTimestamp (incremental sync)\n * \n * @param allAlerts - Все алерты\n * @param lastSyncTimestamp - Timestamp последней синхронизации\n * @returns Массив алертов, измененных после lastSyncTimestamp\n */\nexport function getDeltaAlerts(allAlerts: Array<{ timestamp?: number }>, lastSyncTimestamp: number): Array<{ timestamp?: number }> {\n  return allAlerts.filter((alert) => (alert.timestamp || 0) > lastSyncTimestamp);\n}\n\n/**\n * Получает только измененные чаты после lastSyncTimestamp (incremental sync)\n * \n * @param allChats - Все чаты\n * @param lastSyncTimestamp - Timestamp последней синхронизации\n * @returns Массив чатов, измененных после lastSyncTimestamp\n */\nexport function getDeltaChats(\n  allChats: Array<{ updatedAt?: number; timestamp?: number }>,\n  lastSyncTimestamp: number\n): Array<{ updatedAt?: number; timestamp?: number }> {\n  return allChats.filter((chat) => {\n    // Возвращаем чат, если он был изменен после lastSyncTimestamp\n    return (chat.updatedAt || chat.timestamp || 0) > lastSyncTimestamp;\n  });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcO,SAASA,cAAcA,CAACC,SAAwC,EAAEC,iBAAyB,EAAiC;EAAAC,aAAA,GAAAC,CAAA;EAAAD,aAAA,GAAAE,CAAA;EACjI,OAAOJ,SAAS,CAACK,MAAM,CAAC,UAACC,KAAK,EAAK;IAAAJ,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAE,CAAA;IAAA,QAAC,CAAAF,aAAA,GAAAK,CAAA,UAAAD,KAAK,CAACE,SAAS,MAAAN,aAAA,GAAAK,CAAA,UAAI,CAAC,KAAIN,iBAAiB;EAAD,CAAC,CAAC;AAChF;AASO,SAASQ,aAAaA,CAC3BC,QAA2D,EAC3DT,iBAAyB,EAC0B;EAAAC,aAAA,GAAAC,CAAA;EAAAD,aAAA,GAAAE,CAAA;EACnD,OAAOM,QAAQ,CAACL,MAAM,CAAC,UAACM,IAAI,EAAK;IAAAT,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAE,CAAA;IAE/B,OAAO,CAAC,CAAAF,aAAA,GAAAK,CAAA,UAAAI,IAAI,CAACC,SAAS,MAAAV,aAAA,GAAAK,CAAA,UAAII,IAAI,CAACH,SAAS,MAAAN,aAAA,GAAAK,CAAA,UAAI,CAAC,KAAIN,iBAAiB;EACpE,CAAC,CAAC;AACJ","ignoreList":[]}