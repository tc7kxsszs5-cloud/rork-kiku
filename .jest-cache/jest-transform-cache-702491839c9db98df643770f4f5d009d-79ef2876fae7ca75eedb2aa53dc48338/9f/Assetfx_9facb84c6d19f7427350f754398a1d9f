0263ada495335b1bff80f60565ef60fb
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _Asset = require("./Asset");
var _PlatformUtils = require("./PlatformUtils");
var _resolveAssetSource = _interopRequireWildcard(require("./resolveAssetSource"));
if (_PlatformUtils.IS_ENV_WITH_LOCAL_ASSETS) {
  var setTransformer = _resolveAssetSource.default.setCustomSourceTransformer || _resolveAssetSource.setCustomSourceTransformer;
  setTransformer(function expoAssetTransformer(resolver) {
    try {
      if ('fileHashes' in resolver.asset && resolver.asset.fileHashes) {
        var asset = _Asset.Asset.fromMetadata(resolver.asset);
        if (asset.uri.startsWith(_Asset.ANDROID_EMBEDDED_URL_BASE_RESOURCE)) {
          return resolver.resourceIdentifierWithoutScale();
        }
        return resolver.fromSource(asset.downloaded ? asset.localUri : asset.uri);
      } else {
        return resolver.defaultAsset();
      }
    } catch (_unused) {
      return resolver.defaultAsset();
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQXNzZXQiLCJyZXF1aXJlIiwiX1BsYXRmb3JtVXRpbHMiLCJfcmVzb2x2ZUFzc2V0U291cmNlIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMiLCJzZXRUcmFuc2Zvcm1lciIsInJlc29sdmVBc3NldFNvdXJjZSIsInNldEN1c3RvbVNvdXJjZVRyYW5zZm9ybWVyIiwiZXhwb0Fzc2V0VHJhbnNmb3JtZXIiLCJyZXNvbHZlciIsImFzc2V0IiwiZmlsZUhhc2hlcyIsIkFzc2V0IiwiZnJvbU1ldGFkYXRhIiwidXJpIiwic3RhcnRzV2l0aCIsIkFORFJPSURfRU1CRURERURfVVJMX0JBU0VfUkVTT1VSQ0UiLCJyZXNvdXJjZUlkZW50aWZpZXJXaXRob3V0U2NhbGUiLCJmcm9tU291cmNlIiwiZG93bmxvYWRlZCIsImxvY2FsVXJpIiwiZGVmYXVsdEFzc2V0IiwiX3VudXNlZCJdLCJzb3VyY2VzIjpbIi4uL3NyYy9Bc3NldC5meC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IGRlZmF1bHQgYXMgQXNzZXRTb3VyY2VSZXNvbHZlciB9IGZyb20gJ3JlYWN0LW5hdGl2ZS9MaWJyYXJpZXMvSW1hZ2UvQXNzZXRTb3VyY2VSZXNvbHZlcic7XG5cbmltcG9ydCB7IEFzc2V0LCBBTkRST0lEX0VNQkVEREVEX1VSTF9CQVNFX1JFU09VUkNFIH0gZnJvbSAnLi9Bc3NldCc7XG5pbXBvcnQgeyBJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMgfSBmcm9tICcuL1BsYXRmb3JtVXRpbHMnO1xuaW1wb3J0IHJlc29sdmVBc3NldFNvdXJjZSwgeyBzZXRDdXN0b21Tb3VyY2VUcmFuc2Zvcm1lciB9IGZyb20gJy4vcmVzb2x2ZUFzc2V0U291cmNlJztcblxuLy8gT3ZlcnJpZGUgUmVhY3QgTmF0aXZlJ3MgYXNzZXQgcmVzb2x1dGlvbiBmb3IgYEltYWdlYCBjb21wb25lbnRzIGluIGNvbnRleHRzIHdoZXJlIGl0IG1hdHRlcnNcbmlmIChJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMpIHtcbiAgY29uc3Qgc2V0VHJhbnNmb3JtZXIgPVxuICAgIHJlc29sdmVBc3NldFNvdXJjZS5zZXRDdXN0b21Tb3VyY2VUcmFuc2Zvcm1lciB8fCBzZXRDdXN0b21Tb3VyY2VUcmFuc2Zvcm1lcjtcbiAgc2V0VHJhbnNmb3JtZXIoZnVuY3Rpb24gZXhwb0Fzc2V0VHJhbnNmb3JtZXIocmVzb2x2ZXIpIHtcbiAgICB0cnkge1xuICAgICAgLy8gQnVuZGxlciBpcyB1c2luZyB0aGUgaGFzaEFzc2V0RmlsZXMgcGx1Z2luIGlmIGFuZCBvbmx5IGlmIHRoZSBmaWxlSGFzaGVzIHByb3BlcnR5IGV4aXN0c1xuICAgICAgaWYgKCdmaWxlSGFzaGVzJyBpbiByZXNvbHZlci5hc3NldCAmJiByZXNvbHZlci5hc3NldC5maWxlSGFzaGVzKSB7XG4gICAgICAgIGNvbnN0IGFzc2V0ID0gQXNzZXQuZnJvbU1ldGFkYXRhKHJlc29sdmVyLmFzc2V0KTtcbiAgICAgICAgaWYgKGFzc2V0LnVyaS5zdGFydHNXaXRoKEFORFJPSURfRU1CRURERURfVVJMX0JBU0VfUkVTT1VSQ0UpKSB7XG4gICAgICAgICAgLy8gVE9ETyhAa2l0dGVuKTogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9leHBvL2V4cG8vY29tbWl0L2VjOTQwYjU3YTg3ZDk5YWI0ZjFkMDZkODcxMjZlNjYyYzNmMDRmMDQjcjE1NTM0MDk0M1xuICAgICAgICAgIC8vIEl0J3MgdW5jbGVhciB3aGV0aGVyIHRoaXMgaXMgc291bmQgc2luY2UgdGhpcyBtYXkgYmUgb3VyIG93biBBc3NldFNvdXJjZVJlc29sdmVyLCB3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2RcbiAgICAgICAgICAvLyBQbGVhc2UgY29tcGFyZSBgQXNzZXRTb3VyY2VSZXNvbHZlcmAgdHlwZSBmcm9tIGByZWFjdC1uYXRpdmUvTGlicmFyaWVzL0ltYWdlL0Fzc2V0U291cmNlUmVzb2x2ZXJgIGFnYWluc3QgYC4vQXNzZXRTb3VyY2VSZXNvbHZlcmBcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcmVzb2x2ZXIgYXMgdW5rbm93biBhcyBBc3NldFNvdXJjZVJlc29sdmVyXG4gICAgICAgICAgKS5yZXNvdXJjZUlkZW50aWZpZXJXaXRob3V0U2NhbGUoKSBhcyBhbnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmZyb21Tb3VyY2UoYXNzZXQuZG93bmxvYWRlZCA/IGFzc2V0LmxvY2FsVXJpISA6IGFzc2V0LnVyaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIuZGVmYXVsdEFzc2V0KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gcmVzb2x2ZXIuZGVmYXVsdEFzc2V0KCk7XG4gICAgfVxuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLG1CQUFBLEdBQUFDLHVCQUFBLENBQUFILE9BQUE7QUFHQSxJQUFJSSx1Q0FBd0IsRUFBRTtFQUM1QixJQUFNQyxjQUFjLEdBQ2xCQywyQkFBa0IsQ0FBQ0MsMEJBQTBCLElBQUlBLDhDQUEwQjtFQUM3RUYsY0FBYyxDQUFDLFNBQVNHLG9CQUFvQkEsQ0FBQ0MsUUFBUTtJQUNuRCxJQUFJO01BRUYsSUFBSSxZQUFZLElBQUlBLFFBQVEsQ0FBQ0MsS0FBSyxJQUFJRCxRQUFRLENBQUNDLEtBQUssQ0FBQ0MsVUFBVSxFQUFFO1FBQy9ELElBQU1ELEtBQUssR0FBR0UsWUFBSyxDQUFDQyxZQUFZLENBQUNKLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDO1FBQ2hELElBQUlBLEtBQUssQ0FBQ0ksR0FBRyxDQUFDQyxVQUFVLENBQUNDLHlDQUFrQyxDQUFDLEVBQUU7VUFJNUQsT0FDRVAsUUFDRCxDQUFDUSw4QkFBOEIsRUFBUztRQUMzQztRQUNBLE9BQU9SLFFBQVEsQ0FBQ1MsVUFBVSxDQUFDUixLQUFLLENBQUNTLFVBQVUsR0FBR1QsS0FBSyxDQUFDVSxRQUFTLEdBQUdWLEtBQUssQ0FBQ0ksR0FBRyxDQUFDO01BQzVFLENBQUMsTUFBTTtRQUNMLE9BQU9MLFFBQVEsQ0FBQ1ksWUFBWSxFQUFFO01BQ2hDO0lBQ0YsQ0FBQyxDQUFDLE9BQUFDLE9BQUEsRUFBTTtNQUNOLE9BQU9iLFFBQVEsQ0FBQ1ksWUFBWSxFQUFFO0lBQ2hDO0VBQ0YsQ0FBQyxDQUFDO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=