{"version":3,"names":[],"sources":["types.ts"],"sourcesContent":["export type RiskLevel = 'safe' | 'low' | 'medium' | 'high' | 'critical';\n\n// User Roles and Authentication\nexport type UserRole = 'parent' | 'child';\nexport type Gender = 'male' | 'female' | 'other';\nexport type ParentGender = Gender; // Alias for compatibility\n\nexport interface ParentAccount {\n  id: string;\n  name: string;\n  email?: string;\n  phone?: string;\n  avatar?: string;\n  passwordHash?: string; // Хеш пароля для аутентификации\n  pinCode?: string; // PIN-код для быстрого доступа\n  createdAt: number;\n  deviceId?: string;\n  language?: string;\n  children: ChildAccount[];\n  activeChildId?: string;\n  country?: string; // Для локализации и пола по умолчанию\n}\n\nexport interface ChildAccount {\n  id: string;\n  parentId: string; // Связь с родителем\n  name: string;\n  age?: number;\n  gender?: Gender; // Может зависеть от страны родителя\n  avatar?: string;\n  deviceId?: string;\n  createdAt: number;\n  permissions: ChildPermissions;\n  customSettings?: {\n    favoriteBackgrounds?: string[]; // ID любимых фонов\n    notificationSounds?: string[]; // Любимые звуки уведомлений\n  };\n}\n\nexport interface ChildPermissions {\n  canChangeBackgrounds: boolean; // Разрешено менять фоны чатов\n  canChangeSounds: boolean; // Разрешено менять звуки уведомлений\n  canAddContacts: boolean; // Разрешено добавлять контакты (с разрешения родителя)\n  canSendMessages: boolean; // Разрешено отправлять сообщения\n  canReceiveMessages: boolean; // Разрешено получать сообщения\n  // Всегда включено для безопасности:\n  // - родитель видит все сообщения\n  // - контент-фильтрация всегда активна\n  // - мониторинг всегда активен\n}\n\nexport interface Message {\n  id: string;\n  text: string;\n  senderId: string;\n  senderName: string;\n  timestamp: number;\n  riskLevel?: RiskLevel;\n  riskReasons?: string[];\n  analyzed: boolean;\n  imageUri?: string;\n  imageAnalyzed?: boolean;\n  imageBlocked?: boolean;\n  imageRiskReasons?: string[];\n}\n\nexport interface Chat {\n  id: string;\n  participants: string[];\n  participantNames: string[];\n  messages: Message[];\n  overallRisk: RiskLevel;\n  lastActivity: number;\n  isGroup?: boolean;\n  groupName?: string;\n  groupType?: 'class' | 'group' | 'club';\n  groupDescription?: string;\n  adminIds?: string[];\n  backgroundId?: string; // ID выбранного фона чата\n}\n\nexport interface RiskAnalysis {\n  riskLevel: RiskLevel;\n  reasons: string[];\n  confidence: number;\n  categories: string[];\n}\n\nexport interface Alert {\n  id: string;\n  chatId: string;\n  messageId: string;\n  riskLevel: RiskLevel;\n  timestamp: number;\n  reasons: string[];\n  resolved: boolean;\n  type?: 'auto' | 'sos';\n}\n\nexport interface SOSAlert {\n  id: string;\n  userId: string;\n  userName: string;\n  chatId?: string;\n  timestamp: number;\n  location?: { lat: number; lng: number };\n  message?: string;\n  resolved: boolean;\n  respondedBy?: string;\n  respondedAt?: number;\n}\n\nexport interface Contact {\n  id: string;\n  name: string;\n  phone?: string;\n  email?: string;\n  isWhitelisted: boolean;\n  addedBy: string;\n  addedAt: number;\n}\n\nexport interface TimeRestriction {\n  id: string;\n  userId: string;\n  dayOfWeek: number;\n  startHour: number;\n  startMinute: number;\n  endHour: number;\n  endMinute: number;\n  enabled: boolean;\n}\n\nexport interface UsageStats {\n  date: string;\n  messagesCount: number;\n  screenTime: number;\n  riskyInteractions: number;\n}\n\nexport interface ParentalSettings {\n  timeRestrictionsEnabled: boolean;\n  dailyUsageLimit: number;\n  requireApprovalForNewContacts: boolean;\n  blockUnknownContacts: boolean;\n  imageFilteringEnabled: boolean;\n  locationSharingEnabled: boolean;\n  sosNotificationsEnabled: boolean;\n  guardianEmails: string[];\n  guardianPhones: string[];\n}\n\nexport interface ComplianceLog {\n  id: string;\n  action: string;\n  userId: string;\n  timestamp: number;\n  details: Record<string, any>;\n  parentalConsent?: boolean;\n}\n\nexport type NotificationTestStatus = 'passed' | 'failed';\n\nexport type NotificationTestType = 'permissions' | 'token' | 'delivery' | 'sync';\n\nexport interface NotificationTestResult {\n  id: string;\n  type: NotificationTestType;\n  status: NotificationTestStatus;\n  message: string;\n  timestamp: number;\n  deviceLabel?: string;\n}\n\nexport interface NotificationDeviceRecord {\n  deviceId: string;\n  pushToken: string;\n  platform: 'ios' | 'android' | 'web';\n  appVersion?: string;\n  userId?: string;\n  permissions?: string;\n  lastSyncedAt: number;\n  lastTestedAt?: number;\n  testResults: NotificationTestResult[];\n}\n\n// Achievements System\nexport type AchievementCategory = 'safety' | 'communication' | 'responsibility' | 'streak' | 'special';\n\nexport type AchievementRarity = 'common' | 'rare' | 'epic' | 'legendary';\n\nexport interface Achievement {\n  id: string;\n  title: string;\n  description: string;\n  icon: string; // emoji or icon name\n  category: AchievementCategory;\n  rarity: AchievementRarity;\n  points: number;\n  requirement: {\n    type: 'messages_sent' | 'safe_days' | 'streak_days' | 'alerts_resolved' | 'no_risks' | 'group_chats' | 'special';\n    target: number;\n    condition?: string;\n  };\n  unlockedAt?: number;\n  progress?: number;\n}\n\nexport interface UserAchievement {\n  achievementId: string;\n  unlockedAt: number;\n  progress: number;\n}\n\nexport interface AchievementStats {\n  totalAchievements: number;\n  unlockedCount: number;\n  totalPoints: number;\n  level: number;\n  pointsToNextLevel: number;\n  categoryBreakdown: Record<AchievementCategory, { unlocked: number; total: number }>;\n}\n\n// Interactive Lessons System\nexport type LessonCategory = 'safety' | 'privacy' | 'communication' | 'behavior' | 'emergency';\n\nexport type LessonStepType = 'text' | 'image' | 'scenario' | 'interactive' | 'quiz';\n\nexport interface LessonStep {\n  id: string;\n  type: LessonStepType;\n  title?: string;\n  content: string;\n  imageUri?: string;\n  options?: {\n    id: string;\n    text: string;\n    isCorrect?: boolean;\n    feedback?: string;\n  }[];\n  correctAnswerId?: string;\n  feedback?: string;\n}\n\nexport interface QuizQuestion {\n  id: string;\n  question: string;\n  options: {\n    id: string;\n    text: string;\n    isCorrect: boolean;\n    explanation?: string;\n  }[];\n  explanation?: string;\n}\n\nexport interface Lesson {\n  id: string;\n  title: string;\n  description: string;\n  icon: string; // emoji\n  category: LessonCategory;\n  difficulty: 'easy' | 'medium' | 'hard';\n  duration: number; // minutes\n  steps: LessonStep[];\n  quiz?: QuizQuestion[];\n  prerequisites?: string[]; // lesson IDs\n  unlockedAt?: number;\n  completedAt?: number;\n  progress?: number; // 0-100\n}\n\nexport interface UserLessonProgress {\n  lessonId: string;\n  currentStep: number;\n  completedSteps: number[];\n  quizScore?: number;\n  completedAt?: number;\n  startedAt?: number;\n}\n\nexport interface LessonStats {\n  totalLessons: number;\n  completedCount: number;\n  inProgressCount: number;\n  totalTimeSpent: number; // minutes\n  averageScore: number;\n  categoryProgress: Record<LessonCategory, { completed: number; total: number }>;\n}\n\n// Chat Backgrounds System\nexport type BackgroundType = 'solid' | 'gradient' | 'pattern';\n\nexport interface ChatBackground {\n  id: string;\n  name: string;\n  type: BackgroundType;\n  preview: string; // emoji или цвет для превью\n  // Для solid цвета\n  color?: string;\n  // Для градиентов\n  gradient?: string[]; // массив цветов для LinearGradient\n  gradientDirection?: { start: { x: number; y: number }; end: { x: number; y: number } };\n  // Для паттернов (будущее расширение)\n  pattern?: string;\n  isDefault?: boolean;\n  isCustom?: boolean; // пользовательский фон\n}\n"],"mappings":"","ignoreList":[]}