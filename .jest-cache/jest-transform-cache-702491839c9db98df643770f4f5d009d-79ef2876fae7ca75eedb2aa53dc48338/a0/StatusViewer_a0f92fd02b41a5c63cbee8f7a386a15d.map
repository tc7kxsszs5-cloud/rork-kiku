{"version":3,"names":["React","useState","View","Text","StyleSheet","TouchableOpacity","Image","Platform","X","Play","useThemeMode","Video","ExpoVideo","ResizeMode","jsx","_jsx","jsxs","_jsxs","StatusViewer","_ref","statuses","currentIndex","onClose","onNext","onPrevious","_useThemeMode","theme","_useState","_useState2","_slicedToArray","isPlaying","setIsPlaying","_useState3","_useState4","videoRef","setVideoRef","currentStatus","styles","createStyles","handlePlayPause","type","pauseAsync","playAsync","style","container","children","header","userInfo","userAvatar","source","uri","avatar","userName","timeAgo","Date","createdAt","toLocaleTimeString","hour","minute","onPress","closeButton","size","color","mediaContainer","mediaUrl","media","resizeMode","videoContainer","ref","video","shouldPlay","isLooping","CONTAIN","playButton","caption","captionContainer","navigation","navButton","navButtonText","dots","map","_","index","dot","dotActive","create","flex","backgroundColor","flexDirection","justifyContent","alignItems","padding","paddingTop","OS","gap","width","height","borderRadius","borderWidth","borderColor","fontSize","fontWeight","position","bottom","left","right","textShadowColor","textShadowOffset","textShadowRadius","paddingBottom"],"sources":["StatusViewer.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Platform,\n} from 'react-native';\nimport { X, Play } from 'lucide-react-native';\nimport { useThemeMode } from '@/constants/ThemeContext';\nimport { Video as ExpoVideo, ResizeMode } from 'expo-av';\n\ninterface Status {\n  id: string;\n  userId: string;\n  userName: string;\n  userAvatar?: string;\n  type: 'photo' | 'video';\n  mediaUrl: string;\n  thumbnailUrl?: string;\n  caption?: string;\n  createdAt: number;\n  views: number;\n}\n\ninterface StatusViewerProps {\n  statuses: Status[];\n  currentIndex: number;\n  onClose: () => void;\n  onNext: () => void;\n  onPrevious: () => void;\n}\n\nexport function StatusViewer({ statuses, currentIndex, onClose, onNext, onPrevious }: StatusViewerProps) {\n  const { theme } = useThemeMode();\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [videoRef, setVideoRef] = useState<ExpoVideo | null>(null);\n  const currentStatus = statuses[currentIndex];\n\n  const styles = createStyles(theme);\n\n  if (!currentStatus) {\n    return null;\n  }\n\n  const handlePlayPause = () => {\n    if (currentStatus.type === 'video' && videoRef) {\n      if (isPlaying) {\n        videoRef.pauseAsync();\n      } else {\n        videoRef.playAsync();\n      }\n      setIsPlaying(!isPlaying);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Заголовок */}\n      <View style={styles.header}>\n        <View style={styles.userInfo}>\n          {currentStatus.userAvatar && (\n            <Image source={{ uri: currentStatus.userAvatar }} style={styles.avatar} />\n          )}\n          <View>\n            <Text style={styles.userName}>{currentStatus.userName}</Text>\n            <Text style={styles.timeAgo}>\n              {new Date(currentStatus.createdAt).toLocaleTimeString('ru-RU', {\n                hour: '2-digit',\n                minute: '2-digit',\n              })}\n            </Text>\n          </View>\n        </View>\n        <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n          <X size={24} color=\"#fff\" />\n        </TouchableOpacity>\n      </View>\n\n      {/* Медиа контент */}\n      <View style={styles.mediaContainer}>\n        {currentStatus.type === 'photo' ? (\n          <Image source={{ uri: currentStatus.mediaUrl }} style={styles.media} resizeMode={\"contain\" as const} />\n        ) : (\n          <View style={styles.videoContainer}>\n            <ExpoVideo\n              ref={(ref) => setVideoRef(ref)}\n              source={{ uri: currentStatus.mediaUrl }}\n              style={styles.video}\n              shouldPlay={isPlaying}\n              isLooping\n              resizeMode={ResizeMode.CONTAIN}\n            />\n            <TouchableOpacity onPress={handlePlayPause} style={styles.playButton}>\n              {!isPlaying && <Play size={48} color=\"#fff\" />}\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {/* Подпись */}\n        {currentStatus.caption && (\n          <View style={styles.captionContainer}>\n            <Text style={styles.caption}>{currentStatus.caption}</Text>\n          </View>\n        )}\n      </View>\n\n      {/* Навигация */}\n      <View style={styles.navigation}>\n        <TouchableOpacity onPress={onPrevious} style={styles.navButton}>\n          <Text style={styles.navButtonText}>←</Text>\n        </TouchableOpacity>\n        <View style={styles.dots}>\n          {statuses.map((_, index) => (\n            <View\n              key={index}\n              style={[styles.dot, index === currentIndex && styles.dotActive]}\n            />\n          ))}\n        </View>\n        <TouchableOpacity onPress={onNext} style={styles.navButton}>\n          <Text style={styles.navButtonText}>→</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst createStyles = (theme: any) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: Platform.OS === 'ios' ? 50 : 16,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  avatar: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    borderWidth: 2,\n    borderColor: '#fff',\n  },\n  userName: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  timeAgo: {\n    color: '#999',\n    fontSize: 12,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  mediaContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  media: {\n    width: '100%',\n    height: '100%',\n  },\n  videoContainer: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  video: {\n    width: '100%',\n    height: '100%',\n  },\n  playButton: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  captionContainer: {\n    position: 'absolute',\n    bottom: 100,\n    left: 0,\n    right: 0,\n    padding: 16,\n  },\n  caption: {\n    color: '#fff',\n    fontSize: 16,\n    textShadowColor: 'rgba(0, 0, 0, 0.5)',\n    textShadowOffset: { width: 0, height: 1 },\n    textShadowRadius: 3,\n  },\n  navigation: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingBottom: Platform.OS === 'ios' ? 40 : 16,\n  },\n  navButton: {\n    padding: 12,\n  },\n  navButtonText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  dots: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  dot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n  },\n  dotActive: {\n    backgroundColor: '#fff',\n    width: 24,\n  },\n});\n"],"mappings":"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","ignoreList":[]}