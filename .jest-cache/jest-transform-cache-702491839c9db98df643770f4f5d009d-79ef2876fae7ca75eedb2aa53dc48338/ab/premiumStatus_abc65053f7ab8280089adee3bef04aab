041265603b8a032ac5ab7838da9f308e
export function isTrialExpired(status, currentTime) {
  if (status.tier !== 'trial') return false;
  if (!status.trialEndDate) return false;
  return currentTime > status.trialEndDate;
}
export function isSubscriptionExpired(status, currentTime) {
  if (status.tier !== 'premium') return false;
  if (!status.subscriptionEndDate) return false;
  return currentTime > status.subscriptionEndDate;
}
export function checkSubscriptionStatus(status, currentTime) {
  var newStatus = Object.assign({}, status);
  if (status.tier === 'trial' && status.trialEndDate) {
    if (currentTime > status.trialEndDate) {
      newStatus.tier = 'free';
      newStatus.features = {
        advancedAnalytics: false,
        extendedHistory: false,
        multipleChildren: false,
        prioritySupport: false,
        customAlerts: false,
        exportData: false,
        aiRecommendations: false
      };
      newStatus.trialEndDate = undefined;
      return {
        updated: true,
        newStatus: newStatus
      };
    }
  }
  if (status.tier === 'premium' && status.subscriptionEndDate) {
    if (currentTime > status.subscriptionEndDate) {
      newStatus.tier = 'free';
      newStatus.features = {
        advancedAnalytics: false,
        extendedHistory: false,
        multipleChildren: false,
        prioritySupport: false,
        customAlerts: false,
        exportData: false,
        aiRecommendations: false
      };
      newStatus.subscriptionId = undefined;
      newStatus.subscriptionStartDate = undefined;
      newStatus.subscriptionEndDate = undefined;
      return {
        updated: true,
        newStatus: newStatus
      };
    }
  }
  return {
    updated: false,
    newStatus: status
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc1RyaWFsRXhwaXJlZCIsInN0YXR1cyIsImN1cnJlbnRUaW1lIiwidGllciIsInRyaWFsRW5kRGF0ZSIsImlzU3Vic2NyaXB0aW9uRXhwaXJlZCIsInN1YnNjcmlwdGlvbkVuZERhdGUiLCJjaGVja1N1YnNjcmlwdGlvblN0YXR1cyIsIm5ld1N0YXR1cyIsIk9iamVjdCIsImFzc2lnbiIsImZlYXR1cmVzIiwiYWR2YW5jZWRBbmFseXRpY3MiLCJleHRlbmRlZEhpc3RvcnkiLCJtdWx0aXBsZUNoaWxkcmVuIiwicHJpb3JpdHlTdXBwb3J0IiwiY3VzdG9tQWxlcnRzIiwiZXhwb3J0RGF0YSIsImFpUmVjb21tZW5kYXRpb25zIiwidW5kZWZpbmVkIiwidXBkYXRlZCIsInN1YnNjcmlwdGlvbklkIiwic3Vic2NyaXB0aW9uU3RhcnREYXRlIl0sInNvdXJjZXMiOlsicHJlbWl1bVN0YXR1cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqINCn0LjRgdGC0YvQtSDQtNC10YLQtdGA0LzQuNC90LjRgNC+0LLQsNC90L3Ri9C1INGE0YPQvdC60YbQuNC4INC00LvRjyDQv9GA0L7QstC10YDQutC4INGB0YLQsNGC0YPRgdCwIHByZW1pdW0g0L/QvtC00L/QuNGB0LrQuFxuICog0JLRi9C90LXRgdC10L3QviDQuNC3IFByZW1pdW1Db250ZXh0INC00LvRjyDQvNC+0LTRg9C70YzQvdC+0LPQviDRgtC10YHRgtC40YDQvtCy0LDQvdC40Y9cbiAqL1xuXG5pbXBvcnQgeyBQcmVtaXVtU3RhdHVzLCBQcmVtaXVtVGllciB9IGZyb20gJ0AvY29uc3RhbnRzL1ByZW1pdW1Db250ZXh0JztcblxuLyoqXG4gKiDQn9GA0L7QstC10YDRj9C10YIsINC40YHRgtC10LrQu9CwINC70LggdHJpYWwg0L/QvtC00L/QuNGB0LrQsFxuICog0KfQuNGB0YLQsNGPINC00LXRgtC10YDQvNC40L3QuNGA0L7QstCw0L3QvdCw0Y8g0YTRg9C90LrRhtC40Y9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVHJpYWxFeHBpcmVkKHN0YXR1czogUHJlbWl1bVN0YXR1cywgY3VycmVudFRpbWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICBpZiAoc3RhdHVzLnRpZXIgIT09ICd0cmlhbCcpIHJldHVybiBmYWxzZTtcbiAgaWYgKCFzdGF0dXMudHJpYWxFbmREYXRlKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBjdXJyZW50VGltZSA+IHN0YXR1cy50cmlhbEVuZERhdGU7XG59XG5cbi8qKlxuICog0J/RgNC+0LLQtdGA0Y/QtdGCLCDQuNGB0YLQtdC60LvQsCDQu9C4IHByZW1pdW0g0L/QvtC00L/QuNGB0LrQsFxuICog0KfQuNGB0YLQsNGPINC00LXRgtC10YDQvNC40L3QuNGA0L7QstCw0L3QvdCw0Y8g0YTRg9C90LrRhtC40Y9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3Vic2NyaXB0aW9uRXhwaXJlZChzdGF0dXM6IFByZW1pdW1TdGF0dXMsIGN1cnJlbnRUaW1lOiBudW1iZXIpOiBib29sZWFuIHtcbiAgaWYgKHN0YXR1cy50aWVyICE9PSAncHJlbWl1bScpIHJldHVybiBmYWxzZTtcbiAgaWYgKCFzdGF0dXMuc3Vic2NyaXB0aW9uRW5kRGF0ZSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gY3VycmVudFRpbWUgPiBzdGF0dXMuc3Vic2NyaXB0aW9uRW5kRGF0ZTtcbn1cblxuLyoqXG4gKiDQn9GA0L7QstC10YDRj9C10YIg0YHRgtCw0YLRg9GBINC/0L7QtNC/0LjRgdC60Lgg0Lgg0LLQvtC30LLRgNCw0YnQsNC10YIg0L7QsdC90L7QstC70LXQvdC90YvQuSDRgdGC0LDRgtGD0YEg0LXRgdC70Lgg0L3Rg9C20L3QvlxuICog0KfQuNGB0YLQsNGPINC00LXRgtC10YDQvNC40L3QuNGA0L7QstCw0L3QvdCw0Y8g0YTRg9C90LrRhtC40Y9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrU3Vic2NyaXB0aW9uU3RhdHVzKFxuICBzdGF0dXM6IFByZW1pdW1TdGF0dXMsXG4gIGN1cnJlbnRUaW1lOiBudW1iZXJcbik6IHsgdXBkYXRlZDogYm9vbGVhbjsgbmV3U3RhdHVzOiBQcmVtaXVtU3RhdHVzIH0ge1xuICBjb25zdCBuZXdTdGF0dXMgPSB7IC4uLnN0YXR1cyB9O1xuXG4gIC8vINCf0YDQvtCy0LXRgNC60LAgdHJpYWxcbiAgaWYgKHN0YXR1cy50aWVyID09PSAndHJpYWwnICYmIHN0YXR1cy50cmlhbEVuZERhdGUpIHtcbiAgICBpZiAoY3VycmVudFRpbWUgPiBzdGF0dXMudHJpYWxFbmREYXRlKSB7XG4gICAgICAvLyBUcmlhbCDQuNGB0YLQtdC6XG4gICAgICBuZXdTdGF0dXMudGllciA9ICdmcmVlJztcbiAgICAgIG5ld1N0YXR1cy5mZWF0dXJlcyA9IHtcbiAgICAgICAgYWR2YW5jZWRBbmFseXRpY3M6IGZhbHNlLFxuICAgICAgICBleHRlbmRlZEhpc3Rvcnk6IGZhbHNlLFxuICAgICAgICBtdWx0aXBsZUNoaWxkcmVuOiBmYWxzZSxcbiAgICAgICAgcHJpb3JpdHlTdXBwb3J0OiBmYWxzZSxcbiAgICAgICAgY3VzdG9tQWxlcnRzOiBmYWxzZSxcbiAgICAgICAgZXhwb3J0RGF0YTogZmFsc2UsXG4gICAgICAgIGFpUmVjb21tZW5kYXRpb25zOiBmYWxzZSxcbiAgICAgIH07XG4gICAgICBuZXdTdGF0dXMudHJpYWxFbmREYXRlID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHsgdXBkYXRlZDogdHJ1ZSwgbmV3U3RhdHVzIH07XG4gICAgfVxuICB9XG5cbiAgLy8g0J/RgNC+0LLQtdGA0LrQsCBzdWJzY3JpcHRpb25cbiAgaWYgKHN0YXR1cy50aWVyID09PSAncHJlbWl1bScgJiYgc3RhdHVzLnN1YnNjcmlwdGlvbkVuZERhdGUpIHtcbiAgICBpZiAoY3VycmVudFRpbWUgPiBzdGF0dXMuc3Vic2NyaXB0aW9uRW5kRGF0ZSkge1xuICAgICAgLy8g0J/QvtC00L/QuNGB0LrQsCDQuNGB0YLQtdC60LvQsFxuICAgICAgbmV3U3RhdHVzLnRpZXIgPSAnZnJlZSc7XG4gICAgICBuZXdTdGF0dXMuZmVhdHVyZXMgPSB7XG4gICAgICAgIGFkdmFuY2VkQW5hbHl0aWNzOiBmYWxzZSxcbiAgICAgICAgZXh0ZW5kZWRIaXN0b3J5OiBmYWxzZSxcbiAgICAgICAgbXVsdGlwbGVDaGlsZHJlbjogZmFsc2UsXG4gICAgICAgIHByaW9yaXR5U3VwcG9ydDogZmFsc2UsXG4gICAgICAgIGN1c3RvbUFsZXJ0czogZmFsc2UsXG4gICAgICAgIGV4cG9ydERhdGE6IGZhbHNlLFxuICAgICAgICBhaVJlY29tbWVuZGF0aW9uczogZmFsc2UsXG4gICAgICB9O1xuICAgICAgbmV3U3RhdHVzLnN1YnNjcmlwdGlvbklkID0gdW5kZWZpbmVkO1xuICAgICAgbmV3U3RhdHVzLnN1YnNjcmlwdGlvblN0YXJ0RGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIG5ld1N0YXR1cy5zdWJzY3JpcHRpb25FbmREYXRlID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHsgdXBkYXRlZDogdHJ1ZSwgbmV3U3RhdHVzIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHsgdXBkYXRlZDogZmFsc2UsIG5ld1N0YXR1czogc3RhdHVzIH07XG59XG4iXSwibWFwcGluZ3MiOiJBQVdBLE9BQU8sU0FBU0EsY0FBY0EsQ0FBQ0MsTUFBcUIsRUFBRUMsV0FBbUIsRUFBVztFQUNsRixJQUFJRCxNQUFNLENBQUNFLElBQUksS0FBSyxPQUFPLEVBQUUsT0FBTyxLQUFLO0VBQ3pDLElBQUksQ0FBQ0YsTUFBTSxDQUFDRyxZQUFZLEVBQUUsT0FBTyxLQUFLO0VBQ3RDLE9BQU9GLFdBQVcsR0FBR0QsTUFBTSxDQUFDRyxZQUFZO0FBQzFDO0FBTUEsT0FBTyxTQUFTQyxxQkFBcUJBLENBQUNKLE1BQXFCLEVBQUVDLFdBQW1CLEVBQVc7RUFDekYsSUFBSUQsTUFBTSxDQUFDRSxJQUFJLEtBQUssU0FBUyxFQUFFLE9BQU8sS0FBSztFQUMzQyxJQUFJLENBQUNGLE1BQU0sQ0FBQ0ssbUJBQW1CLEVBQUUsT0FBTyxLQUFLO0VBQzdDLE9BQU9KLFdBQVcsR0FBR0QsTUFBTSxDQUFDSyxtQkFBbUI7QUFDakQ7QUFNQSxPQUFPLFNBQVNDLHVCQUF1QkEsQ0FDckNOLE1BQXFCLEVBQ3JCQyxXQUFtQixFQUM2QjtFQUNoRCxJQUFNTSxTQUFTLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxLQUFRVCxNQUFNLENBQUU7RUFHL0IsSUFBSUEsTUFBTSxDQUFDRSxJQUFJLEtBQUssT0FBTyxJQUFJRixNQUFNLENBQUNHLFlBQVksRUFBRTtJQUNsRCxJQUFJRixXQUFXLEdBQUdELE1BQU0sQ0FBQ0csWUFBWSxFQUFFO01BRXJDSSxTQUFTLENBQUNMLElBQUksR0FBRyxNQUFNO01BQ3ZCSyxTQUFTLENBQUNHLFFBQVEsR0FBRztRQUNuQkMsaUJBQWlCLEVBQUUsS0FBSztRQUN4QkMsZUFBZSxFQUFFLEtBQUs7UUFDdEJDLGdCQUFnQixFQUFFLEtBQUs7UUFDdkJDLGVBQWUsRUFBRSxLQUFLO1FBQ3RCQyxZQUFZLEVBQUUsS0FBSztRQUNuQkMsVUFBVSxFQUFFLEtBQUs7UUFDakJDLGlCQUFpQixFQUFFO01BQ3JCLENBQUM7TUFDRFYsU0FBUyxDQUFDSixZQUFZLEdBQUdlLFNBQVM7TUFDbEMsT0FBTztRQUFFQyxPQUFPLEVBQUUsSUFBSTtRQUFFWixTQUFTLEVBQVRBO01BQVUsQ0FBQztJQUNyQztFQUNGO0VBR0EsSUFBSVAsTUFBTSxDQUFDRSxJQUFJLEtBQUssU0FBUyxJQUFJRixNQUFNLENBQUNLLG1CQUFtQixFQUFFO0lBQzNELElBQUlKLFdBQVcsR0FBR0QsTUFBTSxDQUFDSyxtQkFBbUIsRUFBRTtNQUU1Q0UsU0FBUyxDQUFDTCxJQUFJLEdBQUcsTUFBTTtNQUN2QkssU0FBUyxDQUFDRyxRQUFRLEdBQUc7UUFDbkJDLGlCQUFpQixFQUFFLEtBQUs7UUFDeEJDLGVBQWUsRUFBRSxLQUFLO1FBQ3RCQyxnQkFBZ0IsRUFBRSxLQUFLO1FBQ3ZCQyxlQUFlLEVBQUUsS0FBSztRQUN0QkMsWUFBWSxFQUFFLEtBQUs7UUFDbkJDLFVBQVUsRUFBRSxLQUFLO1FBQ2pCQyxpQkFBaUIsRUFBRTtNQUNyQixDQUFDO01BQ0RWLFNBQVMsQ0FBQ2EsY0FBYyxHQUFHRixTQUFTO01BQ3BDWCxTQUFTLENBQUNjLHFCQUFxQixHQUFHSCxTQUFTO01BQzNDWCxTQUFTLENBQUNGLG1CQUFtQixHQUFHYSxTQUFTO01BQ3pDLE9BQU87UUFBRUMsT0FBTyxFQUFFLElBQUk7UUFBRVosU0FBUyxFQUFUQTtNQUFVLENBQUM7SUFDckM7RUFDRjtFQUVBLE9BQU87SUFBRVksT0FBTyxFQUFFLEtBQUs7SUFBRVosU0FBUyxFQUFFUDtFQUFPLENBQUM7QUFDOUMiLCJpZ25vcmVMaXN0IjpbXX0=