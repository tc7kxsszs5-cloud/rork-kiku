{"version":3,"names":["_getJestObj","mock","useRouter","push","jest","fn","replace","back","useSegments","useAuth","isAuthenticated","userId","role","_interopRequireDefault","require","default","_asyncToGenerator2","_react","_reactNative","_jsxRuntime","_require2","describe","test","_require","RootLayout","_render","render","jsx","getByTestId","waitFor","expect","toBeTruthy","layoutContent","readFileSync","join","__dirname","toContain"],"sources":["app-flow.test.tsx"],"sourcesContent":["/**\n * E2E тесты основного потока приложения\n */\n\nimport React from 'react';\nimport { render, fireEvent, waitFor } from '@testing-library/react-native';\n\n// Моки\njest.mock('expo-router', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n  }),\n  useSegments: () => [],\n}));\n\njest.mock('@/constants/AuthContext', () => ({\n  useAuth: () => ({\n    isAuthenticated: false,\n    userId: null,\n    role: null,\n  }),\n}));\n\ndescribe('E2E: Основной поток приложения', () => {\n  test('Приложение запускается без ошибок', async () => {\n    const { RootLayout } = require('@/app/_layout');\n    \n    const { getByTestId } = render(<RootLayout />);\n    \n    await waitFor(() => {\n      expect(getByTestId).toBeTruthy();\n    });\n  });\n\n  test('Неаутентифицированный пользователь перенаправляется на выбор роли', async () => {\n    // Тест логики редиректа\n    const layoutContent = require('fs').readFileSync(\n      require('path').join(__dirname, '../../app/_layout.tsx'),\n      'utf-8'\n    );\n\n    expect(layoutContent).toContain('role-selection');\n    expect(layoutContent).toContain('isAuthenticated');\n  });\n});\n"],"mappings":"AAQAA,WAAA,GAAKC,IAAI,CAAC,aAAa,EAAE;EAAA,OAAO;IAC9BC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAS;QAChBC,IAAI,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;QACfC,OAAO,EAAEF,IAAI,CAACC,EAAE,CAAC,CAAC;QAClBE,IAAI,EAAEH,IAAI,CAACC,EAAE,CAAC;MAChB,CAAC;IAAA,CAAC;IACFG,WAAW,EAAE,SAAbA,WAAWA,CAAA;MAAA,OAAQ,EAAE;IAAA;EACvB,CAAC;AAAA,CAAC,CAAC;AAEHR,WAAA,GAAKC,IAAI,CAAC,yBAAyB,EAAE;EAAA,OAAO;IAC1CQ,OAAO,EAAE,SAATA,OAAOA,CAAA;MAAA,OAAS;QACdC,eAAe,EAAE,KAAK;QACtBC,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE;MACR,CAAC;IAAA;EACH,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAC,sBAAA,GAAAC,OAAA,iDAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AAnBJ,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AAA2E,IAAAK,WAAA,GAAAL,OAAA;AAAA,SAAAd,YAAA;EAAA,IAAAoB,SAAA,GAAAN,OAAA;IAAAV,IAAA,GAAAgB,SAAA,CAAAhB,IAAA;EAAAJ,WAAA,YAAAA,YAAA;IAAA,OAAAI,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAoB3EiB,QAAQ,CAAC,gCAAgC,EAAE,YAAM;EAC/CC,IAAI,CAAC,mCAAmC,MAAAN,kBAAA,CAAAD,OAAA,EAAE,aAAY;IACpD,IAAAQ,QAAA,GAAuBT,OAAO,CAAC,eAAe,CAAC;MAAvCU,UAAU,GAAAD,QAAA,CAAVC,UAAU;IAElB,IAAAC,OAAA,GAAwB,IAAAC,mBAAM,EAAC,IAAAP,WAAA,CAAAQ,GAAA,EAACH,UAAU,IAAE,CAAC,CAAC;MAAtCI,WAAW,GAAAH,OAAA,CAAXG,WAAW;IAEnB,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAACF,WAAW,CAAC,CAACG,UAAU,CAAC,CAAC;IAClC,CAAC,CAAC;EACJ,CAAC,EAAC;EAEFT,IAAI,CAAC,mEAAmE,MAAAN,kBAAA,CAAAD,OAAA,EAAE,aAAY;IAEpF,IAAMiB,aAAa,GAAGlB,OAAO,CAAC,IAAI,CAAC,CAACmB,YAAY,CAC9CnB,OAAO,CAAC,MAAM,CAAC,CAACoB,IAAI,CAACC,SAAS,EAAE,uBAAuB,CAAC,EACxD,OACF,CAAC;IAEDL,MAAM,CAACE,aAAa,CAAC,CAACI,SAAS,CAAC,gBAAgB,CAAC;IACjDN,MAAM,CAACE,aAAa,CAAC,CAACI,SAAS,CAAC,iBAAiB,CAAC;EACpD,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}