af4092ebec88039a48cd7afac30a202b
import _toConsumableArray from "@babel/runtime/helpers/toConsumableArray";
import _asyncToGenerator from "@babel/runtime/helpers/asyncToGenerator";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import createContextHook from '@nkzw/create-context-hook';
import { useState, useCallback, useMemo, useEffect, useRef } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { calculateMetrics } from '@/utils/analyticsMetrics';
import { saveStoredVersion, needsMigration, APP_DATA_VERSION } from '@/utils/versioning';
import { getMigrationManager } from '@/utils/migrations';
import { logger } from '@/utils/logger';
var ANALYTICS_STORAGE_KEY = '@kiku_analytics';
var CURRENT_ANALYTICS_VERSION = APP_DATA_VERSION;
var DEFAULT_METRICS = {
  totalMessages: 0,
  totalAlerts: 0,
  totalSOS: 0,
  messagesAnalyzed: 0,
  alertsResolved: 0,
  averageRiskLevel: 0,
  mostActiveChat: null,
  riskDistribution: {
    safe: 0,
    low: 0,
    medium: 0,
    high: 0,
    critical: 0
  },
  eventsByType: {},
  dailyActivity: [],
  totalInstalls: 0,
  totalActivations: 0,
  activationRate: 0,
  totalSessions: 0,
  averageSessionDuration: 0,
  retention: {
    d1: 0,
    d7: 0,
    d30: 0
  },
  featureUsage: {},
  premiumSubscribers: 0,
  premiumTrialUsers: 0,
  premiumConversionRate: 0,
  dau: 0,
  mau: 0,
  threatDetectionRate: 0,
  falsePositiveRate: 0,
  falseNegativeRate: 0,
  averageAlertResponseTime: 0,
  averageSOSResponseTime: 0,
  aiAnalysisAccuracy: 0,
  aiAnalysisSpeed: 0,
  imageAnalysisAccuracy: 0,
  sessionsPerUserWeekly: 0,
  messagesAnalyzedPerDay: 0,
  featureAdoptionRate: 0,
  parentChildPairCompletionRate: 0,
  geographicExpansion: 0,
  appStoreRating: 0,
  nps: 0,
  arr: 0,
  cac: 0,
  ltv: 0,
  ltvCacRatio: 0,
  userGrowthRate: 0
};
var _createContextHook = createContextHook(function () {
    var _useState = useState([]),
      _useState2 = _slicedToArray(_useState, 2),
      events = _useState2[0],
      setEvents = _useState2[1];
    var isMountedRef = useRef(true);
    useEffect(function () {
      return function () {
        isMountedRef.current = false;
      };
    }, []);
    useEffect(function () {
      var loadAnalytics = function () {
        var _ref = _asyncToGenerator(function* () {
          try {
            var stored = yield AsyncStorage.getItem(ANALYTICS_STORAGE_KEY);
            if (!stored) {
              return;
            }
            if (!isMountedRef.current) {
              return;
            }
            var parsed = JSON.parse(stored);
            var currentVersion = parsed.version || 1;
            if (needsMigration(currentVersion, CURRENT_ANALYTICS_VERSION)) {
              console.log(`[AnalyticsContext] Migrating from version ${currentVersion} to ${CURRENT_ANALYTICS_VERSION}`);
              try {
                var migrationManager = getMigrationManager();
                var result = yield migrationManager.migrate(parsed, currentVersion, CURRENT_ANALYTICS_VERSION);
                if (result.success) {
                  parsed = result.data;
                  yield AsyncStorage.setItem(ANALYTICS_STORAGE_KEY, JSON.stringify(parsed));
                  yield saveStoredVersion(ANALYTICS_STORAGE_KEY, CURRENT_ANALYTICS_VERSION);
                  logger.info(`Successfully migrated to version ${CURRENT_ANALYTICS_VERSION}`, {
                    context: 'AnalyticsContext',
                    action: 'migrate',
                    toVersion: CURRENT_ANALYTICS_VERSION
                  });
                } else {
                  if (result.error) {
                    var errorMessage = typeof result.error === 'string' ? result.error : String(result.error);
                    var migrationError = new Error(errorMessage);
                    logger.error('Migration failed', migrationError, {
                      context: 'AnalyticsContext',
                      action: 'migrate',
                      errorMessage: errorMessage
                    });
                  } else {
                    logger.error('Migration failed', new Error('Unknown migration error'), {
                      context: 'AnalyticsContext',
                      action: 'migrate'
                    });
                  }
                }
              } catch (migrationError) {
                logger.error('Migration error', migrationError instanceof Error ? migrationError : new Error(String(migrationError)), {
                  context: 'AnalyticsContext',
                  action: 'migrate'
                });
              }
            }
            var _events = parsed.events || parsed;
            if (isMountedRef.current) {
              setEvents(Array.isArray(_events) ? _events : []);
            }
          } catch (error) {
            logger.error('Failed to load analytics', error instanceof Error ? error : new Error(String(error)), {
              context: 'AnalyticsContext',
              action: 'loadAnalytics'
            });
          }
        });
        return function loadAnalytics() {
          return _ref.apply(this, arguments);
        };
      }();
      loadAnalytics();
    }, []);
    useEffect(function () {
      var saveAnalytics = function () {
        var _ref2 = _asyncToGenerator(function* () {
          try {
            var versionedData = {
              version: CURRENT_ANALYTICS_VERSION,
              events: events,
              updatedAt: Date.now()
            };
            yield AsyncStorage.setItem(ANALYTICS_STORAGE_KEY, JSON.stringify(versionedData));
            yield saveStoredVersion(ANALYTICS_STORAGE_KEY, CURRENT_ANALYTICS_VERSION);
          } catch (error) {
            console.error('[AnalyticsContext] Failed to save analytics:', error);
          }
        });
        return function saveAnalytics() {
          return _ref2.apply(this, arguments);
        };
      }();
      if (events.length > 0) {
        saveAnalytics();
      }
    }, [events]);
    var trackEvent = useCallback(function (event, properties) {
      if (!isMountedRef.current) {
        return;
      }
      var eventData = {
        event: event,
        timestamp: Date.now(),
        properties: properties
      };
      setEvents(function (prev) {
        var updated = [].concat(_toConsumableArray(prev), [eventData]);
        return updated.slice(-10000);
      });
      logger.info('Event tracked', {
        context: 'AnalyticsContext',
        action: 'trackEvent',
        event: event,
        properties: properties
      });
    }, []);
    var clearAnalytics = useCallback(_asyncToGenerator(function* () {
      setEvents([]);
      try {
        yield AsyncStorage.removeItem(ANALYTICS_STORAGE_KEY);
      } catch (error) {
        logger.error('Failed to clear analytics', error instanceof Error ? error : new Error(String(error)), {
          context: 'AnalyticsContext',
          action: 'clearAnalytics'
        });
      }
    }), []);
    var exportAnalytics = useCallback(function () {
      return JSON.stringify(events, null, 2);
    }, [events]);
    var metrics = useMemo(function () {
      return calculateMetrics(events);
    }, [events]);
    return useMemo(function () {
      return {
        events: events,
        metrics: metrics,
        trackEvent: trackEvent,
        clearAnalytics: clearAnalytics,
        exportAnalytics: exportAnalytics
      };
    }, [events, metrics, trackEvent, clearAnalytics, exportAnalytics]);
  }),
  _createContextHook2 = _slicedToArray(_createContextHook, 2),
  AnalyticsProvider = _createContextHook2[0],
  useAnalytics = _createContextHook2[1];
export { AnalyticsProvider, useAnalytics };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0SG9vayIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiQXN5bmNTdG9yYWdlIiwiY2FsY3VsYXRlTWV0cmljcyIsInNhdmVTdG9yZWRWZXJzaW9uIiwibmVlZHNNaWdyYXRpb24iLCJBUFBfREFUQV9WRVJTSU9OIiwiZ2V0TWlncmF0aW9uTWFuYWdlciIsImxvZ2dlciIsIkFOQUxZVElDU19TVE9SQUdFX0tFWSIsIkNVUlJFTlRfQU5BTFlUSUNTX1ZFUlNJT04iLCJERUZBVUxUX01FVFJJQ1MiLCJ0b3RhbE1lc3NhZ2VzIiwidG90YWxBbGVydHMiLCJ0b3RhbFNPUyIsIm1lc3NhZ2VzQW5hbHl6ZWQiLCJhbGVydHNSZXNvbHZlZCIsImF2ZXJhZ2VSaXNrTGV2ZWwiLCJtb3N0QWN0aXZlQ2hhdCIsInJpc2tEaXN0cmlidXRpb24iLCJzYWZlIiwibG93IiwibWVkaXVtIiwiaGlnaCIsImNyaXRpY2FsIiwiZXZlbnRzQnlUeXBlIiwiZGFpbHlBY3Rpdml0eSIsInRvdGFsSW5zdGFsbHMiLCJ0b3RhbEFjdGl2YXRpb25zIiwiYWN0aXZhdGlvblJhdGUiLCJ0b3RhbFNlc3Npb25zIiwiYXZlcmFnZVNlc3Npb25EdXJhdGlvbiIsInJldGVudGlvbiIsImQxIiwiZDciLCJkMzAiLCJmZWF0dXJlVXNhZ2UiLCJwcmVtaXVtU3Vic2NyaWJlcnMiLCJwcmVtaXVtVHJpYWxVc2VycyIsInByZW1pdW1Db252ZXJzaW9uUmF0ZSIsImRhdSIsIm1hdSIsInRocmVhdERldGVjdGlvblJhdGUiLCJmYWxzZVBvc2l0aXZlUmF0ZSIsImZhbHNlTmVnYXRpdmVSYXRlIiwiYXZlcmFnZUFsZXJ0UmVzcG9uc2VUaW1lIiwiYXZlcmFnZVNPU1Jlc3BvbnNlVGltZSIsImFpQW5hbHlzaXNBY2N1cmFjeSIsImFpQW5hbHlzaXNTcGVlZCIsImltYWdlQW5hbHlzaXNBY2N1cmFjeSIsInNlc3Npb25zUGVyVXNlcldlZWtseSIsIm1lc3NhZ2VzQW5hbHl6ZWRQZXJEYXkiLCJmZWF0dXJlQWRvcHRpb25SYXRlIiwicGFyZW50Q2hpbGRQYWlyQ29tcGxldGlvblJhdGUiLCJnZW9ncmFwaGljRXhwYW5zaW9uIiwiYXBwU3RvcmVSYXRpbmciLCJucHMiLCJhcnIiLCJjYWMiLCJsdHYiLCJsdHZDYWNSYXRpbyIsInVzZXJHcm93dGhSYXRlIiwiX2NyZWF0ZUNvbnRleHRIb29rIiwiX3VzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5IiwiZXZlbnRzIiwic2V0RXZlbnRzIiwiaXNNb3VudGVkUmVmIiwiY3VycmVudCIsImxvYWRBbmFseXRpY3MiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJzdG9yZWQiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiY3VycmVudFZlcnNpb24iLCJ2ZXJzaW9uIiwiY29uc29sZSIsImxvZyIsIm1pZ3JhdGlvbk1hbmFnZXIiLCJyZXN1bHQiLCJtaWdyYXRlIiwic3VjY2VzcyIsImRhdGEiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiaW5mbyIsImNvbnRleHQiLCJhY3Rpb24iLCJ0b1ZlcnNpb24iLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIlN0cmluZyIsIm1pZ3JhdGlvbkVycm9yIiwiRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJhcHBseSIsImFyZ3VtZW50cyIsInNhdmVBbmFseXRpY3MiLCJfcmVmMiIsInZlcnNpb25lZERhdGEiLCJ1cGRhdGVkQXQiLCJEYXRlIiwibm93IiwibGVuZ3RoIiwidHJhY2tFdmVudCIsImV2ZW50IiwicHJvcGVydGllcyIsImV2ZW50RGF0YSIsInRpbWVzdGFtcCIsInByZXYiLCJ1cGRhdGVkIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5Iiwic2xpY2UiLCJjbGVhckFuYWx5dGljcyIsInJlbW92ZUl0ZW0iLCJleHBvcnRBbmFseXRpY3MiLCJtZXRyaWNzIiwiX2NyZWF0ZUNvbnRleHRIb29rMiIsIkFuYWx5dGljc1Byb3ZpZGVyIiwidXNlQW5hbHl0aWNzIl0sInNvdXJjZXMiOlsiQW5hbHl0aWNzQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUNvbnRleHRIb29rIGZyb20gJ0Bua3p3L2NyZWF0ZS1jb250ZXh0LWhvb2snO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuaW1wb3J0IHsgY2FsY3VsYXRlTWV0cmljcyB9IGZyb20gJ0AvdXRpbHMvYW5hbHl0aWNzTWV0cmljcyc7XG5pbXBvcnQgeyBnZXRTdG9yZWRWZXJzaW9uLCBzYXZlU3RvcmVkVmVyc2lvbiwgbmVlZHNNaWdyYXRpb24sIEFQUF9EQVRBX1ZFUlNJT04gfSBmcm9tICdAL3V0aWxzL3ZlcnNpb25pbmcnO1xuaW1wb3J0IHsgZ2V0TWlncmF0aW9uTWFuYWdlciB9IGZyb20gJ0AvdXRpbHMvbWlncmF0aW9ucyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3V0aWxzL2xvZ2dlcic7XG5cbmNvbnN0IEFOQUxZVElDU19TVE9SQUdFX0tFWSA9ICdAa2lrdV9hbmFseXRpY3MnO1xuY29uc3QgQ1VSUkVOVF9BTkFMWVRJQ1NfVkVSU0lPTiA9IEFQUF9EQVRBX1ZFUlNJT047IC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INGC0LXQutGD0YnRg9GOINCy0LXRgNGB0LjRjiDQtNCw0L3QvdGL0YVcblxuZXhwb3J0IHR5cGUgQW5hbHl0aWNzRXZlbnQgPSBcbiAgfCAnbWVzc2FnZV9zZW50J1xuICB8ICdtZXNzYWdlX2FuYWx5emVkJ1xuICB8ICdhbGVydF9jcmVhdGVkJ1xuICB8ICdhbGVydF9yZXNvbHZlZCdcbiAgfCAnc29zX3RyaWdnZXJlZCdcbiAgfCAnc29zX3Jlc29sdmVkJ1xuICB8ICdjaGF0X3ZpZXdlZCdcbiAgfCAnc2V0dGluZ3NfY2hhbmdlZCdcbiAgfCAnY29udGFjdF9hZGRlZCdcbiAgfCAnY29udGFjdF9yZW1vdmVkJ1xuICB8ICd0aW1lX3Jlc3RyaWN0aW9uX2FkZGVkJ1xuICB8ICdyZWNvbW1lbmRhdGlvbl92aWV3ZWQnXG4gIHwgJ3N0YXRpc3RpY3Nfdmlld2VkJ1xuICB8ICdwcm9maWxlX3VwZGF0ZWQnXG4gIHwgJ2FwcF9pbnN0YWxsZWQnXG4gIHwgJ2FwcF9maXJzdF9sYXVuY2gnXG4gIHwgJ3VzZXJfYWN0aXZhdGVkJ1xuICB8ICdzZXNzaW9uX3N0YXJ0ZWQnXG4gIHwgJ3Nlc3Npb25fZW5kZWQnXG4gIHwgJ2ZlYXR1cmVfdXNlZCdcbiAgfCAncHJlbWl1bV9zdWJzY3JpYmVkJ1xuICB8ICdwcmVtaXVtX2ZlYXR1cmVfYWNjZXNzZWQnXG4gIHwgJ3ByZW1pdW1fdHJpYWxfc3RhcnRlZCdcbiAgfCAncHJlbWl1bV90cmlhbF9lbmRlZCdcbiAgfCAncHJlbWl1bV9jYW5jZWxsZWQnXG4gIHwgJ2FsZXJ0X25vdGlmaWNhdGlvbl9zZW50J1xuICB8ICdzb3Nfbm90aWZpY2F0aW9uX3NlbnQnXG4gIHwgJ2FpX2FuYWx5c2lzX2NvbXBsZXRlZCdcbiAgfCAnaW1hZ2VfYW5hbHlzaXNfY29tcGxldGVkJ1xuICB8ICdmYWxzZV9wb3NpdGl2ZV9yZXBvcnRlZCdcbiAgfCAndGhyZWF0X2NvbmZpcm1lZCdcbiAgfCAncGFyZW50X2NoaWxkX3BhaXJfY29tcGxldGVkJ1xuICB8ICdzY3JlZW5fdmlld2VkJ1xuICB8ICd1c2VyX2ZlZWRiYWNrX3N1Ym1pdHRlZCdcbiAgfCAnc3luY19mYWlsZWQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5dGljc0V2ZW50RGF0YSB7XG4gIGV2ZW50OiBBbmFseXRpY3NFdmVudDtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5dGljc01ldHJpY3Mge1xuICB0b3RhbE1lc3NhZ2VzOiBudW1iZXI7XG4gIHRvdGFsQWxlcnRzOiBudW1iZXI7XG4gIHRvdGFsU09TOiBudW1iZXI7XG4gIG1lc3NhZ2VzQW5hbHl6ZWQ6IG51bWJlcjtcbiAgYWxlcnRzUmVzb2x2ZWQ6IG51bWJlcjtcbiAgYXZlcmFnZVJpc2tMZXZlbDogbnVtYmVyO1xuICBtb3N0QWN0aXZlQ2hhdDogc3RyaW5nIHwgbnVsbDtcbiAgcmlza0Rpc3RyaWJ1dGlvbjoge1xuICAgIHNhZmU6IG51bWJlcjtcbiAgICBsb3c6IG51bWJlcjtcbiAgICBtZWRpdW06IG51bWJlcjtcbiAgICBoaWdoOiBudW1iZXI7XG4gICAgY3JpdGljYWw6IG51bWJlcjtcbiAgfTtcbiAgZXZlbnRzQnlUeXBlOiBSZWNvcmQ8QW5hbHl0aWNzRXZlbnQsIG51bWJlcj47XG4gIGRhaWx5QWN0aXZpdHk6IHsgZGF0ZTogc3RyaW5nOyBldmVudHM6IG51bWJlciB9W107XG4gIC8vIEtQSSBNZXRyaWNzXG4gIHRvdGFsSW5zdGFsbHM6IG51bWJlcjtcbiAgdG90YWxBY3RpdmF0aW9uczogbnVtYmVyO1xuICBhY3RpdmF0aW9uUmF0ZTogbnVtYmVyOyAvLyB0b3RhbEFjdGl2YXRpb25zIC8gdG90YWxJbnN0YWxsc1xuICB0b3RhbFNlc3Npb25zOiBudW1iZXI7XG4gIGF2ZXJhZ2VTZXNzaW9uRHVyYXRpb246IG51bWJlcjsgLy8gaW4gbWludXRlc1xuICByZXRlbnRpb246IHtcbiAgICBkMTogbnVtYmVyOyAvLyBEYXkgMSByZXRlbnRpb25cbiAgICBkNzogbnVtYmVyOyAvLyBEYXkgNyByZXRlbnRpb25cbiAgICBkMzA6IG51bWJlcjsgLy8gRGF5IDMwIHJldGVudGlvblxuICB9O1xuICBmZWF0dXJlVXNhZ2U6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47IC8vIGUuZy4sIHsgJ2NoYXRfdmlldyc6IDE1MCwgJ3NldHRpbmdzX2NoYW5nZWQnOiAyMCB9XG4gIHByZW1pdW1TdWJzY3JpYmVyczogbnVtYmVyO1xuICBwcmVtaXVtVHJpYWxVc2VyczogbnVtYmVyO1xuICBwcmVtaXVtQ29udmVyc2lvblJhdGU6IG51bWJlcjsgLy8gcHJlbWl1bVN1YnNjcmliZXJzIC8gdG90YWxBY3RpdmF0aW9uc1xuICAvLyBEQVUvTUFVIChjYWxjdWxhdGVkIGZyb20gc2Vzc2lvbnMpXG4gIGRhdTogbnVtYmVyOyAvLyBEYWlseSBBY3RpdmUgVXNlcnMgKHVuaXF1ZSB1c2VycyB3aXRoIHNlc3Npb25fc3RhcnRlZCB0b2RheSlcbiAgbWF1OiBudW1iZXI7IC8vIE1vbnRobHkgQWN0aXZlIFVzZXJzICh1bmlxdWUgdXNlcnMgd2l0aCBzZXNzaW9uX3N0YXJ0ZWQgaW4gbGFzdCAzMCBkYXlzKVxuICAvLyBTZWN1cml0eSBLUElzXG4gIHRocmVhdERldGVjdGlvblJhdGU6IG51bWJlcjsgLy8gVGhyZWF0cyBkZXRlY3RlZCAvIFRvdGFsIHRocmVhdHNcbiAgZmFsc2VQb3NpdGl2ZVJhdGU6IG51bWJlcjsgLy8gRmFsc2UgcG9zaXRpdmVzIC8gVG90YWwgYWxlcnRzXG4gIGZhbHNlTmVnYXRpdmVSYXRlOiBudW1iZXI7IC8vIE1pc3NlZCB0aHJlYXRzIC8gVG90YWwgdGhyZWF0c1xuICBhdmVyYWdlQWxlcnRSZXNwb25zZVRpbWU6IG51bWJlcjsgLy8gQXZlcmFnZSB0aW1lIGZyb20gYWxlcnQgdG8gbm90aWZpY2F0aW9uIChzZWNvbmRzKVxuICBhdmVyYWdlU09TUmVzcG9uc2VUaW1lOiBudW1iZXI7IC8vIEF2ZXJhZ2UgdGltZSBmcm9tIFNPUyB0cmlnZ2VyIHRvIG5vdGlmaWNhdGlvbiAoc2Vjb25kcylcbiAgYWlBbmFseXNpc0FjY3VyYWN5OiBudW1iZXI7IC8vIENvcnJlY3QgYW5hbHlzZXMgLyBUb3RhbCBhbmFseXNlc1xuICBhaUFuYWx5c2lzU3BlZWQ6IG51bWJlcjsgLy8gQXZlcmFnZSBhbmFseXNpcyB0aW1lIChzZWNvbmRzKVxuICBpbWFnZUFuYWx5c2lzQWNjdXJhY3k6IG51bWJlcjsgLy8gQ29ycmVjdCBpbWFnZSBhbmFseXNlcyAvIFRvdGFsXG4gIC8vIEVuZ2FnZW1lbnQgS1BJc1xuICBzZXNzaW9uc1BlclVzZXJXZWVrbHk6IG51bWJlcjsgLy8gQXZlcmFnZSBzZXNzaW9ucyBwZXIgdXNlciBwZXIgd2Vla1xuICBtZXNzYWdlc0FuYWx5emVkUGVyRGF5OiBudW1iZXI7IC8vIEF2ZXJhZ2UgbWVzc2FnZXMgYW5hbHl6ZWQgcGVyIGRheVxuICBmZWF0dXJlQWRvcHRpb25SYXRlOiBudW1iZXI7IC8vIFVzZXJzIHVzaW5nIGZlYXR1cmVzIC8gVG90YWwgdXNlcnNcbiAgcGFyZW50Q2hpbGRQYWlyQ29tcGxldGlvblJhdGU6IG51bWJlcjsgLy8gQ29tcGxldGVkIHBhaXJzIC8gU3RhcnRlZCBwYWlyc1xuICAvLyBNYXJrZXQgS1BJc1xuICBnZW9ncmFwaGljRXhwYW5zaW9uOiBudW1iZXI7IC8vIE51bWJlciBvZiBjb3VudHJpZXMgd2l0aCB1c2Vyc1xuICBhcHBTdG9yZVJhdGluZzogbnVtYmVyOyAvLyBBcHAgU3RvcmUgcmF0aW5nICgwLTUpXG4gIG5wczogbnVtYmVyOyAvLyBOZXQgUHJvbW90ZXIgU2NvcmUgKC0xMDAgdG8gMTAwKVxuICAvLyBSZXZlbnVlIEtQSXMgKGNhbGN1bGF0ZWQgZnJvbSBwcmVtaXVtIGRhdGEpXG4gIGFycjogbnVtYmVyOyAvLyBBbm51YWwgUmVjdXJyaW5nIFJldmVudWVcbiAgY2FjOiBudW1iZXI7IC8vIEN1c3RvbWVyIEFjcXVpc2l0aW9uIENvc3RcbiAgbHR2OiBudW1iZXI7IC8vIExpZmV0aW1lIFZhbHVlXG4gIGx0dkNhY1JhdGlvOiBudW1iZXI7IC8vIExUViAvIENBQ1xuICB1c2VyR3Jvd3RoUmF0ZTogbnVtYmVyOyAvLyBNb250aGx5IGdyb3d0aCByYXRlICglKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5dGljc0NvbnRleHRWYWx1ZSB7XG4gIGV2ZW50czogQW5hbHl0aWNzRXZlbnREYXRhW107XG4gIG1ldHJpY3M6IEFuYWx5dGljc01ldHJpY3M7XG4gIHRyYWNrRXZlbnQ6IChldmVudDogQW5hbHl0aWNzRXZlbnQsIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB2b2lkO1xuICBjbGVhckFuYWx5dGljczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZXhwb3J0QW5hbHl0aWNzOiAoKSA9PiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfTUVUUklDUzogQW5hbHl0aWNzTWV0cmljcyA9IHtcbiAgdG90YWxNZXNzYWdlczogMCxcbiAgdG90YWxBbGVydHM6IDAsXG4gIHRvdGFsU09TOiAwLFxuICBtZXNzYWdlc0FuYWx5emVkOiAwLFxuICBhbGVydHNSZXNvbHZlZDogMCxcbiAgYXZlcmFnZVJpc2tMZXZlbDogMCxcbiAgbW9zdEFjdGl2ZUNoYXQ6IG51bGwsXG4gIHJpc2tEaXN0cmlidXRpb246IHtcbiAgICBzYWZlOiAwLFxuICAgIGxvdzogMCxcbiAgICBtZWRpdW06IDAsXG4gICAgaGlnaDogMCxcbiAgICBjcml0aWNhbDogMCxcbiAgfSxcbiAgZXZlbnRzQnlUeXBlOiB7fSBhcyBSZWNvcmQ8QW5hbHl0aWNzRXZlbnQsIG51bWJlcj4sXG4gIGRhaWx5QWN0aXZpdHk6IFtdLFxuICAvLyBLUEkgTWV0cmljc1xuICB0b3RhbEluc3RhbGxzOiAwLFxuICB0b3RhbEFjdGl2YXRpb25zOiAwLFxuICBhY3RpdmF0aW9uUmF0ZTogMCxcbiAgdG90YWxTZXNzaW9uczogMCxcbiAgYXZlcmFnZVNlc3Npb25EdXJhdGlvbjogMCxcbiAgcmV0ZW50aW9uOiB7XG4gICAgZDE6IDAsXG4gICAgZDc6IDAsXG4gICAgZDMwOiAwLFxuICB9LFxuICBmZWF0dXJlVXNhZ2U6IHt9LFxuICBwcmVtaXVtU3Vic2NyaWJlcnM6IDAsXG4gIHByZW1pdW1UcmlhbFVzZXJzOiAwLFxuICBwcmVtaXVtQ29udmVyc2lvblJhdGU6IDAsXG4gIGRhdTogMCxcbiAgbWF1OiAwLFxuICAvLyBTZWN1cml0eSBLUElzXG4gIHRocmVhdERldGVjdGlvblJhdGU6IDAsXG4gIGZhbHNlUG9zaXRpdmVSYXRlOiAwLFxuICBmYWxzZU5lZ2F0aXZlUmF0ZTogMCxcbiAgYXZlcmFnZUFsZXJ0UmVzcG9uc2VUaW1lOiAwLFxuICBhdmVyYWdlU09TUmVzcG9uc2VUaW1lOiAwLFxuICBhaUFuYWx5c2lzQWNjdXJhY3k6IDAsXG4gIGFpQW5hbHlzaXNTcGVlZDogMCxcbiAgaW1hZ2VBbmFseXNpc0FjY3VyYWN5OiAwLFxuICAvLyBFbmdhZ2VtZW50IEtQSXNcbiAgc2Vzc2lvbnNQZXJVc2VyV2Vla2x5OiAwLFxuICBtZXNzYWdlc0FuYWx5emVkUGVyRGF5OiAwLFxuICBmZWF0dXJlQWRvcHRpb25SYXRlOiAwLFxuICBwYXJlbnRDaGlsZFBhaXJDb21wbGV0aW9uUmF0ZTogMCxcbiAgLy8gTWFya2V0IEtQSXNcbiAgZ2VvZ3JhcGhpY0V4cGFuc2lvbjogMCxcbiAgYXBwU3RvcmVSYXRpbmc6IDAsXG4gIG5wczogMCxcbiAgLy8gUmV2ZW51ZSBLUElzXG4gIGFycjogMCxcbiAgY2FjOiAwLFxuICBsdHY6IDAsXG4gIGx0dkNhY1JhdGlvOiAwLFxuICB1c2VyR3Jvd3RoUmF0ZTogMCxcbn07XG5cbmV4cG9ydCBjb25zdCBbQW5hbHl0aWNzUHJvdmlkZXIsIHVzZUFuYWx5dGljc10gPSBjcmVhdGVDb250ZXh0SG9vazxBbmFseXRpY3NDb250ZXh0VmFsdWU+KCgpID0+IHtcbiAgY29uc3QgW2V2ZW50cywgc2V0RXZlbnRzXSA9IHVzZVN0YXRlPEFuYWx5dGljc0V2ZW50RGF0YVtdPihbXSk7XG4gIGNvbnN0IGlzTW91bnRlZFJlZiA9IHVzZVJlZih0cnVlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyDQl9Cw0LPRgNGD0LfQutCwINCw0L3QsNC70LjRgtC40LrQuCDQv9GA0Lgg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0YEg0L/QvtC00LTQtdGA0LbQutC+0Lkg0LzQuNCz0YDQsNGG0LjQuVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxvYWRBbmFseXRpY3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbShBTkFMWVRJQ1NfU1RPUkFHRV9LRVkpO1xuICAgICAgICBpZiAoIXN0b3JlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcGFyc2VkID0gSlNPTi5wYXJzZShzdG9yZWQpO1xuICAgICAgICBcbiAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INCy0LXRgNGB0LjRjiDQtNCw0L3QvdGL0YVcbiAgICAgICAgY29uc3QgY3VycmVudFZlcnNpb24gPSBwYXJzZWQudmVyc2lvbiB8fCAxO1xuICAgICAgICBcbiAgICAgICAgLy8g0JXRgdC70Lgg0L3Rg9C20L3QsCDQvNC40LPRgNCw0YbQuNGPXG4gICAgICAgIGlmIChuZWVkc01pZ3JhdGlvbihjdXJyZW50VmVyc2lvbiwgQ1VSUkVOVF9BTkFMWVRJQ1NfVkVSU0lPTikpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0FuYWx5dGljc0NvbnRleHRdIE1pZ3JhdGluZyBmcm9tIHZlcnNpb24gJHtjdXJyZW50VmVyc2lvbn0gdG8gJHtDVVJSRU5UX0FOQUxZVElDU19WRVJTSU9OfWApO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtaWdyYXRpb25NYW5hZ2VyID0gZ2V0TWlncmF0aW9uTWFuYWdlcigpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWlncmF0aW9uTWFuYWdlci5taWdyYXRlKFxuICAgICAgICAgICAgICBwYXJzZWQsXG4gICAgICAgICAgICAgIGN1cnJlbnRWZXJzaW9uLFxuICAgICAgICAgICAgICBDVVJSRU5UX0FOQUxZVElDU19WRVJTSU9OXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgcGFyc2VkID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0LzQuNCz0YDQuNGA0L7QstCw0L3QvdGL0LUg0LTQsNC90L3Ri9C1XG4gICAgICAgICAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKEFOQUxZVElDU19TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkocGFyc2VkKSk7XG4gICAgICAgICAgICAgIGF3YWl0IHNhdmVTdG9yZWRWZXJzaW9uKEFOQUxZVElDU19TVE9SQUdFX0tFWSwgQ1VSUkVOVF9BTkFMWVRJQ1NfVkVSU0lPTik7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgU3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIHRvIHZlcnNpb24gJHtDVVJSRU5UX0FOQUxZVElDU19WRVJTSU9OfWAsIHsgY29udGV4dDogJ0FuYWx5dGljc0NvbnRleHQnLCBhY3Rpb246ICdtaWdyYXRlJywgdG9WZXJzaW9uOiBDVVJSRU5UX0FOQUxZVElDU19WRVJTSU9OIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiByZXN1bHQuZXJyb3IgPT09ICdzdHJpbmcnID8gcmVzdWx0LmVycm9yIDogU3RyaW5nKHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgbWlncmF0aW9uRXJyb3IgPSBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ01pZ3JhdGlvbiBmYWlsZWQnLCBtaWdyYXRpb25FcnJvciwgeyBjb250ZXh0OiAnQW5hbHl0aWNzQ29udGV4dCcsIGFjdGlvbjogJ21pZ3JhdGUnLCBlcnJvck1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdNaWdyYXRpb24gZmFpbGVkJywgbmV3IEVycm9yKCdVbmtub3duIG1pZ3JhdGlvbiBlcnJvcicpLCB7IGNvbnRleHQ6ICdBbmFseXRpY3NDb250ZXh0JywgYWN0aW9uOiAnbWlncmF0ZScgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8g0J/RgNC+0LTQvtC70LbQsNC10Lwg0YEg0LjRgdGF0L7QtNC90YvQvNC4INC00LDQvdC90YvQvNC4XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAobWlncmF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTWlncmF0aW9uIGVycm9yJywgbWlncmF0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IG1pZ3JhdGlvbkVycm9yIDogbmV3IEVycm9yKFN0cmluZyhtaWdyYXRpb25FcnJvcikpLCB7IGNvbnRleHQ6ICdBbmFseXRpY3NDb250ZXh0JywgYWN0aW9uOiAnbWlncmF0ZScgfSk7XG4gICAgICAgICAgICAvLyDQn9GA0L7QtNC+0LvQttCw0LXQvCDRgSDQuNGB0YXQvtC00L3Ri9C80Lgg0LTQsNC90L3Ri9C80LhcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDQmNC30LLQu9C10LrQsNC10Lwg0YHQvtCx0YvRgtC40Y8g0LjQtyDRgdGC0YDRg9C60YLRg9GA0Ysg0LTQsNC90L3Ri9GFXG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IHBhcnNlZC5ldmVudHMgfHwgcGFyc2VkOyAvLyDQn9C+0LTQtNC10YDQttC60LAg0YHRgtCw0YDQvtCz0L4g0YTQvtGA0LzQsNGC0LAgKNC80LDRgdGB0LjQsikg0Lgg0L3QvtCy0L7Qs9C+ICjQvtCx0YrQtdC60YIg0YEgZXZlbnRzKVxuICAgICAgICBcbiAgICAgICAgaWYgKGlzTW91bnRlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0RXZlbnRzKEFycmF5LmlzQXJyYXkoZXZlbnRzKSA/IGV2ZW50cyA6IFtdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhbmFseXRpY3MnLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSksIHsgY29udGV4dDogJ0FuYWx5dGljc0NvbnRleHQnLCBhY3Rpb246ICdsb2FkQW5hbHl0aWNzJyB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxvYWRBbmFseXRpY3MoKTtcbiAgfSwgW10pO1xuXG4gIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1INCw0L3QsNC70LjRgtC40LrQuCDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INGBINCy0LXRgNGB0LjQvtC90LjRgNC+0LLQsNC90LjQtdC8XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2F2ZUFuYWx5dGljcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQsiDQvdC+0LLQvtC8INGE0L7RgNC80LDRgtC1INGBINCy0LXRgNGB0LjQtdC5XG4gICAgICAgIGNvbnN0IHZlcnNpb25lZERhdGEgPSB7XG4gICAgICAgICAgdmVyc2lvbjogQ1VSUkVOVF9BTkFMWVRJQ1NfVkVSU0lPTixcbiAgICAgICAgICBldmVudHMsXG4gICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oQU5BTFlUSUNTX1NUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeSh2ZXJzaW9uZWREYXRhKSk7XG4gICAgICAgIGF3YWl0IHNhdmVTdG9yZWRWZXJzaW9uKEFOQUxZVElDU19TVE9SQUdFX0tFWSwgQ1VSUkVOVF9BTkFMWVRJQ1NfVkVSU0lPTik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbQW5hbHl0aWNzQ29udGV4dF0gRmFpbGVkIHRvIHNhdmUgYW5hbHl0aWNzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChldmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2F2ZUFuYWx5dGljcygpO1xuICAgIH1cbiAgfSwgW2V2ZW50c10pO1xuXG4gIGNvbnN0IHRyYWNrRXZlbnQgPSB1c2VDYWxsYmFjaygoZXZlbnQ6IEFuYWx5dGljc0V2ZW50LCBwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIGlmICghaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudERhdGE6IEFuYWx5dGljc0V2ZW50RGF0YSA9IHtcbiAgICAgIGV2ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgcHJvcGVydGllcyxcbiAgICB9O1xuXG4gICAgc2V0RXZlbnRzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXYsIGV2ZW50RGF0YV07XG4gICAgICAvLyDQntCz0YDQsNC90LjRh9C40LLQsNC10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0YHQvtCx0YvRgtC40LkgKNC/0L7RgdC70LXQtNC90LjQtSAxMDAwMClcbiAgICAgIHJldHVybiB1cGRhdGVkLnNsaWNlKC0xMDAwMCk7XG4gICAgfSk7XG5cbiAgICBsb2dnZXIuaW5mbygnRXZlbnQgdHJhY2tlZCcsIHsgY29udGV4dDogJ0FuYWx5dGljc0NvbnRleHQnLCBhY3Rpb246ICd0cmFja0V2ZW50JywgZXZlbnQsIHByb3BlcnRpZXMgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjbGVhckFuYWx5dGljcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBzZXRFdmVudHMoW10pO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbShBTkFMWVRJQ1NfU1RPUkFHRV9LRVkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBjbGVhciBhbmFseXRpY3MnLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSksIHsgY29udGV4dDogJ0FuYWx5dGljc0NvbnRleHQnLCBhY3Rpb246ICdjbGVhckFuYWx5dGljcycgfSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgZXhwb3J0QW5hbHl0aWNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShldmVudHMsIG51bGwsIDIpO1xuICB9LCBbZXZlbnRzXSk7XG5cbiAgLy8g0JLRi9GH0LjRgdC70LXQvdC40LUg0LzQtdGC0YDQuNC6ICjQuNGB0L/QvtC70YzQt9GD0LXQvCDRh9C40YHRgtGD0Y4g0YTRg9C90LrRhtC40Y4g0LTQu9GPINGC0LXRgdGC0LjRgNGD0LXQvNC+0YHRgtC4KVxuICBjb25zdCBtZXRyaWNzID0gdXNlTWVtbygoKTogQW5hbHl0aWNzTWV0cmljcyA9PiB7XG4gICAgcmV0dXJuIGNhbGN1bGF0ZU1ldHJpY3MoZXZlbnRzKTtcbiAgfSwgW2V2ZW50c10pO1xuXG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBldmVudHMsXG4gICAgICBtZXRyaWNzLFxuICAgICAgdHJhY2tFdmVudCxcbiAgICAgIGNsZWFyQW5hbHl0aWNzLFxuICAgICAgZXhwb3J0QW5hbHl0aWNzLFxuICAgIH0pLFxuICAgIFtldmVudHMsIG1ldHJpY3MsIHRyYWNrRXZlbnQsIGNsZWFyQW5hbHl0aWNzLCBleHBvcnRBbmFseXRpY3Nd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