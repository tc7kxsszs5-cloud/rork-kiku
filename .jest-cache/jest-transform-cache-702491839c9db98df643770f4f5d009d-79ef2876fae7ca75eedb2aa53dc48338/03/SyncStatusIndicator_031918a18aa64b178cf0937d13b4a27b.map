{"version":3,"names":["React","View","Text","StyleSheet","ActivityIndicator","useMonitoring","useParentalControls","useThemeMode","CloudUpload","CheckCircle","AlertCircle","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SyncStatusIndicator","_ref","_ref$variant","variant","_useMonitoring","monitoringSyncing","isSyncing","monitoringSyncTime","lastSyncTimestamp","_useParentalControls","settingsSyncing","settingsSyncTime","_useThemeMode","theme","styles","createStyles","lastSync","formatTimeAgo","timestamp","now","Date","diff","seconds","Math","floor","minutes","hours","style","compactContainer","children","size","color","primary","success","warning","container","text","create","flexDirection","alignItems","gap","padding","fontSize","textSecondary"],"sources":["SyncStatusIndicator.tsx"],"sourcesContent":["/**\n * Sync Status Indicator Component\n * Shows synchronization status to the user\n */\n\nimport React from 'react';\nimport { View, Text, StyleSheet, ActivityIndicator } from 'react-native';\nimport { useMonitoring } from '@/constants/MonitoringContext';\nimport { useParentalControls } from '@/constants/ParentalControlsContext';\nimport { useThemeMode } from '@/constants/ThemeContext';\nimport { CloudUpload, CheckCircle, AlertCircle } from 'lucide-react-native';\n\ninterface SyncStatusIndicatorProps {\n  variant?: 'default' | 'compact';\n}\n\nexport function SyncStatusIndicator({ variant = 'default' }: SyncStatusIndicatorProps) {\n  const { isSyncing: monitoringSyncing, lastSyncTimestamp: monitoringSyncTime } = useMonitoring();\n  const { isSyncing: settingsSyncing, lastSyncTimestamp: settingsSyncTime } = useParentalControls();\n  const { theme } = useThemeMode();\n  const styles = createStyles(theme);\n\n  const isSyncing = monitoringSyncing || settingsSyncing;\n  const lastSync = monitoringSyncTime || settingsSyncTime;\n\n  const formatTimeAgo = (timestamp: number | null): string => {\n    if (!timestamp) return 'Никогда';\n    const now = Date.now();\n    const diff = now - timestamp;\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n\n    if (seconds < 60) return 'Только что';\n    if (minutes < 60) return `${minutes} мин назад`;\n    if (hours < 24) return `${hours} ч назад`;\n    return `${Math.floor(hours / 24)} дн назад`;\n  };\n\n  if (variant === 'compact') {\n    return (\n      <View style={styles.compactContainer}>\n        {isSyncing ? (\n          <ActivityIndicator size=\"small\" color={theme.primary} />\n        ) : lastSync ? (\n          <CheckCircle size={16} color={theme.success} />\n        ) : (\n          <AlertCircle size={16} color={theme.warning} />\n        )}\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {isSyncing ? (\n        <>\n          <ActivityIndicator size=\"small\" color={theme.primary} />\n          <Text style={styles.text}>Синхронизация...</Text>\n        </>\n      ) : lastSync ? (\n        <>\n          <CheckCircle size={16} color={theme.success} />\n          <Text style={styles.text}>Обновлено {formatTimeAgo(lastSync)}</Text>\n        </>\n      ) : (\n        <>\n          <CloudUpload size={16} color={theme.warning} />\n          <Text style={styles.text}>Не синхронизировано</Text>\n        </>\n      )}\n    </View>\n  );\n}\n\nconst createStyles = (theme: any) => StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    padding: 8,\n  },\n  compactContainer: {\n    padding: 4,\n  },\n  text: {\n    fontSize: 12,\n    color: theme.textSecondary,\n  },\n});\n"],"mappings":"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","ignoreList":[]}