091de685a80d5d8bfc1392ccbd11a508
import React from 'react';
import { View, Text, StyleSheet, ActivityIndicator } from 'react-native';
import { useMonitoring } from '@/constants/MonitoringContext';
import { useParentalControls } from '@/constants/ParentalControlsContext';
import { useThemeMode } from '@/constants/ThemeContext';
import { CloudUpload, CheckCircle, AlertCircle } from 'lucide-react-native';
import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from "react/jsx-runtime";
export function SyncStatusIndicator(_ref) {
  var _ref$variant = _ref.variant,
    variant = _ref$variant === void 0 ? 'default' : _ref$variant;
  var _useMonitoring = useMonitoring(),
    monitoringSyncing = _useMonitoring.isSyncing,
    monitoringSyncTime = _useMonitoring.lastSyncTimestamp;
  var _useParentalControls = useParentalControls(),
    settingsSyncing = _useParentalControls.isSyncing,
    settingsSyncTime = _useParentalControls.lastSyncTimestamp;
  var _useThemeMode = useThemeMode(),
    theme = _useThemeMode.theme;
  var styles = createStyles(theme);
  var isSyncing = monitoringSyncing || settingsSyncing;
  var lastSync = monitoringSyncTime || settingsSyncTime;
  var formatTimeAgo = function formatTimeAgo(timestamp) {
    if (!timestamp) return 'Никогда';
    var now = Date.now();
    var diff = now - timestamp;
    var seconds = Math.floor(diff / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    if (seconds < 60) return 'Только что';
    if (minutes < 60) return `${minutes} мин назад`;
    if (hours < 24) return `${hours} ч назад`;
    return `${Math.floor(hours / 24)} дн назад`;
  };
  if (variant === 'compact') {
    return _jsx(View, {
      style: styles.compactContainer,
      children: isSyncing ? _jsx(ActivityIndicator, {
        size: "small",
        color: theme.primary
      }) : lastSync ? _jsx(CheckCircle, {
        size: 16,
        color: theme.success
      }) : _jsx(AlertCircle, {
        size: 16,
        color: theme.warning
      })
    });
  }
  return _jsx(View, {
    style: styles.container,
    children: isSyncing ? _jsxs(_Fragment, {
      children: [_jsx(ActivityIndicator, {
        size: "small",
        color: theme.primary
      }), _jsx(Text, {
        style: styles.text,
        children: "\u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u044F..."
      })]
    }) : lastSync ? _jsxs(_Fragment, {
      children: [_jsx(CheckCircle, {
        size: 16,
        color: theme.success
      }), _jsxs(Text, {
        style: styles.text,
        children: ["\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E ", formatTimeAgo(lastSync)]
      })]
    }) : _jsxs(_Fragment, {
      children: [_jsx(CloudUpload, {
        size: 16,
        color: theme.warning
      }), _jsx(Text, {
        style: styles.text,
        children: "\u041D\u0435 \u0441\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u043E"
      })]
    })
  });
}
var createStyles = function createStyles(theme) {
  return StyleSheet.create({
    container: {
      flexDirection: 'row',
      alignItems: 'center',
      gap: 8,
      padding: 8
    },
    compactContainer: {
      padding: 4
    },
    text: {
      fontSize: 12,
      color: theme.textSecondary
    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIlZpZXciLCJUZXh0IiwiU3R5bGVTaGVldCIsIkFjdGl2aXR5SW5kaWNhdG9yIiwidXNlTW9uaXRvcmluZyIsInVzZVBhcmVudGFsQ29udHJvbHMiLCJ1c2VUaGVtZU1vZGUiLCJDbG91ZFVwbG9hZCIsIkNoZWNrQ2lyY2xlIiwiQWxlcnRDaXJjbGUiLCJqc3giLCJfanN4IiwiRnJhZ21lbnQiLCJfRnJhZ21lbnQiLCJqc3hzIiwiX2pzeHMiLCJTeW5jU3RhdHVzSW5kaWNhdG9yIiwiX3JlZiIsIl9yZWYkdmFyaWFudCIsInZhcmlhbnQiLCJfdXNlTW9uaXRvcmluZyIsIm1vbml0b3JpbmdTeW5jaW5nIiwiaXNTeW5jaW5nIiwibW9uaXRvcmluZ1N5bmNUaW1lIiwibGFzdFN5bmNUaW1lc3RhbXAiLCJfdXNlUGFyZW50YWxDb250cm9scyIsInNldHRpbmdzU3luY2luZyIsInNldHRpbmdzU3luY1RpbWUiLCJfdXNlVGhlbWVNb2RlIiwidGhlbWUiLCJzdHlsZXMiLCJjcmVhdGVTdHlsZXMiLCJsYXN0U3luYyIsImZvcm1hdFRpbWVBZ28iLCJ0aW1lc3RhbXAiLCJub3ciLCJEYXRlIiwiZGlmZiIsInNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwiaG91cnMiLCJzdHlsZSIsImNvbXBhY3RDb250YWluZXIiLCJjaGlsZHJlbiIsInNpemUiLCJjb2xvciIsInByaW1hcnkiLCJzdWNjZXNzIiwid2FybmluZyIsImNvbnRhaW5lciIsInRleHQiLCJjcmVhdGUiLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsImdhcCIsInBhZGRpbmciLCJmb250U2l6ZSIsInRleHRTZWNvbmRhcnkiXSwic291cmNlcyI6WyJTeW5jU3RhdHVzSW5kaWNhdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN5bmMgU3RhdHVzIEluZGljYXRvciBDb21wb25lbnRcbiAqIFNob3dzIHN5bmNocm9uaXphdGlvbiBzdGF0dXMgdG8gdGhlIHVzZXJcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVmlldywgVGV4dCwgU3R5bGVTaGVldCwgQWN0aXZpdHlJbmRpY2F0b3IgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHsgdXNlTW9uaXRvcmluZyB9IGZyb20gJ0AvY29uc3RhbnRzL01vbml0b3JpbmdDb250ZXh0JztcbmltcG9ydCB7IHVzZVBhcmVudGFsQ29udHJvbHMgfSBmcm9tICdAL2NvbnN0YW50cy9QYXJlbnRhbENvbnRyb2xzQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VUaGVtZU1vZGUgfSBmcm9tICdAL2NvbnN0YW50cy9UaGVtZUNvbnRleHQnO1xuaW1wb3J0IHsgQ2xvdWRVcGxvYWQsIENoZWNrQ2lyY2xlLCBBbGVydENpcmNsZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdC1uYXRpdmUnO1xuXG5pbnRlcmZhY2UgU3luY1N0YXR1c0luZGljYXRvclByb3BzIHtcbiAgdmFyaWFudD86ICdkZWZhdWx0JyB8ICdjb21wYWN0Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFN5bmNTdGF0dXNJbmRpY2F0b3IoeyB2YXJpYW50ID0gJ2RlZmF1bHQnIH06IFN5bmNTdGF0dXNJbmRpY2F0b3JQcm9wcykge1xuICBjb25zdCB7IGlzU3luY2luZzogbW9uaXRvcmluZ1N5bmNpbmcsIGxhc3RTeW5jVGltZXN0YW1wOiBtb25pdG9yaW5nU3luY1RpbWUgfSA9IHVzZU1vbml0b3JpbmcoKTtcbiAgY29uc3QgeyBpc1N5bmNpbmc6IHNldHRpbmdzU3luY2luZywgbGFzdFN5bmNUaW1lc3RhbXA6IHNldHRpbmdzU3luY1RpbWUgfSA9IHVzZVBhcmVudGFsQ29udHJvbHMoKTtcbiAgY29uc3QgeyB0aGVtZSB9ID0gdXNlVGhlbWVNb2RlKCk7XG4gIGNvbnN0IHN0eWxlcyA9IGNyZWF0ZVN0eWxlcyh0aGVtZSk7XG5cbiAgY29uc3QgaXNTeW5jaW5nID0gbW9uaXRvcmluZ1N5bmNpbmcgfHwgc2V0dGluZ3NTeW5jaW5nO1xuICBjb25zdCBsYXN0U3luYyA9IG1vbml0b3JpbmdTeW5jVGltZSB8fCBzZXR0aW5nc1N5bmNUaW1lO1xuXG4gIGNvbnN0IGZvcm1hdFRpbWVBZ28gPSAodGltZXN0YW1wOiBudW1iZXIgfCBudWxsKTogc3RyaW5nID0+IHtcbiAgICBpZiAoIXRpbWVzdGFtcCkgcmV0dXJuICfQndC40LrQvtCz0LTQsCc7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBkaWZmID0gbm93IC0gdGltZXN0YW1wO1xuICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKGRpZmYgLyAxMDAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuXG4gICAgaWYgKHNlY29uZHMgPCA2MCkgcmV0dXJuICfQotC+0LvRjNC60L4g0YfRgtC+JztcbiAgICBpZiAobWludXRlcyA8IDYwKSByZXR1cm4gYCR7bWludXRlc30g0LzQuNC9INC90LDQt9Cw0LRgO1xuICAgIGlmIChob3VycyA8IDI0KSByZXR1cm4gYCR7aG91cnN9INGHINC90LDQt9Cw0LRgO1xuICAgIHJldHVybiBgJHtNYXRoLmZsb29yKGhvdXJzIC8gMjQpfSDQtNC9INC90LDQt9Cw0LRgO1xuICB9O1xuXG4gIGlmICh2YXJpYW50ID09PSAnY29tcGFjdCcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb21wYWN0Q29udGFpbmVyfT5cbiAgICAgICAge2lzU3luY2luZyA/IChcbiAgICAgICAgICA8QWN0aXZpdHlJbmRpY2F0b3Igc2l6ZT1cInNtYWxsXCIgY29sb3I9e3RoZW1lLnByaW1hcnl9IC8+XG4gICAgICAgICkgOiBsYXN0U3luYyA/IChcbiAgICAgICAgICA8Q2hlY2tDaXJjbGUgc2l6ZT17MTZ9IGNvbG9yPXt0aGVtZS5zdWNjZXNzfSAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxBbGVydENpcmNsZSBzaXplPXsxNn0gY29sb3I9e3RoZW1lLndhcm5pbmd9IC8+XG4gICAgICAgICl9XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAge2lzU3luY2luZyA/IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8QWN0aXZpdHlJbmRpY2F0b3Igc2l6ZT1cInNtYWxsXCIgY29sb3I9e3RoZW1lLnByaW1hcnl9IC8+XG4gICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50ZXh0fT7QodC40L3RhdGA0L7QvdC40LfQsNGG0LjRjy4uLjwvVGV4dD5cbiAgICAgICAgPC8+XG4gICAgICApIDogbGFzdFN5bmMgPyAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPENoZWNrQ2lyY2xlIHNpemU9ezE2fSBjb2xvcj17dGhlbWUuc3VjY2Vzc30gLz5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHR9PtCe0LHQvdC+0LLQu9C10L3QviB7Zm9ybWF0VGltZUFnbyhsYXN0U3luYyl9PC9UZXh0PlxuICAgICAgICA8Lz5cbiAgICAgICkgOiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPENsb3VkVXBsb2FkIHNpemU9ezE2fSBjb2xvcj17dGhlbWUud2FybmluZ30gLz5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRleHR9PtCd0LUg0YHQuNC90YXRgNC+0L3QuNC30LjRgNC+0LLQsNC90L48L1RleHQ+XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L1ZpZXc+XG4gICk7XG59XG5cbmNvbnN0IGNyZWF0ZVN0eWxlcyA9ICh0aGVtZTogYW55KSA9PiBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGNvbnRhaW5lcjoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGdhcDogOCxcbiAgICBwYWRkaW5nOiA4LFxuICB9LFxuICBjb21wYWN0Q29udGFpbmVyOiB7XG4gICAgcGFkZGluZzogNCxcbiAgfSxcbiAgdGV4dDoge1xuICAgIGZvbnRTaXplOiAxMixcbiAgICBjb2xvcjogdGhlbWUudGV4dFNlY29uZGFyeSxcbiAgfSxcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFLQSxPQUFPQSxLQUFLLE1BQU0sT0FBTztBQUN6QixTQUFTQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsVUFBVSxFQUFFQyxpQkFBaUIsUUFBUSxjQUFjO0FBQ3hFLFNBQVNDLGFBQWEsUUFBUSwrQkFBK0I7QUFDN0QsU0FBU0MsbUJBQW1CLFFBQVEscUNBQXFDO0FBQ3pFLFNBQVNDLFlBQVksUUFBUSwwQkFBMEI7QUFDdkQsU0FBU0MsV0FBVyxFQUFFQyxXQUFXLEVBQUVDLFdBQVcsUUFBUSxxQkFBcUI7QUFBQyxTQUFBQyxHQUFBLElBQUFDLElBQUEsRUFBQUMsUUFBQSxJQUFBQyxTQUFBLEVBQUFDLElBQUEsSUFBQUMsS0FBQTtBQU01RSxPQUFPLFNBQVNDLG1CQUFtQkEsQ0FBQUMsSUFBQSxFQUFvRDtFQUFBLElBQUFDLFlBQUEsR0FBQUQsSUFBQSxDQUFqREUsT0FBTztJQUFQQSxPQUFPLEdBQUFELFlBQUEsY0FBRyxTQUFTLEdBQUFBLFlBQUE7RUFDdkQsSUFBQUUsY0FBQSxHQUFnRmhCLGFBQWEsQ0FBQyxDQUFDO0lBQTVFaUIsaUJBQWlCLEdBQUFELGNBQUEsQ0FBNUJFLFNBQVM7SUFBd0NDLGtCQUFrQixHQUFBSCxjQUFBLENBQXJDSSxpQkFBaUI7RUFDdkQsSUFBQUMsb0JBQUEsR0FBNEVwQixtQkFBbUIsQ0FBQyxDQUFDO0lBQTlFcUIsZUFBZSxHQUFBRCxvQkFBQSxDQUExQkgsU0FBUztJQUFzQ0ssZ0JBQWdCLEdBQUFGLG9CQUFBLENBQW5DRCxpQkFBaUI7RUFDckQsSUFBQUksYUFBQSxHQUFrQnRCLFlBQVksQ0FBQyxDQUFDO0lBQXhCdUIsS0FBSyxHQUFBRCxhQUFBLENBQUxDLEtBQUs7RUFDYixJQUFNQyxNQUFNLEdB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