{"version":3,"names":["z","publicProcedure","upsertDeviceRecord","registerDeviceProcedure","cov_29v6e6w8pj","s","input","object","deviceId","string","min","pushToken","platform","enum","appVersion","optional","userId","permissions","mutation","_ref","f","device","syncedAt","lastSyncedAt"],"sources":["register-device.ts"],"sourcesContent":["import { z } from 'zod';\nimport { publicProcedure } from '../../create-context.js';\nimport { upsertDeviceRecord } from './store.js';\n\nexport const registerDeviceProcedure = publicProcedure\n  .input(\n    z.object({\n      deviceId: z.string().min(3),\n      pushToken: z.string().min(10),\n      platform: z.enum(['ios', 'android', 'web']),\n      appVersion: z.string().optional(),\n      userId: z.string().optional(),\n      permissions: z.string().optional(),\n    }),\n  )\n  .mutation(({ input }) => {\n    const device = upsertDeviceRecord(input);\n    return {\n      device,\n      syncedAt: device.lastSyncedAt,\n    };\n  });\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,CAAC,QAAQ,KAAK;AACvB,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASC,kBAAkB,QAAQ,YAAY;AAE/C,OAAO,IAAMC,uBAAuB,IAAAC,cAAA,GAAAC,CAAA,OAAGJ,eAAe,CACnDK,KAAK,CACJN,CAAC,CAACO,MAAM,CAAC;EACPC,QAAQ,EAAER,CAAC,CAACS,MAAM,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC;EAC3BC,SAAS,EAAEX,CAAC,CAACS,MAAM,CAAC,CAAC,CAACC,GAAG,CAAC,EAAE,CAAC;EAC7BE,QAAQ,EAAEZ,CAAC,CAACa,IAAI,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;EAC3CC,UAAU,EAAEd,CAAC,CAACS,MAAM,CAAC,CAAC,CAACM,QAAQ,CAAC,CAAC;EACjCC,MAAM,EAAEhB,CAAC,CAACS,MAAM,CAAC,CAAC,CAACM,QAAQ,CAAC,CAAC;EAC7BE,WAAW,EAAEjB,CAAC,CAACS,MAAM,CAAC,CAAC,CAACM,QAAQ,CAAC;AACnC,CAAC,CACH,CAAC,CACAG,QAAQ,CAAC,UAAAC,IAAA,EAAe;EAAA,IAAZb,KAAK,GAAAa,IAAA,CAALb,KAAK;EAAAF,cAAA,GAAAgB,CAAA;EAChB,IAAMC,MAAM,IAAAjB,cAAA,GAAAC,CAAA,OAAGH,kBAAkB,CAACI,KAAK,CAAC;EAACF,cAAA,GAAAC,CAAA;EACzC,OAAO;IACLgB,MAAM,EAANA,MAAM;IACNC,QAAQ,EAAED,MAAM,CAACE;EACnB,CAAC;AACH,CAAC,CAAC","ignoreList":[]}