{"version":3,"names":["createContextHook","useState","useCallback","useMemo","useEffect","AsyncStorage","useUser","Platform","REFERRAL_STORAGE_KEY","cov_198zyftadt","s","generateReferralCode","userId","f","hash","slice","random","Math","toString","substring","toUpperCase","_ref","_ref3","user","_ref4","_ref5","_slicedToArray","referralData","setReferralData","loadData","_ref6","_asyncToGenerator","id","b","stored","getItem","JSON","parse","code","newData","referralCode","referredUsers","totalReferrals","rewardsEarned","rewardsRedeemed","referralHistory","error","console","apply","arguments","saveData","_ref7","setItem","stringify","referralLink","shareReferral","message","select","ios","android","default","OS","_ref9","require","Sharing","shareAsync","navigator","clipboard","writeText","alert","checkReferralCode","_ref10","startsWith","length","_x","addReferral","_ref11","referredUserId","includes","reward","prev","Object","assign","concat","_toConsumableArray","referredAt","Date","now","rewardEarned","status","log","_x2","_x3","getRewards","available","total","nextReward","redeemReward","_ref12","amount","_x4","_ref2","ReferralProgramProvider","useReferralProgram"],"sources":["ReferralProgramContext.tsx"],"sourcesContent":["import createContextHook from '@nkzw/create-context-hook';\nimport { useState, useCallback, useMemo, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useUser } from './UserContext';\nimport { Platform } from 'react-native';\n\nconst REFERRAL_STORAGE_KEY = '@referral_program';\n\nexport interface ReferralData {\n  userId: string;\n  referralCode: string;\n  referredUsers: string[];\n  totalReferrals: number;\n  rewardsEarned: number;\n  rewardsRedeemed: number;\n  referralHistory: Array<{\n    referredUserId: string;\n    referredAt: number;\n    rewardEarned: number;\n    status: 'pending' | 'completed' | 'redeemed';\n  }>;\n}\n\nexport interface ReferralProgramContextValue {\n  referralData: ReferralData | null;\n  referralCode: string;\n  referralLink: string;\n  shareReferral: () => Promise<void>;\n  checkReferralCode: (code: string) => Promise<boolean>;\n  getRewards: () => {\n    available: number;\n    total: number;\n    nextReward: string;\n  };\n  redeemReward: (amount: number) => Promise<boolean>;\n}\n\n/**\n * Генерация уникального реферального кода\n */\nfunction generateReferralCode(userId: string): string {\n  // Используем часть userId + случайные символы\n  const hash = userId.slice(-6);\n  const random = Math.random().toString(36).substring(2, 6).toUpperCase();\n  return `KIKU${hash}${random}`;\n}\n\nexport const [ReferralProgramProvider, useReferralProgram] = createContextHook<ReferralProgramContextValue>(() => {\n  const { user } = useUser();\n  const [referralData, setReferralData] = useState<ReferralData | null>(null);\n\n  // Загрузка данных при инициализации\n  useEffect(() => {\n    const loadData = async () => {\n      if (!user?.id) return;\n\n      try {\n        const stored = await AsyncStorage.getItem(`${REFERRAL_STORAGE_KEY}_${user.id}`);\n        if (stored) {\n          setReferralData(JSON.parse(stored));\n        } else {\n          // Создаем новый реферальный код\n          const code = generateReferralCode(user.id);\n          const newData: ReferralData = {\n            userId: user.id,\n            referralCode: code,\n            referredUsers: [],\n            totalReferrals: 0,\n            rewardsEarned: 0,\n            rewardsRedeemed: 0,\n            referralHistory: [],\n          };\n          setReferralData(newData);\n        }\n      } catch (error) {\n        console.error('[ReferralProgram] Failed to load data:', error);\n      }\n    };\n    loadData();\n  }, [user?.id]);\n\n  // Сохранение данных\n  useEffect(() => {\n    const saveData = async () => {\n      if (!referralData || !user?.id) return;\n\n      try {\n        await AsyncStorage.setItem(`${REFERRAL_STORAGE_KEY}_${user.id}`, JSON.stringify(referralData));\n      } catch (error) {\n        console.error('[ReferralProgram] Failed to save data:', error);\n      }\n    };\n    saveData();\n  }, [referralData, user?.id]);\n\n  const referralCode = referralData?.referralCode || '';\n  const referralLink = `https://kiku.app/invite/${referralCode}`;\n\n  /**\n   * Поделиться реферальной ссылкой\n   */\n  const shareReferral = useCallback(async () => {\n    if (!referralData) return;\n\n    const message = Platform.select({\n      ios: `Присоединяйся к KIKU - защите детей в интернете! Используй мой код: ${referralCode}\\n${referralLink}`,\n      android: `Присоединяйся к KIKU - защите детей в интернете! Используй мой код: ${referralCode}\\n${referralLink}`,\n      default: `Присоединяйся к KIKU! Код: ${referralCode} - ${referralLink}`,\n    });\n\n    try {\n      if (Platform.OS !== 'web') {\n        // Используем Sharing API\n        const { Sharing } = require('expo-sharing');\n        await Sharing.shareAsync(referralLink, {\n          message,\n        });\n      } else {\n        // Для web используем clipboard\n        await navigator.clipboard.writeText(message);\n        alert('Реферальная ссылка скопирована в буфер обмена!');\n      }\n    } catch (error) {\n      console.error('[ReferralProgram] Failed to share:', error);\n    }\n  }, [referralData, referralCode, referralLink]);\n\n  /**\n   * Проверка реферального кода при регистрации\n   */\n  const checkReferralCode = useCallback(\n    async (code: string): Promise<boolean> => {\n      if (!referralData || code === referralData.referralCode) {\n        return false; // Нельзя использовать свой код\n      }\n\n      // Проверяем формат кода\n      if (!code.startsWith('KIKU') || code.length !== 14) {\n        return false;\n      }\n\n      // В реальном приложении здесь была бы проверка на сервере\n      // Пока просто проверяем формат\n      return true;\n    },\n    [referralData]\n  );\n\n  /**\n   * Начисление награды за реферала\n   */\n  const addReferral = useCallback(\n    async (referredUserId: string, code: string) => {\n      if (!referralData) return;\n\n      // Проверяем, что это новый реферал\n      if (referralData.referredUsers.includes(referredUserId)) {\n        return;\n      }\n\n      const reward = 1; // 1 месяц премиум за каждого реферала\n\n      setReferralData((prev) => {\n        if (!prev) return prev;\n\n        return {\n          ...prev,\n          referredUsers: [...prev.referredUsers, referredUserId],\n          totalReferrals: prev.totalReferrals + 1,\n          rewardsEarned: prev.rewardsEarned + reward,\n          referralHistory: [\n            ...prev.referralHistory,\n            {\n              referredUserId,\n              referredAt: Date.now(),\n              rewardEarned: reward,\n              status: 'completed',\n            },\n          ],\n        };\n      });\n\n      console.log(`[ReferralProgram] New referral! +${reward} months premium`);\n    },\n    [referralData]\n  );\n\n  /**\n   * Получение информации о наградах\n   */\n  const getRewards = useCallback((): { available: number; total: number; nextReward: string } => {\n    if (!referralData) {\n      return { available: 0, total: 0, nextReward: 'Пригласите друга, чтобы получить награду' };\n    }\n\n    const available = referralData.rewardsEarned - referralData.rewardsRedeemed;\n    const nextReward = referralData.totalReferrals >= 5 \n      ? 'Вы достигли максимума наград!'\n      : `Пригласите еще ${5 - referralData.totalReferrals} друзей для бонусной награды`;\n\n    return {\n      available,\n      total: referralData.rewardsEarned,\n      nextReward,\n    };\n  }, [referralData]);\n\n  /**\n   * Использование награды\n   */\n  const redeemReward = useCallback(\n    async (amount: number): Promise<boolean> => {\n      if (!referralData) return false;\n\n      const available = referralData.rewardsEarned - referralData.rewardsRedeemed;\n      if (available < amount) {\n        return false; // Недостаточно наград\n      }\n\n      setReferralData((prev) => {\n        if (!prev) return prev;\n\n        return {\n          ...prev,\n          rewardsRedeemed: prev.rewardsRedeemed + amount,\n        };\n      });\n\n      // Здесь можно интегрировать с системой подписок\n      console.log(`[ReferralProgram] Redeemed ${amount} months premium`);\n      return true;\n    },\n    [referralData]\n  );\n\n  return useMemo(\n    () => ({\n      referralData,\n      referralCode,\n      referralLink,\n      shareReferral,\n      checkReferralCode,\n      getRewards,\n      redeemReward,\n    }),\n    [referralData, referralCode, referralLink, shareReferral, checkReferralCode, getRewards, redeemReward]\n  );\n});\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}