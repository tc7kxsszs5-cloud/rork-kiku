{"version":3,"names":["React","useState","useEffect","useRef","View","Text","StyleSheet","TouchableOpacity","Platform","Alert","StatusBar","useRouter","useLocalSearchParams","Video","PhoneOff","Mic","MicOff","Volume2","VolumeX","VideoOff","useThemeMode","HapticFeedback","CameraView","useCameraPermissions","jsx","_jsx","jsxs","_jsxs","CallScreen","cov_v52rxufs3","f","router","s","params","_ref","theme","_ref2","_ref3","_slicedToArray","isCallActive","setIsCallActive","_ref4","_ref5","isMuted","setIsMuted","_ref6","_ref7","isSpeakerOn","setIsSpeakerOn","_ref8","type","_ref9","isVideoOn","setIsVideoOn","_ref10","_ref11","callDuration","setCallDuration","_ref12","_ref13","cameraPermission","requestCameraPermission","soundRef","intervalRef","contactName","b","phoneNumber","callType","styles","createStyles","startCall","endCall","current","setInterval","prev","clearInterval","_ref14","_asyncToGenerator","medium","granted","permission","alert","back","error","console","apply","arguments","_ref15","unloadAsync","toggleMute","light","toggleSpeaker","toggleVideo","_ref16","formatDuration","seconds","mins","Math","floor","secs","toString","padStart","style","container","children","barStyle","camera","facing","videoOverlay","videoHeader","videoContactName","videoDuration","audioContainer","avatarContainer","avatar","avatarText","charAt","toUpperCase","callStatus","controls","controlButton","controlButtonActive","onPress","size","color","endCallButton","create","flex","backgroundColor","justifyContent","padding","paddingTop","OS","alignItems","fontSize","fontWeight","marginBottom","opacity","width","height","borderRadius","flexDirection","paddingBottom","gap"],"sources":["call.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Platform,\n  Alert,\n  StatusBar,\n} from 'react-native';\nimport { useRouter, useLocalSearchParams } from 'expo-router';\nimport { Video, PhoneOff, Mic, MicOff, Volume2, VolumeX, VideoOff } from 'lucide-react-native';\nimport { useThemeMode } from '@/constants/ThemeContext';\nimport { HapticFeedback } from '@/constants/haptics';\nimport { Audio } from 'expo-av';\nimport { CameraView, useCameraPermissions } from 'expo-camera';\n\nexport default function CallScreen() {\n  const router = useRouter();\n  const params = useLocalSearchParams<{\n    contactName?: string;\n    phoneNumber?: string;\n    type?: 'audio' | 'video';\n  }>();\n  const { theme } = useThemeMode();\n  \n  const [isCallActive, setIsCallActive] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isSpeakerOn, setIsSpeakerOn] = useState(true);\n  const [isVideoOn, setIsVideoOn] = useState(params.type === 'video');\n  const [callDuration, setCallDuration] = useState(0);\n  const [cameraPermission, requestCameraPermission] = useCameraPermissions();\n  \n  const soundRef = useRef<Audio.Sound | null>(null);\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const contactName = params.contactName || 'Неизвестный';\n  const phoneNumber = params.phoneNumber || '';\n  const callType = params.type || 'audio';\n\n  const styles = createStyles(theme);\n\n  useEffect(() => {\n    startCall();\n    return () => {\n      endCall();\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps -- mount/cleanup only\n\n  useEffect(() => {\n    if (isCallActive) {\n      intervalRef.current = setInterval(() => {\n        setCallDuration((prev) => prev + 1);\n      }, 1000);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isCallActive]);\n\n  const startCall = async () => {\n    try {\n      HapticFeedback.medium();\n      \n      // Запрос разрешений\n      if (callType === 'video' && !cameraPermission?.granted) {\n        const permission = await requestCameraPermission();\n        if (!permission.granted) {\n          Alert.alert('Разрешение', 'Необходимо разрешение на использование камеры');\n          router.back();\n          return;\n        }\n      }\n\n      // В реальном приложении здесь будет подключение к WebRTC или SIP\n      // Пока просто имитируем звонок\n      setIsCallActive(true);\n      \n      // Воспроизведение звука звонка (опционально)\n      // В реальном приложении здесь будет подключение к WebRTC\n      // Звук звонка можно добавить позже\n    } catch (error) {\n      console.error('[CallScreen] Start call error:', error);\n      Alert.alert('Ошибка', 'Не удалось начать звонок');\n      router.back();\n    }\n  };\n\n  const endCall = async () => {\n    try {\n      HapticFeedback.error();\n      setIsCallActive(false);\n      \n      if (soundRef.current) {\n        await soundRef.current.unloadAsync();\n        soundRef.current = null;\n      }\n      \n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      \n      // В реальном приложении здесь будет отключение от WebRTC\n      router.back();\n    } catch (error) {\n      console.error('[CallScreen] End call error:', error);\n      router.back();\n    }\n  };\n\n  const toggleMute = () => {\n    HapticFeedback.light();\n    setIsMuted(!isMuted);\n    // В реальном приложении здесь будет управление микрофоном через WebRTC\n  };\n\n  const toggleSpeaker = () => {\n    HapticFeedback.light();\n    setIsSpeakerOn(!isSpeakerOn);\n    // В реальном приложении здесь будет управление динамиком\n  };\n\n  const toggleVideo = async () => {\n    if (callType !== 'video') return;\n    \n    HapticFeedback.light();\n    \n    if (!isVideoOn && !cameraPermission?.granted) {\n      const permission = await requestCameraPermission();\n      if (!permission.granted) {\n        Alert.alert('Разрешение', 'Необходимо разрешение на использование камеры');\n        return;\n      }\n    }\n    \n    setIsVideoOn(!isVideoOn);\n    // В реальном приложении здесь будет управление камерой через WebRTC\n  };\n\n  const formatDuration = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <View style={styles.container}>\n      <StatusBar barStyle=\"light-content\" />\n      \n      {callType === 'video' && isVideoOn && cameraPermission?.granted ? (\n        <CameraView\n          style={styles.camera}\n          facing=\"front\"\n        >\n          <View style={styles.videoOverlay}>\n            <View style={styles.videoHeader}>\n              <Text style={styles.videoContactName}>{contactName}</Text>\n              <Text style={styles.videoDuration}>{formatDuration(callDuration)}</Text>\n            </View>\n          </View>\n        </CameraView>\n      ) : (\n        <View style={styles.audioContainer}>\n          <View style={styles.avatarContainer}>\n            <View style={styles.avatar}>\n              <Text style={styles.avatarText}>{contactName.charAt(0).toUpperCase()}</Text>\n            </View>\n          </View>\n          <Text style={styles.contactName}>{contactName}</Text>\n          <Text style={styles.phoneNumber}>{phoneNumber}</Text>\n          <Text style={styles.callStatus}>\n            {isCallActive ? formatDuration(callDuration) : 'Звонок...'}\n          </Text>\n        </View>\n      )}\n\n      <View style={styles.controls}>\n        <TouchableOpacity\n          style={[styles.controlButton, isMuted && styles.controlButtonActive]}\n          onPress={toggleMute}\n        >\n          {isMuted ? (\n            <MicOff size={24} color=\"#fff\" />\n          ) : (\n            <Mic size={24} color=\"#fff\" />\n          )}\n        </TouchableOpacity>\n\n        {callType === 'video' && (\n          <TouchableOpacity\n            style={[styles.controlButton, !isVideoOn && styles.controlButtonActive]}\n            onPress={toggleVideo}\n          >\n            {isVideoOn ? (\n              <Video size={24} color=\"#fff\" />\n            ) : (\n              <VideoOff size={24} color=\"#fff\" />\n            )}\n          </TouchableOpacity>\n        )}\n\n        <TouchableOpacity\n          style={[styles.controlButton, !isSpeakerOn && styles.controlButtonActive]}\n          onPress={toggleSpeaker}\n        >\n          {isSpeakerOn ? (\n            <Volume2 size={24} color=\"#fff\" />\n          ) : (\n            <VolumeX size={24} color=\"#fff\" />\n          )}\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.controlButton, styles.endCallButton]}\n          onPress={endCall}\n        >\n          <PhoneOff size={24} color=\"#fff\" />\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst createStyles = (theme: any) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n  },\n  camera: {\n    flex: 1,\n  },\n  videoOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n    justifyContent: 'space-between',\n  },\n  videoHeader: {\n    padding: 20,\n    paddingTop: Platform.OS === 'ios' ? 50 : 20,\n    alignItems: 'center',\n  },\n  videoContactName: {\n    fontSize: 24,\n    fontWeight: '700',\n    color: '#fff',\n    marginBottom: 8,\n  },\n  videoDuration: {\n    fontSize: 16,\n    color: '#fff',\n    opacity: 0.8,\n  },\n  audioContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n  },\n  avatarContainer: {\n    marginBottom: 24,\n  },\n  avatar: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    backgroundColor: '#4A90E2',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  avatarText: {\n    fontSize: 48,\n    fontWeight: '700',\n    color: '#fff',\n  },\n  contactName: {\n    fontSize: 28,\n    fontWeight: '700',\n    color: '#fff',\n    marginBottom: 8,\n  },\n  phoneNumber: {\n    fontSize: 18,\n    color: '#fff',\n    opacity: 0.7,\n    marginBottom: 16,\n  },\n  callStatus: {\n    fontSize: 16,\n    color: '#fff',\n    opacity: 0.6,\n  },\n  controls: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 32,\n    paddingBottom: Platform.OS === 'ios' ? 50 : 32,\n    gap: 20,\n  },\n  controlButton: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  controlButtonActive: {\n    backgroundColor: 'rgba(255, 255, 255, 0.4)',\n  },\n  endCallButton: {\n    backgroundColor: '#ef4444',\n    width: 64,\n    height: 64,\n    borderRadius: 32,\n  },\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}