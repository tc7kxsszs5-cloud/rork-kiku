{"version":3,"names":["initTRPC","superjson","cov_4q3300uer","s","createContext","_ref","_asyncToGenerator","opts","f","req","_x","apply","arguments","t","context","create","transformer","errorFormatter","_ref2","shape","error","isDevelopment","process","env","NODE_ENV","Object","assign","data","stack","b","undefined","message","code","createTRPCRouter","router","publicProcedure","procedure","protectedProcedure"],"sources":["create-context.ts"],"sourcesContent":["import { FetchCreateContextFnOptions } from \"@trpc/server/adapters/fetch\";\nimport { initTRPC, TRPCError } from \"@trpc/server\";\nimport superjson from \"superjson\";\n\nexport const createContext = async (opts: FetchCreateContextFnOptions) => {\n  return {\n    req: opts.req,\n  };\n};\n\nexport type Context = Awaited<ReturnType<typeof createContext>>;\n\nconst t = initTRPC.context<Context>().create({\n  transformer: superjson,\n  errorFormatter({ shape, error }) {\n    // Don't expose internal error details in production\n    const isDevelopment = process.env.NODE_ENV === 'development';\n    \n    return {\n      ...shape,\n      data: {\n        ...shape.data,\n        // Only show stack trace in development\n        stack: isDevelopment ? error.stack : undefined,\n        // Sanitize error message in production\n        message: isDevelopment \n          ? error.message \n          : error.code === 'BAD_REQUEST' || error.code === 'UNAUTHORIZED'\n            ? error.message\n            : 'An error occurred. Please try again.',\n      },\n    };\n  },\n});\n\nexport const createTRPCRouter = t.router;\nexport const publicProcedure = t.procedure;\nexport const protectedProcedure = t.procedure;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAASA,QAAQ,QAAmB,cAAc;AAClD,OAAOC,SAAS,MAAM,WAAW;AAACC,aAAA,GAAAC,CAAA;AAElC,OAAO,IAAMC,aAAa;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,IAAiC,EAAK;IAAAL,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAC,CAAA;IACxE,OAAO;MACLM,GAAG,EAAEF,IAAI,CAACE;IACZ,CAAC;EACH,CAAC;EAAA,gBAJYL,aAAaA,CAAAM,EAAA;IAAA,OAAAL,IAAA,CAAAM,KAAA,OAAAC,SAAA;EAAA;AAAA,GAIzB;AAID,IAAMC,CAAC,IAAAX,aAAA,GAAAC,CAAA,OAAGH,QAAQ,CAACc,OAAO,CAAU,CAAC,CAACC,MAAM,CAAC;EAC3CC,WAAW,EAAEf,SAAS;EACtBgB,cAAc,WAAdA,cAAcA,CAAAC,KAAA,EAAmB;IAAA,IAAhBC,KAAK,GAAAD,KAAA,CAALC,KAAK;MAAEC,KAAK,GAAAF,KAAA,CAALE,KAAK;IAAAlB,aAAA,GAAAM,CAAA;IAE3B,IAAMa,aAAa,IAAAnB,aAAA,GAAAC,CAAA,OAAGmB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa;IAACtB,aAAA,GAAAC,CAAA;IAE7D,OAAAsB,MAAA,CAAAC,MAAA,KACKP,KAAK;MACRQ,IAAI,EAAAF,MAAA,CAAAC,MAAA,KACCP,KAAK,CAACQ,IAAI;QAEbC,KAAK,EAAEP,aAAa,IAAAnB,aAAA,GAAA2B,CAAA,UAAGT,KAAK,CAACQ,KAAK,KAAA1B,aAAA,GAAA2B,CAAA,UAAGC,SAAS;QAE9CC,OAAO,EAAEV,aAAa,IAAAnB,aAAA,GAAA2B,CAAA,UAClBT,KAAK,CAACW,OAAO,KAAA7B,aAAA,GAAA2B,CAAA,UACb,CAAA3B,aAAA,GAAA2B,CAAA,UAAAT,KAAK,CAACY,IAAI,KAAK,aAAa,MAAA9B,aAAA,GAAA2B,CAAA,UAAIT,KAAK,CAACY,IAAI,KAAK,cAAc,KAAA9B,aAAA,GAAA2B,CAAA,UAC3DT,KAAK,CAACW,OAAO,KAAA7B,aAAA,GAAA2B,CAAA,UACb,sCAAsC;MAAA;IAC7C;EAEL;AACF,CAAC,CAAC;AAEF,OAAO,IAAMI,gBAAgB,IAAA/B,aAAA,GAAAC,CAAA,OAAGU,CAAC,CAACqB,MAAM;AACxC,OAAO,IAAMC,eAAe,IAAAjC,aAAA,GAAAC,CAAA,OAAGU,CAAC,CAACuB,SAAS;AAC1C,OAAO,IAAMC,kBAAkB,IAAAnC,aAAA,GAAAC,CAAA,OAAGU,CAAC,CAACuB,SAAS","ignoreList":[]}