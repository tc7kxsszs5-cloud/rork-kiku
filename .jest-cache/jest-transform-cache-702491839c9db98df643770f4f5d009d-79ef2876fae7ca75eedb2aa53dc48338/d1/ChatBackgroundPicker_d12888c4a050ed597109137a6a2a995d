c89815a0dd4cbc52a5459e9b9a7f418a
import _asyncToGenerator from "@babel/runtime/helpers/asyncToGenerator";
import React from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';
import { useChatBackgrounds } from '@/constants/ChatBackgroundsContext';
import { useThemeMode } from '@/constants/ThemeContext';
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
export function ChatBackgroundPicker(_ref) {
  var chatId = _ref.chatId,
    onSelect = _ref.onSelect,
    _ref$visible = _ref.visible,
    visible = _ref$visible === void 0 ? true : _ref$visible,
    onClose = _ref.onClose;
  var _useChatBackgrounds = useChatBackgrounds(),
    backgrounds = _useChatBackgrounds.backgrounds,
    setChatBackground = _useChatBackgrounds.setChatBackground;
  var _useThemeMode = useThemeMode(),
    theme = _useThemeMode.theme;
  var styles = createStyles(theme);
  var handleSelect = function () {
    var _ref2 = _asyncToGenerator(function* (backgroundId) {
      yield setChatBackground(chatId, backgroundId);
      onSelect == null || onSelect(backgroundId);
      onClose == null || onClose();
    });
    return function handleSelect(_x) {
      return _ref2.apply(this, arguments);
    };
  }();
  if (!visible) return null;
  return _jsxs(View, {
    style: styles.container,
    children: [_jsx(Text, {
      style: styles.title,
      children: "\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043E\u043D \u0447\u0430\u0442\u0430"
    }), _jsx(View, {
      style: styles.grid,
      children: backgrounds.map(function (bg) {
        return _jsxs(TouchableOpacity, {
          style: styles.backgroundItem,
          onPress: function onPress() {
            return handleSelect(bg.id);
          },
          children: [_jsx(View, {
            style: [styles.backgroundPreview, bg.type === 'color' && {
              backgroundColor: bg.value
            }, bg.type === 'gradient' && {
              backgroundColor: Array.isArray(bg.value) ? bg.value[0] : '#FFFFFF'
            }]
          }), _jsx(Text, {
            style: styles.backgroundName,
            children: bg.name
          })]
        }, bg.id);
      })
    })]
  });
}
var createStyles = function createStyles(theme) {
  return StyleSheet.create({
    container: {
      padding: 16
    },
    title: {
      fontSize: 18,
      fontWeight: '600',
      color: theme.text,
      marginBottom: 16
    },
    grid: {
      flexDirection: 'row',
      flexWrap: 'wrap',
      gap: 12
    },
    backgroundItem: {
      alignItems: 'center',
      width: 100
    },
    backgroundPreview: {
      width: 80,
      height: 80,
      borderRadius: 8,
      marginBottom: 8,
      borderWidth: 1,
      borderColor: theme.borderSoft
    },
    backgroundName: {
      fontSize: 12,
      color: theme.textSecondary,
      textAlign: 'center'
    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIlZpZXciLCJUZXh0IiwiVG91Y2hhYmxlT3BhY2l0eSIsIlN0eWxlU2hlZXQiLCJ1c2VDaGF0QmFja2dyb3VuZHMiLCJ1c2VUaGVtZU1vZGUiLCJqc3giLCJfanN4IiwianN4cyIsIl9qc3hzIiwiQ2hhdEJhY2tncm91bmRQaWNrZXIiLCJfcmVmIiwiY2hhdElkIiwib25TZWxlY3QiLCJfcmVmJHZpc2libGUiLCJ2aXNpYmxlIiwib25DbG9zZSIsIl91c2VDaGF0QmFja2dyb3VuZHMiLCJiYWNrZ3JvdW5kcyIsInNldENoYXRCYWNrZ3JvdW5kIiwiX3VzZVRoZW1lTW9kZSIsInRoZW1lIiwic3R5bGVzIiwiY3JlYXRlU3R5bGVzIiwiaGFuZGxlU2VsZWN0IiwiX3JlZjIiLCJfYXN5bmNUb0dlbmVyYXRvciIsImJhY2tncm91bmRJZCIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzdHlsZSIsImNvbnRhaW5lciIsImNoaWxkcmVuIiwidGl0bGUiLCJncmlkIiwibWFwIiwiYmciLCJiYWNrZ3JvdW5kSXRlbSIsIm9uUHJlc3MiLCJpZCIsImJhY2tncm91bmRQcmV2aWV3IiwidHlwZSIsImJhY2tncm91bmRDb2xvciIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiYmFja2dyb3VuZE5hbWUiLCJuYW1lIiwiY3JlYXRlIiwicGFkZGluZyIsImZvbnRTaXplIiwiZm9udFdlaWdodCIsImNvbG9yIiwidGV4dCIsIm1hcmdpbkJvdHRvbSIsImZsZXhEaXJlY3Rpb24iLCJmbGV4V3JhcCIsImdhcCIsImFsaWduSXRlbXMiLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlclJhZGl1cyIsImJvcmRlcldpZHRoIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJTb2Z0IiwidGV4dFNlY29uZGFyeSIsInRleHRBbGlnbiJdLCJzb3VyY2VzIjpbIkNoYXRCYWNrZ3JvdW5kUGlja2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENoYXQgQmFja2dyb3VuZCBQaWNrZXIgQ29tcG9uZW50XG4gKiBBbGxvd3MgdXNlcnMgdG8gc2VsZWN0IGNoYXQgYmFja2dyb3VuZHNcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVmlldywgVGV4dCwgVG91Y2hhYmxlT3BhY2l0eSwgU3R5bGVTaGVldCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgeyB1c2VDaGF0QmFja2dyb3VuZHMgfSBmcm9tICdAL2NvbnN0YW50cy9DaGF0QmFja2dyb3VuZHNDb250ZXh0JztcbmltcG9ydCB7IHVzZVRoZW1lTW9kZSB9IGZyb20gJ0AvY29uc3RhbnRzL1RoZW1lQ29udGV4dCc7XG5cbmludGVyZmFjZSBDaGF0QmFja2dyb3VuZFBpY2tlclByb3BzIHtcbiAgY2hhdElkOiBzdHJpbmc7XG4gIG9uU2VsZWN0PzogKGJhY2tncm91bmRJZDogc3RyaW5nKSA9PiB2b2lkO1xuICB2aXNpYmxlPzogYm9vbGVhbjtcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDaGF0QmFja2dyb3VuZFBpY2tlcih7IGNoYXRJZCwgb25TZWxlY3QsIHZpc2libGUgPSB0cnVlLCBvbkNsb3NlIH06IENoYXRCYWNrZ3JvdW5kUGlja2VyUHJvcHMpIHtcbiAgY29uc3QgeyBiYWNrZ3JvdW5kcywgc2V0Q2hhdEJhY2tncm91bmQgfSA9IHVzZUNoYXRCYWNrZ3JvdW5kcygpO1xuICBjb25zdCB7IHRoZW1lIH0gPSB1c2VUaGVtZU1vZGUoKTtcbiAgY29uc3Qgc3R5bGVzID0gY3JlYXRlU3R5bGVzKHRoZW1lKTtcblxuICBjb25zdCBoYW5kbGVTZWxlY3QgPSBhc3luYyAoYmFja2dyb3VuZElkOiBzdHJpbmcpID0+IHtcbiAgICBhd2FpdCBzZXRDaGF0QmFja2dyb3VuZChjaGF0SWQsIGJhY2tncm91bmRJZCk7XG4gICAgb25TZWxlY3Q/LihiYWNrZ3JvdW5kSWQpO1xuICAgIG9uQ2xvc2U/LigpO1xuICB9O1xuXG4gIGlmICghdmlzaWJsZSkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLnRpdGxlfT7QktGL0LHQtdGA0LjRgtC1INGE0L7QvSDRh9Cw0YLQsDwvVGV4dD5cbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuZ3JpZH0+XG4gICAgICAgIHtiYWNrZ3JvdW5kcy5tYXAoKGJnKSA9PiAoXG4gICAgICAgICAgPFRvdWNoYWJsZU9wYWNpdHlcbiAgICAgICAgICAgIGtleT17YmcuaWR9XG4gICAgICAgICAgICBzdHlsZT17c3R5bGVzLmJhY2tncm91bmRJdGVtfVxuICAgICAgICAgICAgb25QcmVzcz17KCkgPT4gaGFuZGxlU2VsZWN0KGJnLmlkKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgIHN0eWxlcy5iYWNrZ3JvdW5kUHJldmlldyxcbiAgICAgICAgICAgICAgICBiZy50eXBlID09PSAnY29sb3InICYmIHsgYmFja2dyb3VuZENvbG9yOiBiZy52YWx1ZSBhcyBzdHJpbmcgfSxcbiAgICAgICAgICAgICAgICBiZy50eXBlID09PSAnZ3JhZGllbnQnICYmIHtcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQXJyYXkuaXNBcnJheShiZy52YWx1ZSkgPyBiZy52YWx1ZVswXSA6ICcjRkZGRkZGJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxUZXh0IHN0eWxlPXtzdHlsZXMuYmFja2dyb3VuZE5hbWV9PntiZy5uYW1lfTwvVGV4dD5cbiAgICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gICAgICAgICkpfVxuICAgICAgPC9WaWV3PlxuICAgIDwvVmlldz5cbiAgKTtcbn1cblxuY29uc3QgY3JlYXRlU3R5bGVzID0gKHRoZW1lOiBhbnkpID0+IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgcGFkZGluZzogMTYsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgZm9udFNpemU6IDE4LFxuICAgIGZvbnRXZWlnaHQ6ICc2MDAnLFxuICAgIGNvbG9yOiB0aGVtZS50ZXh0LFxuICAgIG1hcmdpbkJvdHRvbTogMTYsXG4gIH0sXG4gIGdyaWQ6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBmbGV4V3JhcDogJ3dyYXAnLFxuICAgIGdhcDogMTIsXG4gIH0sXG4gIGJhY2tncm91bmRJdGVtOiB7XG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgd2lkdGg6IDEwMCxcbiAgfSxcbiAgYmFja2dyb3VuZFByZXZpZXc6IHtcbiAgICB3aWR0aDogODAsXG4gICAgaGVpZ2h0OiA4MCxcbiAgICBib3JkZXJSYWRpdXM6IDgsXG4gICAgbWFyZ2luQm90dG9tOiA4LFxuICAgIGJvcmRlcldpZHRoOiAxLFxuICAgIGJvcmRlckNvbG9yOiB0aGVtZS5ib3JkZXJTb2Z0LFxuICB9LFxuICBiYWNrZ3JvdW5kTmFtZToge1xuICAgIGZvbnRTaXplOiAxMixcbiAgICBjb2xvcjogdGhlbWUudGV4dFNlY29uZGFyeSxcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICB9LFxufSk7XG4iXSwibWFwcGluZ3MiOiI7QUFLQSxPQUFPQSxLQUFLLE1BQU0sT0FBTztBQUN6QixTQUFTQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsZ0JBQWdCLEVBQUVDLFVBQVUsUUFBUSxjQUFjO0FBQ3ZFLFNBQVNDLGtCQUFrQixRQUFRLG9DQUFvQztBQUN2RSxTQUFTQyxZQUFZLFFBQVEsMEJBQTBCO0FBQUMsU0FBQUMsR0FBQSxJQUFBQyxJQUFBLEVBQUFDLElBQUEsSUFBQUMsS0FBQTtBQVN4RCxPQUFPLFNBQVNDLG9CQUFvQkEsQ0FBQUMsSUFBQSxFQUEyRTtFQUFBLElBQXhFQyxNQUFNLEdBQUFELElBQUEsQ0FBTkMsTUFBTTtJ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