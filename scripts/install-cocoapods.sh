#!/bin/bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CocoaPods (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ Homebrew)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./scripts/install-cocoapods.sh

set +e
cd "$(dirname "$0")/.."

echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CocoaPods..."
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ —É–∂–µ
if command -v pod &> /dev/null; then
    echo "‚úÖ CocoaPods —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: $(pod --version)"
    exit 0
fi

echo "1Ô∏è‚É£  –ü—Ä–æ–±—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ gem (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)..."
echo ""

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ gem (–≤—Å—Ç—Ä–æ–µ–Ω –≤ macOS)
sudo gem install cocoapods 2>&1 | tee /tmp/cocoapods-install.log

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ CocoaPods —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    pod --version
    exit 0
fi

echo ""
echo "‚ö†Ô∏è  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ gem –Ω–µ —É–¥–∞–ª–∞—Å—å"
echo ""
echo "2Ô∏è‚É£  –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Expo Go (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç CocoaPods)"
echo ""
echo "   –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ:"
echo "   1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Expo Go –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω"
echo "   2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: bun run start"
echo "   3. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥"
echo ""
echo "   CocoaPods –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è:"
echo "   - –ù–∞—Ç–∏–≤–Ω–æ–π —Å–±–æ—Ä–∫–∏ iOS (expo run:ios)"
echo "   - –†–∞–±–æ—Ç—ã —Å ios/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π"
echo ""
echo "üí° –ï—Å–ª–∏ –≤—Å—ë –∂–µ –Ω—É–∂–µ–Ω CocoaPods, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:"
echo "   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é: https://cocoapods.org/"
echo "   - –ò–ª–∏ —á–µ—Ä–µ–∑ rbenv/rvm (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)"
echo ""
