# ๐ก๏ธ ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ ะฝะฐัััะพะตะบ ะผะตััะตะฝะดะถะตัะฐ

## ๐ ะะฐะฟัะพัะตะฝะฝัะน ััะฝะบัะธะพะฝะฐะป

1. โ **ะะฐะทะดะตะป ะฝะฐัััะพะตะบ ัะธะฝััะพะฝะธะทะฐัะธะธ**
2. โ **Face ID (ะฑะธะพะผะตััะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั)**
3. โ **ะะฐัััะพะนะบะธ ัะพะฝะฐ ัะฐัะฐ**
4. โ **ะัะพัะธะต ะฝะฐัััะพะนะบะธ ะผะตััะตะฝะดะถะตัะฐ ะดะปั ะดะตัะตะน**
5. โ **ะะพะดะธัะตะปััะบะฐั ะธะดะตะฝัะธัะธะบะฐัะธั**
6. โ **ะะตัะธัะธะบะฐัะธั ัะตัะตะท ะฟะพััั ะธ SMS**

---

## ๐ฏ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

### 1. ะะพะฒัะน ัะบัะฐะฝ ะฝะฐัััะพะตะบ ะผะตััะตะฝะดะถะตัะฐ

**ะััั:** `app/(tabs)/messenger-settings.tsx`

**ะกะตะบัะธะธ:**
- ะกะธะฝััะพะฝะธะทะฐัะธั
- ะะตะทะพะฟะฐัะฝะพััั (Face ID, ะฟะฐัะพะปั)
- ะะตััะพะฝะฐะปะธะทะฐัะธั (ัะพะฝ ัะฐัะฐ, ัะตะผั)
- ะะตัะธัะธะบะฐัะธั (ะฟะพััะฐ, SMS)
- ะะพะดะธัะตะปััะบะธะน ะบะพะฝััะพะปั

---

### 2. ะกัััะบัััะฐ ะฝะฐัััะพะตะบ

```
MessengerSettingsScreen
โโโ SyncSettings
โ   โโโ ะะฒัะพัะธะฝััะพะฝะธะทะฐัะธั
โ   โโโ ะงะฐััะพัะฐ ัะธะฝััะพะฝะธะทะฐัะธะธ
โ   โโโ ะััะพัะฝะธะบ ะดะฐะฝะฝัั
โโโ SecuritySettings
โ   โโโ Face ID / Touch ID
โ   โโโ PIN-ะบะพะด
โ   โโโ ะะปะพะบะธัะพะฒะบะฐ ัะบัะฐะฝะฐ
โ   โโโ ะัะตะผั ะฑะปะพะบะธัะพะฒะบะธ
โโโ PersonalizationSettings
โ   โโโ ะคะพะฝ ัะฐัะฐ
โ   โโโ ะขะตะผะฐ ะพัะพัะผะปะตะฝะธั
โ   โโโ ะะฐะทะผะตั ััะธััะฐ
โ   โโโ ะะฒัะบะธ ัะฒะตะดะพะผะปะตะฝะธะน
โโโ VerificationSettings
โ   โโโ ะะตัะธัะธะบะฐัะธั email
โ   โโโ ะะตัะธัะธะบะฐัะธั SMS
โ   โโโ ะะฒัััะฐะบัะพัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
โโโ ParentIdentification
    โโโ ะัะธะฒัะทะบะฐ ะบ ัะพะดะธัะตะปั
    โโโ ะกะฟะพัะพะฑั ะธะดะตะฝัะธัะธะบะฐัะธะธ
    โโโ ะะฐัััะพะนะบะธ ะดะพัััะฟะฐ
```

---

## ๐ฑ ะะตะฐะปะธะทะฐัะธั ััะฝะบัะธะน

### 1. ะะฐะทะดะตะป ะฝะฐัััะพะตะบ ัะธะฝััะพะฝะธะทะฐัะธะธ

**ะะพะผะฟะพะฝะตะฝั:** `components/settings/SyncSettings.tsx`

**ะคัะฝะบัะธะธ:**
- ะะตัะตะบะปััะฐัะตะปั ะฐะฒัะพัะธะฝััะพะฝะธะทะฐัะธะธ
- ะัะฑะพั ัะฐััะพัั ัะธะฝััะพะฝะธะทะฐัะธะธ (ัะตะฐะป-ัะฐะนะผ, ะบะฐะถะดัะต 5 ะผะธะฝ, 15 ะผะธะฝ, 1 ัะฐั)
- ะัะฑะพั ะธััะพัะฝะธะบะฐ ะดะฐะฝะฝัั (ะปะพะบะฐะปัะฝะพ, ะพะฑะปะฐะบะพ)
- ะกัะฐััั ะฟะพัะปะตะดะฝะตะน ัะธะฝััะพะฝะธะทะฐัะธะธ
- ะะฝะพะฟะบะฐ ัััะฝะพะน ัะธะฝััะพะฝะธะทะฐัะธะธ

**ะฅัะฐะฝะตะฝะธะต:**
- `AsyncStorage` ะดะปั ะฝะฐัััะพะตะบ
- ะะพะฝัะตะบัั `SyncSettingsContext` (ะฝะพะฒัะน)

---

### 2. Face ID / ะะธะพะผะตััะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั

**ะะธะฑะปะธะพัะตะบะฐ:** `expo-local-authentication`

**ะะพะผะฟะพะฝะตะฝั:** `components/settings/BiometricAuthSettings.tsx`

**ะคัะฝะบัะธะธ:**
- ะะฟัะตะดะตะปะตะฝะธะต ะดะพัััะฟะฝัั ะผะตัะพะดะพะฒ (Face ID, Touch ID, Fingerprint)
- ะะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะฑะธะพะผะตััะธะธ
- ะะฐะฟัะพั ัะฐะทัะตัะตะฝะธะน
- ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- Fallback ะฝะฐ PIN-ะบะพะด

**ะฅัะฐะฝะตะฝะธะต:**
- `SecureStore` ะดะปั ัะปะฐะณะฐ ะฒะบะปััะตะฝะธั ะฑะธะพะผะตััะธะธ
- ะะฐัััะพะนะบะธ ะฒ `SecuritySettingsContext`

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะัะธ ะพัะบัััะธะธ ะฟัะธะปะพะถะตะฝะธั
- ะัะธ ะฟัะพัะผะพััะต ะฝะฐัััะพะตะบ ะฑะตะทะพะฟะฐัะฝะพััะธ
- ะัะธ ะดะพัััะฟะต ะบ ัะพะดะธัะตะปััะบะธะผ ััะฝะบัะธัะผ

---

### 3. ะะฐัััะพะนะบะธ ัะพะฝะฐ ัะฐัะฐ

**ะะพะผะฟะพะฝะตะฝั:** `components/settings/ChatBackgroundSettings.tsx`

**ะคัะฝะบัะธะธ:**
- ะัะฑะพั ัะพะฝะฐ (ัะฒะตัะฐ, ะณัะฐะดะธะตะฝัั, ะธะทะพะฑัะฐะถะตะฝะธั)
- ะัะตะดะฟัะพัะผะพัั ัะพะฝะฐ
- ะะฐะปะตัะตั ัะพะฝะพะฒ
- ะะฐะณััะทะบะฐ ัะพะฑััะฒะตะฝะฝะพะณะพ ัะพะฝะฐ
- ะะฐัััะพะนะบะธ ะดะปั ัะฐะทะฝัั ัะฐัะพะฒ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

**ะฅัะฐะฝะตะฝะธะต:**
- `AsyncStorage` ะดะปั ะฒัะฑัะฐะฝะฝะพะณะพ ัะพะฝะฐ
- ะะพะฝัะตะบัั `ChatSettingsContext` (ะฝะพะฒัะน)

**ะะตะฐะปะธะทะฐัะธั:**
- ะะปะพะฑะฐะปัะฝะฐั ัะตะผะฐ ัะฐัะฐ
- ะัะธะผะตะฝะตะฝะธะต ะบ ัะบัะฐะฝั ัะฐัะฐ
- ะััะธัะพะฒะฐะฝะธะต ะธะทะพะฑัะฐะถะตะฝะธะน

---

### 4. ะะตัะธัะธะบะฐัะธั ัะตัะตะท ะฟะพััั ะธ SMS

**ะะธะฑะปะธะพัะตะบะธ:**
- Email: ะฒัััะพะตะฝะฝะฐั ะพัะฟัะฐะฒะบะฐ ะธะปะธ API (SendGrid, Resend)
- SMS: API (Twilio, AWS SNS, ะธะปะธ ะปะพะบะฐะปัะฝัะน ัะตัะฒะธั)

**ะะพะผะฟะพะฝะตะฝั:** `components/settings/VerificationSettings.tsx`

**ะคัะฝะบัะธะธ:**
- ะะตัะธัะธะบะฐัะธั email
  - ะัะฟัะฐะฒะบะฐ ะบะพะดะฐ ะฝะฐ email
  - ะะฒะพะด ะบะพะดะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั
  - ะกัะฐััั ะฒะตัะธัะธะบะฐัะธะธ
- ะะตัะธัะธะบะฐัะธั SMS
  - ะัะฟัะฐะฒะบะฐ ะบะพะดะฐ ะฝะฐ ัะตะปะตัะพะฝ
  - ะะฒะพะด ะบะพะดะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั
  - ะกัะฐััั ะฒะตัะธัะธะบะฐัะธะธ
- ะะฒัััะฐะบัะพัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
  - ะะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต 2FA
  - ะัะฑะพั ะผะตัะพะดะฐ (email/SMS)

**Backend:**
- tRPC ะฟัะพัะตะดััั ะดะปั ะพัะฟัะฐะฒะบะธ ะบะพะดะพะฒ
- ะฅัะฐะฝะตะฝะธะต ะบะพะดะพะฒ (ะฒัะตะผะตะฝะฝะพะต, ั TTL)
- ะัะพะฒะตัะบะฐ ะบะพะดะพะฒ

---

### 5. ะะพะดะธัะตะปััะบะฐั ะธะดะตะฝัะธัะธะบะฐัะธั

**ะะพะผะฟะพะฝะตะฝั:** `components/settings/ParentIdentificationSettings.tsx`

**ะคัะฝะบัะธะธ:**
- ะัะธะฒัะทะบะฐ ะฐะบะบะฐัะฝัะฐ ัะตะฑะตะฝะบะฐ ะบ ัะพะดะธัะตะปั
- QR-ะบะพะด ะดะปั ะฑััััะพะน ะฟัะธะฒัะทะบะธ
- ะะพะด ะฟัะธะฒัะทะบะธ (ะดะปั ัััะฝะพะณะพ ะฒะฒะพะดะฐ)
- ะกะฟะธัะพะบ ะฟัะธะฒัะทะฐะฝะฝัั ะดะตัะตะน (ะดะปั ัะพะดะธัะตะปะตะน)
- ะะฐัััะพะนะบะธ ะดะพัััะฟะฐ ัะพะดะธัะตะปั

**Backend:**
- tRPC ะฟัะพัะตะดััั ะดะปั ะฟัะธะฒัะทะบะธ
- ะกะฒัะทั parent-child ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั
- ะะตะฝะตัะฐัะธั QR-ะบะพะดะพะฒ

---

## ๐๏ธ ะขะตัะฝะธัะตัะบะฐั ัะตะฐะปะธะทะฐัะธั

### ะะพะฒัะต ะทะฐะฒะธัะธะผะพััะธ

```json
{
  "expo-local-authentication": "~14.0.0",  // ะะธะพะผะตััะธั
  "expo-image-picker": "~17.0.8",          // ะัะฑะพั ัะพะฝะฐ (ัะถะต ะตััั)
  "expo-qrcode": "~1.0.0",                 // QR-ะบะพะดั (ะธะปะธ ะฑะธะฑะปะธะพัะตะบะฐ)
  "@react-native-async-storage/async-storage": "2.2.0",  // ะฃะถะต ะตััั
  "expo-secure-store": "~15.0.7"           // ะฃะถะต ะตััั
}
```

### ะะพะฒัะต ะบะพะฝัะตะบััั

1. **SyncSettingsContext**
   - ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะฐัััะพะนะบะฐะผะธ ัะธะฝััะพะฝะธะทะฐัะธะธ
   - ะกะพััะพัะฝะธะต ัะธะฝััะพะฝะธะทะฐัะธะธ

2. **SecuritySettingsContext**
   - ะะธะพะผะตััะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั
   - PIN-ะบะพะดั
   - ะะปะพะบะธัะพะฒะบะฐ ัะบัะฐะฝะฐ

3. **ChatSettingsContext**
   - ะคะพะฝ ัะฐัะฐ
   - ะะตััะพะฝะฐะปะธะทะฐัะธั

4. **VerificationContext**
   - ะะตัะธัะธะบะฐัะธั email/SMS
   - ะะพะดั ะฟะพะดัะฒะตัะถะดะตะฝะธั

### Backend ะฟัะพัะตะดััั (tRPC)

1. **ะกะธะฝััะพะฝะธะทะฐัะธั:**
   - `sync.getStatus` - ััะฐััั ัะธะฝััะพะฝะธะทะฐัะธะธ
   - `sync.trigger` - ะทะฐะฟััะบ ัะธะฝััะพะฝะธะทะฐัะธะธ

2. **ะะตัะธัะธะบะฐัะธั:**
   - `verification.sendEmailCode` - ะพัะฟัะฐะฒะบะฐ ะบะพะดะฐ ะฝะฐ email
   - `verification.sendSMSCode` - ะพัะฟัะฐะฒะบะฐ ะบะพะดะฐ ะฝะฐ SMS
   - `verification.verifyCode` - ะฟัะพะฒะตัะบะฐ ะบะพะดะฐ

3. **ะะพะดะธัะตะปััะบะฐั ะฟัะธะฒัะทะบะฐ:**
   - `parent.generateLinkCode` - ะณะตะฝะตัะฐัะธั ะบะพะดะฐ ะฟัะธะฒัะทะบะธ
   - `parent.linkChild` - ะฟัะธะฒัะทะบะฐ ัะตะฑะตะฝะบะฐ
   - `parent.getChildren` - ัะฟะธัะพะบ ะดะตัะตะน

---

## ๐ฑ UI/UX ะดะธะทะฐะนะฝ

### ะกัััะบัััะฐ ัะบัะฐะฝะฐ ะฝะฐัััะพะตะบ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะฐัััะพะนะบะธ ะผะตััะตะฝะดะถะตัะฐ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ะกะธะฝััะพะฝะธะทะฐัะธั               โ
โ    โ ะะฒัะพัะธะฝััะพะฝะธะทะฐัะธั          โ
โ    โ ะงะฐััะพัะฐ ัะธะฝััะพะฝะธะทะฐัะธะธ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ะะตะทะพะฟะฐัะฝะพััั                โ
โ    โ Face ID / Touch ID         โ
โ    โ PIN-ะบะพะด                    โ
โ    โ ะะปะพะบะธัะพะฒะบะฐ ัะบัะฐะฝะฐ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐จ ะะตััะพะฝะฐะปะธะทะฐัะธั              โ
โ    โ ะคะพะฝ ัะฐัะฐ                   โ
โ    โ ะขะตะผะฐ ะพัะพัะผะปะตะฝะธั            โ
โ    โ ะะฐะทะผะตั ััะธััะฐ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ๏ธ ะะตัะธัะธะบะฐัะธั                 โ
โ    โ ะะตัะธัะธะบะฐัะธั email          โ
โ    โ ะะตัะธัะธะบะฐัะธั SMS            โ
โ    โ ะะฒัััะฐะบัะพัะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธัโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐จโ๐ฉโ๐ง ะะพะดะธัะตะปััะบะธะน ะบะพะฝััะพะปั       โ
โ    โ ะัะธะฒัะทะบะฐ ะบ ัะพะดะธัะตะปั        โ
โ    โ ะะฐัััะพะนะบะธ ะดะพัััะฟะฐ          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ (ะฟะพ ะฟัะธะพัะธัะตัะฐะผ)

### ะคะฐะทะฐ 1: ะัะฝะพะฒะฐ (ะบัะธัะธัะฝะพ)

1. **ะกะพะทะดะฐัั ัะบัะฐะฝ ะฝะฐัััะพะตะบ**
   - `app/(tabs)/messenger-settings.tsx`
   - ะะฐะทะพะฒะฐั ััััะบัััะฐ
   - ะะฐะฒะธะณะฐัะธั

2. **ะะฐัััะพะนะบะธ ัะธะฝััะพะฝะธะทะฐัะธะธ**
   - ะะพะผะฟะพะฝะตะฝั `SyncSettings`
   - ะะพะฝัะตะบัั `SyncSettingsContext`
   - ะะฐะทะพะฒัะต ะฝะฐัััะพะนะบะธ

3. **ะะธะพะผะตััะธัะตัะบะฐั ะฐััะตะฝัะธัะธะบะฐัะธั**
   - ะะพะผะฟะพะฝะตะฝั `BiometricAuthSettings`
   - ะะฝัะตะณัะฐัะธั `expo-local-authentication`
   - ะะฐะทะพะฒะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั

### ะคะฐะทะฐ 2: ะะตััะพะฝะฐะปะธะทะฐัะธั

4. **ะะฐัััะพะนะบะธ ัะพะฝะฐ ัะฐัะฐ**
   - ะะพะผะฟะพะฝะตะฝั `ChatBackgroundSettings`
   - ะะฐะปะตัะตั ัะพะฝะพะฒ
   - ะัะธะผะตะฝะตะฝะธะต ะบ ัะฐัะฐะผ

### ะคะฐะทะฐ 3: ะะตัะธัะธะบะฐัะธั

5. **ะะตัะธัะธะบะฐัะธั email/SMS**
   - Backend ะฟัะพัะตะดััั
   - ะะพะผะฟะพะฝะตะฝั `VerificationSettings`
   - ะะฝัะตะณัะฐัะธั ั API

6. **ะะพะดะธัะตะปััะบะฐั ะธะดะตะฝัะธัะธะบะฐัะธั**
   - ะะพะผะฟะพะฝะตะฝั `ParentIdentificationSettings`
   - Backend ะฟัะพัะตะดััั
   - QR-ะบะพะดั

---

## โ๏ธ ะะฐะถะฝัะต ะผะพะผะตะฝัั

### ะะตะทะพะฟะฐัะฝะพััั

- ะะธะพะผะตััะธัะตัะบะธะต ะดะฐะฝะฝัะต ััะฐะฝะธัั ัะพะปัะบะพ ะปะพะบะฐะปัะฝะพ (`SecureStore`)
- ะะพะดั ะฒะตัะธัะธะบะฐัะธะธ ั ะพะณัะฐะฝะธัะตะฝะฝัะผ ะฒัะตะผะตะฝะตะผ ะถะธะทะฝะธ (TTL)
- HTTPS ะดะปั ะฒัะตั API ะทะฐะฟัะพัะพะฒ
- ะะฐะปะธะดะฐัะธั ะฒัะตั ะฒัะพะดะฝัั ะดะฐะฝะฝัั

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

- ะะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะััะธัะพะฒะฐะฝะธะต ะฝะฐัััะพะตะบ
- ะะฟัะธะผะธะทะฐัะธั ะธะทะพะฑัะฐะถะตะฝะธะน ัะพะฝะพะฒ

### ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั

- ะัะพััะฐั ะฝะฐะฒะธะณะฐัะธั
- ะะพะฝััะฝัะต ะธะบะพะฝะบะธ ะธ ะพะฟะธัะฐะฝะธั
- ะัะตะดะฟัะพัะผะพัั ะธะทะผะตะฝะตะฝะธะน
- ะะพะดัะฒะตัะถะดะตะฝะธะต ะฒะฐะถะฝัั ะดะตะนััะฒะธะน

---

## ๐ ะงะตะบะปะธัั ัะตะฐะปะธะทะฐัะธะธ

### ะะพะดะณะพัะพะฒะบะฐ

- [ ] ะะทััะธัั ัะตะบัััั ััััะบัััั ะฟัะพะตะบัะฐ
- [ ] ะะฟัะตะดะตะปะธัั ะผะตััะฐ ะธะฝัะตะณัะฐัะธะธ
- [ ] ะกะพะทะดะฐัั ะฟะปะฐะฝ ะบะพะผะฟะพะฝะตะฝัะพะฒ

### ะะฐะทัะฐะฑะพัะบะฐ

- [ ] ะกะพะทะดะฐัั ัะบัะฐะฝ ะฝะฐัััะพะตะบ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฝะฐัััะพะนะบะธ ัะธะฝััะพะฝะธะทะฐัะธะธ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั Face ID
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฝะฐัััะพะนะบะธ ัะพะฝะฐ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฒะตัะธัะธะบะฐัะธั
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ัะพะดะธัะตะปััะบัั ะธะดะตะฝัะธัะธะบะฐัะธั

### ะขะตััะธัะพะฒะฐะฝะธะต

- [ ] ะัะพัะตััะธัะพะฒะฐัั ะฒัะต ััะฝะบัะธะธ
- [ ] ะัะพะฒะตัะธัั ะฑะตะทะพะฟะฐัะฝะพััั
- [ ] ะัะพะฒะตัะธัั UX
- [ ] ะัะพัะตััะธัะพะฒะฐัั ะฝะฐ ัะฐะทะฝัั ััััะพะนััะฒะฐั

---

**ะะพัะพะฒ ะฝะฐัะฐัั ัะตะฐะปะธะทะฐัะธั!** ๐
